<HTML><HEAD>
<!-- This document was created from RTF source by rtftohtml version 3.8 -->
<TITLE>HL7 V2.2 Chapter  2</TITLE></HEAD>
<BODY BACKGROUND="" BGCOLOR="#FFFFFF" TEXT="#000000">

<H1>
References to other Chapters
</H1>
<A HREF="hl7.html">Index HL7</A><br>
<A HREF="hl7chp1.html">Chapter 1</A><br>
<A HREF="hl7chp3.html">Chapter 3</A><br>
<A HREF="hl7chp4.html">Chapter 4</A><br>
<A HREF="hl7chp5.html">Chapter 5</A><br>
<A HREF="hl7chp6.html">Chapter 6</A><br>
<A HREF="hl7chp7.html">Chapter 7</A><br>
<A HREF="hl7chp8.html">Chapter 8</A><br>

<hr>

<p>

<H1>
2</H1>
<UL>
<LI><A HREF="#Heading1">2 </A>
<UL>
<LI><A HREF="#Heading2">2.1  INTRODUCTION </A>
<LI><A HREF="#Heading3">2.2  CONCEPTUAL APPROACH </A>
<UL>
<LI><A HREF="#Heading4">2.2.1  Trigger events </A>
<LI><A HREF="#Heading5">2.2.2  Acknowledgements:  original mode </A>
<LI><A HREF="#Heading6">2.2.3  Acknowledgements: enhanced mode </A>
<LI><A HREF="#Heading7">2.2.4  Queries </A>
</UL>
<LI><A HREF="#Heading8">2.3  COMMUNICATIONS ENVIRONMENT </A>
<LI><A HREF="#Heading9">2.4  HL7 MESSAGES </A>
<UL>
<LI><A HREF="#Heading10">2.4.1  Message definition </A>
<LI><A HREF="#Heading11">2.4.2  Segments </A>
<LI><A HREF="#Heading12">2.4.3  Fields </A>
<LI><A HREF="#Heading13">2.4.4  Message delimiters</A>
<LI><A HREF="#Heading14">2.4.5 Data types</A>
<UL>
<LI><A HREF="#Heading15">2.4.5.1 ST  string data</A>
<LI><A HREF="#Heading16">2.4.5.2 TX  text data  </A>
<LI><A HREF="#Heading17">2.4.5.3 FT  formatted text data  </A>
<LI><A HREF="#Heading18">2.4.5.4 NM  numeric  </A>
<LI><A HREF="#Heading19">2.4.5.5 DT  date  </A>
<LI><A HREF="#Heading20">2.4.5.6 TM  time  </A>
<LI><A HREF="#Heading21">2.4.5.7 TS  time stamp  </A>
<LI><A HREF="#Heading22">2.4.5.8 PN  person name  </A>
<LI><A HREF="#Heading23">2.4.5.9 TN  telephone number</A>
<LI><A HREF="#Heading24">2.4.5.10 AD  address  </A>
<LI><A HREF="#Heading25">2.4.5.11 ID  coded value  </A>
<LI><A HREF="#Heading26">2.4.5.12 SI  sequence ID  </A>
<LI><A HREF="#Heading27">2.4.5.13 CM  composite  </A>
<LI><A HREF="#Heading28">2.4.5.14 CK  composite ID with check digit </A>
<LI><A HREF="#Heading29">2.4.5.15 CN  composite ID number and name  </A>
<LI><A HREF="#Heading30">2.4.5.16 CQ  composite quantity with units </A>
<LI><A HREF="#Heading31">2.4.5.17 CE  coded element  </A>
<LI><A HREF="#Heading32">2.4.5.18 CF  coded element with formatted values</A>
<LI><A HREF="#Heading33">2.4.5.19 RP reference pointer</A>
<LI><A HREF="#Heading34">2.4.5.20 TQ  timing quantity</A>
<LI><A HREF="#Heading35">2.4.5.21 MO  money  </A>
</UL>
<LI><A HREF="#Heading36">2.4.6  Use of escape sequences in text fields </A>
<UL>
<LI><A HREF="#Heading37">2.4.6.1 Formatting codes</A>
<LI><A HREF="#Heading38">2.4.6.2 Highlighting  </A>
<LI><A HREF="#Heading39">2.4.6.3 Special character  </A>
<LI><A HREF="#Heading40">2.4.6.4 Hexadecimal  </A>
<LI><A HREF="#Heading41">2.4.6.5 Formatted text</A>
<LI><A HREF="#Heading42">2.4.6.6 Local</A>
</UL>
<LI><A HREF="#Heading43">2.4.7  Message construction rules </A>
<LI><A HREF="#Heading44">2.4.8  Chapter formats for defining HL7 messages </A>
<UL>
<LI><A HREF="#Heading45">2.4.8.1 HL7 abstract message syntax example</A>
</UL>
</UL>
<LI><A HREF="#Heading46">2.5 APPLICATION (LEVEL 7) PROCESSING RULES</A>
<UL>
<LI><A HREF="#Heading47">2.5.1  Original and enhanced processing rules </A>
<UL>
<LI><A HREF="#Heading48">2.5.1.1 Initiation</A>
<LI><A HREF="#Heading49">2.5.1.2 Response</A>
<UL>
<LI><A HREF="#Heading50">2.5.1.2.1 When the original acknowledgement rules apply </A>
<LI><A HREF="#Heading51">2.5.1.2.2 When enhanced acknowledgement rules apply </A>
</UL>
</UL>
<LI><A HREF="#Heading52">2.5.2 Application (level 7) processing rules, deferred processing two phase reply (original acknowledgement mode only)</A>
<UL>
<LI><A HREF="#Heading53">2.5.2.1 Initiation</A>
<LI><A HREF="#Heading54">2.5.2.2 Response</A>
</UL>
</UL>
<LI><A HREF="#Heading55">2.6  ACKNOWLEDGEMENT MESSAGES </A>
<UL>
<LI><A HREF="#Heading56">2.6.1  ACK: general acknowledgement </A>
<LI><A HREF="#Heading57">2.6.2  MCF: Delayed acknowledgement </A>
</UL>
<LI><A HREF="#Heading58">2.7  DISPLAY MESSAGES </A>
<UL>
<LI><A HREF="#Heading59">2.7.1  Display vs. record-oriented messages   </A>
<LI><A HREF="#Heading60">2.7.2  Unsolicited display update message (trigger event Q05)  </A>
<LI><A HREF="#Heading61">2.7.3  Continuation of unsolicited display update message </A>
</UL>
<LI><A HREF="#Heading62">2.8  QUERIES </A>
<UL>
<LI><A HREF="#Heading63">2.8.1  Display vs. record-oriented queries </A>
<LI><A HREF="#Heading64">2.8.2  Message definition </A>
<LI><A HREF="#Heading65">2.8.3 Immediate vs. deferred response</A>
<LI><A HREF="#Heading66">2.8.4  Interactive continuation of display messages </A>
<LI><A HREF="#Heading67">2.8.5  Logical display break points </A>
<LI><A HREF="#Heading68">2.8.6  Query trigger events and message definitions </A>
<UL>
<LI><A HREF="#Heading69">2.8.6.1 A query is made for immediate response (Trigger Event Q01)</A>
<UL>
<LI><A HREF="#Heading70">2.8.6.1.1 Display query variants</A>
</UL>
<LI><A HREF="#Heading71">2.8.6.2 Deferred access</A>
<UL>
<LI><A HREF="#Heading72">2.8.6.2.1 A query is sent for deferred response (trigger event Q02)</A>
<LI><A HREF="#Heading73">2.8.6.2.2 Deferred response to a query (trigger event Q03)</A>
</UL>
</UL>
<LI><A HREF="#Heading74">2.8.7  Query message implementation considerations </A>
</UL>
<LI><A HREF="#Heading75">2.9 SPECIAL HL7 PROTOCOLS</A>
<UL>
<LI><A HREF="#Heading76">2.9.1 Sequence number protocol </A>
<LI><A HREF="#Heading77">2.9.2  Continuation messages and segments </A>
<LI><A HREF="#Heading78">2.9.3  HL7 batch protocol </A>
<UL>
<LI><A HREF="#Heading79">2.9.3.1 HL7 batch file structure </A>
<LI><A HREF="#Heading80">2.9.3.2 Related segments and data usage</A>
<LI><A HREF="#Heading81">2.9.3.3 Acknowledging batches</A>
<LI><A HREF="#Heading82">2.9.3.4 Batch message as a query response</A>
</UL>
</UL>
<LI><A HREF="#Heading83">2.10 MESSAGE CONTROL SEGMENTS</A>
<UL>
<LI><A HREF="#Heading84">2.10.1  MSH - message header segment -</A>
<UL>
<LI><A HREF="#Heading85">2.10.1.1 Field separator (ST) 00001 </A>
<LI><A HREF="#Heading86">2.10.1.2 Encoding characters (ST) 00002 </A>
<LI><A HREF="#Heading87">2.10.1.3 Sending application (ST) 00003 </A>
<LI><A HREF="#Heading88">2.10.1.4 Sending facility (ST) 00004 </A>
<LI><A HREF="#Heading89">2.10.1.5 Receiving application (ST) 00005 </A>
<LI><A HREF="#Heading90">2.10.1.6 Receiving facility (ST) 00006 </A>
<LI><A HREF="#Heading91">2.10.1.7 Date/time of message (TS) 00007 </A>
<LI><A HREF="#Heading92">2.10.1.8 Security (ST) 00008 </A>
<LI><A HREF="#Heading93">2.10.1.9 Message type (CM) 00009 </A>
<LI><A HREF="#Heading94">2.10.1.10 Message control ID (ST) 00010 </A>
<LI><A HREF="#Heading95">2.10.1.11 Processing ID (ID) 00011 </A>
<LI><A HREF="#Heading96">2.10.1.12 Version ID (ID) 00012 </A>
<LI><A HREF="#Heading97">2.10.1.13 Sequence number (NM) 00013 </A>
<LI><A HREF="#Heading98">2.10.1.14 Continuation pointer (ST) 00014 </A>
<LI><A HREF="#Heading99">2.10.1.15 Accept acknowledgement type (ID) 00015 </A>
<LI><A HREF="#Heading100">2.10.1.16 pplication acknowledgement type (ID) 00016 </A>
<LI><A HREF="#Heading101">2.10.1.17 Country code (ID) 00017</A>
</UL>
<LI><A HREF="#Heading102">2.10.2  MSA - message acknowledgement segment -</A>
<UL>
<LI><A HREF="#Heading103">2.10.2.1 Acknowledgement code (ID) 00018 </A>
<LI><A HREF="#Heading104">2.10.2.2 Message control ID (ST) 00010 </A>
<LI><A HREF="#Heading105">2.10.2.3 Text message (ST) 00020 </A>
<LI><A HREF="#Heading106">2.10.2.4 Expected sequence number (NM) 00021 </A>
<LI><A HREF="#Heading107">2.10.2.5 Delayed acknowledgement type (ID) 00022 </A>
<LI><A HREF="#Heading108">2.10.2.6 Error condition (CE) 00023</A>
</UL>
<LI><A HREF="#Heading109">2.10.3  ERR - error segment  -</A>
<UL>
<LI><A HREF="#Heading110">2.10.3.1 Error code and location (CM) 00024</A>
</UL>
<LI><A HREF="#Heading111">2.10.4  QRD - query definition segment </A>
<UL>
<LI><A HREF="#Heading112">2.10.4.1 Query date/time (TS) 00025 </A>
<LI><A HREF="#Heading113">2.10.4.2 Query format code (ID) 00026 </A>
<LI><A HREF="#Heading114">2.10.4.3 Query priority (ID) 00027 </A>
<LI><A HREF="#Heading115">2.10.4.4 Query ID (ST) 00028 </A>
<LI><A HREF="#Heading116">2.10.4.5 Deferred response type (ID) 00029 </A>
<LI><A HREF="#Heading117">2.10.4.6 Deferred response date/time (TS) 00030 </A>
<LI><A HREF="#Heading118">2.10.4.7 Quantity limited request (CQ) 00031 </A>
<LI><A HREF="#Heading119">2.10.4.8 Who subject filter (ST) 00032 </A>
<LI><A HREF="#Heading120">2.10.4.9 What subject filter (ID) 00033 </A>
<LI><A HREF="#Heading121">2.10.4.10 What department data code (ST) 00034 </A>
<LI><A HREF="#Heading122">2.10.4.11 What data code value qual (CM) 00035 </A>
<LI><A HREF="#Heading123">2.10.4.12 Query results level (ID) 00036 </A>
</UL>
<LI><A HREF="#Heading124">2.10.5  QRF - query filter segment </A>
<UL>
<LI><A HREF="#Heading125">2.10.5.1 Where subject filter (ST) 00037 </A>
<LI><A HREF="#Heading126">2.10.5.2 When data start date/time (TS) 00038 </A>
<LI><A HREF="#Heading127">2.10.5.3 When data end date/time (TS) 00039 </A>
<LI><A HREF="#Heading128">2.10.5.4 What user qualifier (ST) 00040 </A>
<LI><A HREF="#Heading129">2.10.5.5 Other QRY subject filter (ST) 00041 </A>
<LI><A HREF="#Heading130">2.10.5.6 Which date/time qualifier (ID) 00042 </A>
<LI><A HREF="#Heading131">2.10.5.7 Which date/time status qualifier (ID) 00043 </A>
<LI><A HREF="#Heading132">2.10.5.8 Date/time selection qualifier (ID) 00044 </A>
</UL>
<LI><A HREF="#Heading133">2.10.6  URD - results/update definition segment </A>
<UL>
<LI><A HREF="#Heading134">2.10.6.1 R/U date/time (TS) 00045 </A>
<LI><A HREF="#Heading135">2.10.6.2 Report priority (ID) 00046 </A>
<LI><A HREF="#Heading136">2.10.6.3 R/U who subject definition (ST) 00047 </A>
<LI><A HREF="#Heading137">2.10.6.4 R/U what subject definition (ID) 00048 </A>
<LI><A HREF="#Heading138">2.10.6.5 R/U what department code (ST) 00049 </A>
<LI><A HREF="#Heading139">2.10.6.6 R/U display/print locations (ST) 00050 </A>
<LI><A HREF="#Heading140">2.10.6.7 R/U results level (ID) 00051 </A>
</UL>
<LI><A HREF="#Heading141">2.10.7  URS - unsolicited selection segment </A>
<UL>
<LI><A HREF="#Heading142">2.10.7.1 R/U where subject definition (ST) 00052 </A>
<LI><A HREF="#Heading143">2.10.7.2 R/U when data start date/time (TS) 00053 </A>
<LI><A HREF="#Heading144">2.10.7.3 R/U when data end date/time (TS) 00054 </A>
<LI><A HREF="#Heading145">2.10.7.4 R/U what user qualifier (ST) 00055 </A>
<LI><A HREF="#Heading146">2.10.7.5 R/U other results subject definition (ST) 00056 </A>
<LI><A HREF="#Heading147">2.10.7.6 R/U Which date/time qualifier (ID) 00057 </A>
<LI><A HREF="#Heading148">2.10.7.7 R/U Which date/time status qualifier (ID) 00058 </A>
<LI><A HREF="#Heading149">2.10.7.8 R/U Date/time selection qualifier (ID) 00059 </A>
</UL>
<LI><A HREF="#Heading150">2.10.8  DSC - Continuation pointer segment </A>
<UL>
<LI><A HREF="#Heading151">2.10.8.1 Continuation pointer (ST) 00060</A>
</UL>
<LI><A HREF="#Heading152">2.10.9  DSP - display data segment </A>
<UL>
<LI><A HREF="#Heading153">2.10.9.1 Set ID - display data (SI) 00061</A>
<LI><A HREF="#Heading154">2.10.9.2 Display level (SI) 00062</A>
<LI><A HREF="#Heading155">2.10.9.3 Data line (TX) 00063</A>
<LI><A HREF="#Heading156">2.10.9.4 Logical break point (ST) 00064</A>
<LI><A HREF="#Heading157">2.10.9.5 Result ID (TX) 00065</A>
</UL>
<LI><A HREF="#Heading158">2.10.10  ADD - addendum segment  -</A>
<UL>
<LI><A HREF="#Heading159">2.10.10.1 Addendum continuation pointer (ST) 00066  </A>
</UL>
<LI><A HREF="#Heading160">2.10.11  FHS - file header segment -</A>
<UL>
<LI><A HREF="#Heading161">2.10.11.1 File field separator (ST) 00067</A>
<LI><A HREF="#Heading162">2.10.11.2 File encoding characters (ST) 00068 </A>
<LI><A HREF="#Heading163">2.10.11.3 File sending application (ST) 00069 </A>
<LI><A HREF="#Heading164">2.10.11.4 File sending facility (ST) 00070 </A>
<LI><A HREF="#Heading165">2.10.11.5 File receiving application (ST) 00071 </A>
<LI><A HREF="#Heading166">2.10.11.6 File receiving facility (ST) 00072 </A>
<LI><A HREF="#Heading167">2.10.11.7 File creation date/time (TS) 00073 </A>
<LI><A HREF="#Heading168">2.10.11.8 File security (ST) 00074 </A>
<LI><A HREF="#Heading169">2.10.11.9 File name/ID  (ST) 00075 </A>
<LI><A HREF="#Heading170">2.10.11.10 File header comment (ST) 00076 </A>
<LI><A HREF="#Heading171">2.10.11.11  File control ID (ST) 00077 </A>
<LI><A HREF="#Heading172">2.10.11.12  Reference file control ID (ST) 00078 </A>
</UL>
<LI><A HREF="#Heading173">2.10.12 FTS - file trailer segment-</A>
<UL>
<LI><A HREF="#Heading174">2.10.12.1 File batch count (NM) 00079 </A>
<LI><A HREF="#Heading175">2.10.12.2 File trailer comment (ST) 00080 </A>
</UL>
<LI><A HREF="#Heading176">2.10.13  BHS - batch header  -</A>
<UL>
<LI><A HREF="#Heading177">2.10.13.1 Batch field separator (ST) 00081</A>
<LI><A HREF="#Heading178">2.10.13.2 Batch encoding characters (ST) 00082</A>
<LI><A HREF="#Heading179">2.10.13.3 Batch sending application (ST) 00083</A>
<LI><A HREF="#Heading180">2.10.13.4 Batch sending facility (ST) 00084</A>
<LI><A HREF="#Heading181">2.10.13.5 Batch receiving application (ST) 00085</A>
<LI><A HREF="#Heading182">2.10.13.6 Batch receiving facility (ST) 00086</A>
<LI><A HREF="#Heading183">2.10.13.7 Batch creation date/time (TS) 00087</A>
<LI><A HREF="#Heading184">2.10.13.8 Batch security (ST) 00088</A>
<LI><A HREF="#Heading185">2.10.13.9 Batch name/ID/type (ST) 00089</A>
<LI><A HREF="#Heading186">2.10.13.10 Batch comment (ST) 00090</A>
<LI><A HREF="#Heading187">2.10.13.11 Batch control ID (ST) 00091</A>
<LI><A HREF="#Heading188">2.10.13.12 Reference batch control ID (ST) 00092</A>
</UL>
<LI><A HREF="#Heading189">2.10.14  BTS - batch trailer segment -</A>
<UL>
<LI><A HREF="#Heading190">2.10.14.1 Batch message count (ST) 00093</A>
<LI><A HREF="#Heading191">2.10.14.2 Batch comment (ST) 00094</A>
<LI><A HREF="#Heading192">2.10.14.3 Batch totals (CM) 00095</A>
</UL>
<LI><A HREF="#Heading193">2.10.15  NTE - notes and comments segment -</A>
<UL>
<LI><A HREF="#Heading194">2.10.15.1 Set ID - notes and comments (SI) 00096 </A>
<LI><A HREF="#Heading195">2.10.15.2 Source of comment (ID) 00097 </A>
<LI><A HREF="#Heading196">2.10.15.3 Comment (FT) 00098</A>
</UL>
<LI><A HREF="#Heading197">2.10.16  Miscellaneous HL7 tables used across all chapters.</A>
<UL>
<LI><A HREF="#Heading198">2.10.16.1 Yes/No indicator table</A>
</UL>
</UL>
<LI><A HREF="#Heading199">2.11  SAMPLE CONTROL AND QUERY MESSAGES </A>
<UL>
<LI><A HREF="#Heading200">2.11.1   General Acknowledgement </A>
<LI><A HREF="#Heading201">2.11.2  Error return </A>
<LI><A HREF="#Heading202">2.11.3  Sequence number:  initial message </A>
<LI><A HREF="#Heading203">2.11.4  Query with display-oriented response </A>
<LI><A HREF="#Heading204">2.11.5 Master file update examples: with original and enhanced acknowledgement protocol</A>
<UL>
<LI><A HREF="#Heading205">2.11.5.1 Original mode example:</A>
<LI><A HREF="#Heading206">2.11.5.2 Enhanced mode example</A>
<UL>
<LI><A HREF="#Heading207">2.11.5.2.1 Initial Message with accept acknowledgement</A>
<LI><A HREF="#Heading208">2.11.5.2.2 Application acknowledgement message</A>
</UL>
<LI><A HREF="#Heading209">2.11.5.3 Delayed application acknowledgement</A>
<UL>
<LI><A HREF="#Heading210">2.11.5.3.1 Initial message with accept acknowledgement</A>
<LI><A HREF="#Heading211">2.11.5.3.2 Delayed application acknowledgement</A>
</UL>
</UL>
</UL>
<LI><A HREF="#Heading212">2.12 OUTSTANDING ISSUES</A>
</UL>
</UL>
<hr size=4>
<p><br>
</p>

<h1>
<A NAME="Heading1">2 </A></h1>

<p><b>Control/Query</b></p>
<h2>
</h2>

<h2>
<A NAME="Heading2">2.1  INTRODUCTION </A></h2>

<p><br>
The Control/Query chapter of this Standard defines the generic rules that apply
to all messages.  Subsequent sections define functionally specific messages to
be exchanged among certain applications.  The specific aspects of message
definition that are addressed herein are:<br>
	a)	the form to be used in functional chapters for describing messages.  This
includes their purpose, their contents, and the interrelationships among them.
This form is called an <b>abstract message</b> <b>definition</b> because it is
purely a level 7 (application) definition.<br>
	b) 	the HL7 encoding rules for converting an abstract message into a string of
characters that comprise an actual message<br>
	c)	the programming procedures required to exchange messages using the HL7
specifications<br>
	d)	the anticipated relationship with lower level protocols<br>
	e)	certain message segments that are components of all messages<br>
	f)	a single message, the Acknowledgement message, that may be used unchanged
in multiple applications</p>
<h2>
</h2>

<h2>
<A NAME="Heading3">2.2  CONCEPTUAL APPROACH </A></h2>

<p></p>
<h3>
</h3>

<h3>
<A NAME="Heading4">2.2.1  Trigger events </A></h3>

<p><br>
	The Standard is written from the assumption that an event in the real world of
healthcare creates the need for data to flow among systems.  The real-world
event is called the <b>trigger event</b>.  For example, the trigger event <b>a
patient is admitted</b> may cause the need for data about that patient to be
sent to a number of other systems.  The trigger event, <b>an item is used from
floor stock on behalf of a patient</b>, may cause the need for information
about the patient and the item used to be sent from the patient care system to
the patient accounting system and materials management system.  When the
transfer of information is initiated by the application system that deals with
the triggering event, the transaction is termed an <b>unsolicited update</b>.
<br>
</p>
<TABLE BORDER><TR align="left">
<TD colspan=1 align="left"><p><b>Note:</b>
No assumption is made about the design or architecture of the application
system creating the unsolicited update. The scope of HL7 is restricted to the
specification of messages between application systems, and the events
triggering them.
</p>
<BR></TD></TR></TABLE><p><br>
	HL7 allows the use of trigger events at several different levels of data
granularity and inter-relationship.  For example, most ADT trigger events
concern single objects (such as an admit event, which creates a message that
contains data about a single person and/or account).  Other ADT trigger events
are concerned with relationships between more than one object (e.g., the merge
events, which specify patient or account merges).  Some ADT trigger events
pertain to a collection of objects that may have no significant
interrelationships (e.g., a record-oriented location-based query, whose
response contains data about a collection of inpatients who are related only
temporarily by local geography). </p>
<h3>
</h3>

<h3>
<A NAME="Heading5">2.2.2  Acknowledgements:  original mode </A></h3>

<p><br>
	When the unsolicited update is sent from one system to another, this
acknowledgement mode specifies that it be acknowledged at the application
level.  The reasoning is that it is not sufficient to know that the underlying
communications system guaranteed delivery of the message.  It is also necessary
to know that the receiving application processed the data successfully at a
logical application level.   <br>
	The acknowledgement may contain data of interest to the system that initiated
the exchange.  For example, if a patient care system has processed the trigger
event <b>a lab test is ordered for a patient</b>, it may send an unsolicited
update to a lab application identifying the patient, the test ordered, and
various other information about the order.  The ancillary will acknowledge the
order when it has processed it successfully.  For some pairings of patient care
and ancillary department systems the acknowledgement may also include the
ancillary identification number that was assigned.  (HL7 does not require Order
Entry and   Results Reporting applications to interface in this manner, but it
supports those that do.)<br>
	The HL7 Standard makes no assumptions about the ownership of data.  It also
makes no requirements of its own on the subsequent action of the recipient of
data, nor does it make any assumption about the design or architecture of the
receiving application system.  The scope of HL7 is restricted to the
specification of messages between application systems, and the events
triggering them.  HL7 does not explicitly support, but can be used with,
systems that support store and forward and data broadcast facilities (see the
HL7 Implementation Guide).<br>
	The HL7 Standard makes no functional interpretation of the requirement that a
system commit the data in a message to its database before acknowledging it.
All that is required is that the receiving system accept responsibility for the
data, providing the same integrity test that it would apply to data from any
source.  To continue the prior example, the ancillary system may acknowledge
the order after placing it in an input queue, expecting to fully process the
order into its database at a future time.  The only assumption is that the
input queue is maintained at the same level of integrity as the database.</p>
<h3>
</h3>

<h3>
<A NAME="Heading6">2.2.3  Acknowledgements: enhanced mode </A></h3>

<p><br>
	The HL7 acknowledgement paradigm has been extended to distinguish both accept
and application acknowledgements, as well the conditions under which each is
required.  With a positive accept acknowledgement, the receiving system commits
the message to safe storage in a manner that releases the sending system from
the need to resend the message.  After the message has been processed by the
receiving system, an application acknowledgement may be used to return the
resultant status to the sending system.</p>
<h3>
</h3>

<h3>
<A NAME="Heading7">2.2.4  Queries </A></h3>

<p><br>
	A different data exchange occurs when one system sends a query to another.
For example, in a cardiac catheterization application, there may be a trigger
event <b>a procedure is scheduled</b> for a patient who is not already
registered in the cardiac catheterization application's database.  The
application may send a request message containing the patient's ID number to
the ADT system and receive a response containing the necessary data to permit
processing of the order.  This requesting transaction is a <b>query</b>, as
distinguished from the unsolicited update discussed above.  The information
that flows between the systems is contained in the response.  The response
itself is not acknowledged with a third message.<br>
	In all cases, the HL7 Standard consists of a simple exchange of messages
between a pair of applications: the unsolicited update and its acknowledgement
or the query and its response.  The underlying operational model is that of a
<b>client</b> and a <b>server</b>.  An application interfaces with another
application using an event code that identifies the transaction.  The other
application responds with a message that includes data or an error indication.
The initiating application may receive a reject status from the other
application or from lower level software indicating that its message was not
received correctly.</p>
<h2>
</h2>

<h2>
<A NAME="Heading8">2.3  COMMUNICATIONS ENVIRONMENT </A></h2>

<p><br>
The HL7 Standard defines the messages as they are exchanged among applications
entities and the procedures used to exchange them.  As such, it conceptually
operates at the seventh level of the ISO model for Open System Interconnection
(OSI).  It is primarily concerned with the data content and interrelationship
of messages and with communicating certain application level error conditions.
<br>
Since the OSI protocols are not universally implemented, the HL7 Working Group
is interested in providing standards that will be useful in the interim.  It is
also recognized that there is now, and will continue to be, interest in
communicating health data among systems operating in communications
environments that provide a high level of functionality, but use protocols
other than ISO OSI .  The universe of environments of interest to HL7 include,
but is not restricted to:<br>
	a)	ad hoc environments that do not provide even basic transport reliability.
Such environments consist of point-to-point RS-232 links, modems, and even
LANs, if their connection to host computers is made via RS-232 communications
links.  Until OSI high level standards become truly prevalent, many healthcare
interfaces will be implemented over such links.  In such an environment, the
HL7 Lower Level Protocols (LLP) may be used between systems to enhance the
capabilities of the communications environment.  The HL7 Lower Level Protocols
are defined in HL7 Implementation Guide, which is not an official part of the
standard.<br>
	b)	environments that support a robust transport level, but do not meet the
high level requirements.  This includes environments such as TCP/IP, DECNET,
and SNA.<br>
	c)	ISO and proprietary networks that implement up to presentation and other
high level services.  IBM's SNA LU6.2 and  SUN Microsystems's NFS are examples
of complete proprietary networks.<br>
	d)	two or more applications running on the same physical and/or logical
machine that are not tightly integrated.  In these environments, the messaging
capabilities may be provided by inter-process communications services (e.g.,
Pipes in a UNIX System).<br>
The HL7 standard assumes the communications environment will provide the
following capabilities:<br>
	a)	error free transmission.  Applications can assume that they correctly
received all of the transmitted bytes in the correct order that they were sent.
This implies that error checking is done at a lower level.  However, sending
applications may not assume that the message was actually received without
receiving an acknowledgement message.<br>
	b)	character conversion.  If the two machines exchanging data use different
character sets, the communications environment will convert the data from one
set to the other.<br>
	c)	message length.  HL7 sets no limits on the maximum size of HL7 messages.
The Standard assumes that the communications environment can transport messages
of any length that might be necessary.  In practice, sites may agree to place
some upper bound on the size of messages and may use the message continuation
protocol, described later in this chapter, for messages that exceed the upper
limit.<br>
	
</p>
<TABLE><TR align="left">
<TD colspan=1 align="left"><p><b>Note:</b>
	Just as HL7 makes no assumptions about the design or architecture of the
application systems sending and receiving HL7 messages, it makes no assumptions
about the communications environment beyond those listed above.  In particular,
aside from the above assumptions, the communications environment, including its
architecture, design and implementation, is outside the scope of HL7.
</p>
<BR></TD></TR></TABLE><p></p>
<h2>
</h2>

<h2>
<A NAME="Heading9">2.4  HL7 MESSAGES </A></h2>

<p><br>
This section defines the components of messages and provides the methodology
for defining abstract messages that is used in later chapters.</p>
<h3>
</h3>

<h3>
<A NAME="Heading10">2.4.1  Message definition </A></h3>

<p><br>
	A <b>message</b> is the atomic unit of data transferred between systems.  It
is comprised of a group of segments in a defined sequence.  Each message has a
<b>message type</b> that defines its purpose.  For example the ADT Message type
is used to transmit portions of a patient's ADT data from one system to
another.  A three character code contained within each message identifies its
type.  These are listed in the Message Type list, Appendix A.<br>
	The real-world event that initiates an exchange of messages is called a
trigger event. (See section 2.2.1 for a more detailed description of trigger
events.)  Appendix A contains the codes that represent all defined trigger
events.   These codes represent values such as <b>A Patient is Admitted</b> or
<b>An order event occurred</b>.  There is a one-to-many relationship between
message types and trigger event codes.  The same trigger event code may not be
associated with more than one message type; however a message type may be
associated with more than one trigger event.<br>
 <br>
	All message type and trigger event codes beginning with Z are reserved for
locally defined messages.  No such codes will be defined within the HL7
Standard.</p>
<h3>
</h3>

<h3>
<A NAME="Heading11">2.4.2  Segments </A></h3>

<p><br>
	A <b>segment</b> is a logical grouping of <b>data fields</b>.  Segments of a
message may be required or optional.  They may occur only once in a message or
they may be allowed to repeat.  Each segment is given a name.  For example, the
ADT message may contain the following segments: Message Header (MSH), Event
Type (EVN), Patient ID (PID), and Patient Visit (PV1).<br>
	Each segment is identified by a unique three character code known as the
Segment ID.  Although the actual segments are defined in various chapters the
ID codes assigned to all segments are listed in Appendix A.<br>
	All segment ID codes beginning with Z are reserved for locally defined
messages.  No such codes will be defined within the HL7 Standard.</p>
<h3>
</h3>

<h3>
<A NAME="Heading12">2.4.3  Fields </A></h3>

<p><br>
	A field is a string of characters.  HL7 does not care how systems actually
store data within an application.  When fields are transmitted, they are sent
as character strings.  Except where noted, HL7 data fields may take on the null
value.  Sending the null value, which is transmitted as two double quote marks
(""), is different from omitting an optional data field.  The difference
appears when the contents of a message will be used to update a record in a
database rather than create a new one.  If no value is sent, (i.e., it is
omitted) the old value should remain unchanged.  If the null value is sent, the
old value should be changed to null.<br>
	The various chapters of the Standard contain segment definition tables.  These
tables list and describe the data fields in the segment and characteristics of
their usage.  A comprehensive data dictionary of all HL7 fields is provided in
Appendix A.  In defining a segment, the following information is specified
about each field: <br>
<b>	1)	position:</b>  Ordinal position of the data field within the segment.
This number is used to refer to the data field in the text comments that follow
the segment definition table.<br>
<b>	2)	name:</b>  Globally unique descriptive name for the field.<br>
<b>	3)	ID number:</b>  Small integer that uniquely identifies the data field
throughout the Standard.  The ID number is not significant under the HL7
message encoding rules but is included as a convenience for those who would
apply the HL7 Standard using other message encoding rules. <br>
<b>	4)	maximum length:</b>  Maximum number of characters that one occurrence of
the data field may occupy.  The maximum length is not of conceptual importance
in the abstract message or the HL7 coding rules.  It is included because it
helps readers understand the purpose of the field and it may have pragmatic
importance in specific implementations.  It is calculated to include the
component and subcomponent separators that are defined below.  Because the
maximum length is that of a single occurrence, the repetition separator is not
included in calculating the maximum length. (See Section 2.4.3.6)<br>
<b>	5)	optionality:</b> Whether the data field is required, optional, or
conditional in a segment.  The designations are:<br>
		R	-	required<br>
		O	-	optional<br>
		C	-	conditional on the trigger event<br>
<b>	6)	repetition:</b>  Whether the field may repeat.  The designations are:
<br>
		N	-	no repetition<br>
		Y	-	the field may repeat an indefinite or site determined number of times<br>
		(integer) -	the field may repeat up to the number of times specified in the
integer<br>
	Each occurence may contain the number of characters specified by the field's
maximum length.  (See Section 2.4.3.4)<br>
<b>	7)	table:</b>  HL7 defines a table of values for this field.  An entry in
the table number column means that the table name and the element name are
equivalent. <br>
	The manner in which HL7 defines the valid values for tables will vary.
Certain fields, like Patient Location, will have values that vary from
institution to institution.  Such tables are designated user or site-defined.
Even though these tables are not defined in the standard, they are given an HL7
table number to facilitate implementations. The ID data type is often used to
encode values for these tables. Note that some of these tables (e.g., location)
may reference common master files.<br>
	Others, like Event Type (table 0003), are a part of the HL7 Standard because
they affect the interpretation of the messages that contain them.    They are
limited to the values established by the HL7 Standard. The ID data type is most
often used to encode values for HL7 tables. When an HL7 table exists it is
strongly recommended that it be used.  The values are listed in Appendix A.
These HL7 tables also appear in the text in a standard box format (e.g., the
Event Type table in section 3.3.1.1).  Additions may be included on a
site-specific basis.&#160;<br>
	Still other tables contain values that are encoded by reference to other
standards documents.  For example, the encoding for Lab procedures is defined
by ASTM 1238-88. The CE data type is used to encode values for these tables.<br>
	Finally, there are some user-defined tables that  contain values that might be
standardized across institutions but for which no applicable official standard
exists.  For these a set of <b>suggested</b> values may be listed in Appendix
A.  These suggested values appear in the text in a standard non-box format
(e.g., the Event Reason Code --table 0062 in section 3.3.1.4). It is expected
that these values will be used where applicable within an institution and serve
as a basis for extensions as required.  The appropriate functional committee
within HL7 solicits suggestions for additional values from institutions that
are applying the Standard.<br>
	 Various HL7 data types (ID, CE, CF, CK, CM, CN, CQ, and RP) are used to
convey tabular values, or have a component containing tabular values). <br>
<b>	8)	data type:</b>  Restrictions on the contents of the data field.  There
are a number of data types defined by HL7.  These will be explained in Section
2.4.5-data types.</p>
<h3>
</h3>

<h3>
<A NAME="Heading13">2.4.4  Message delimiters</A></h3>

<p><br>
	In constructing a message certain special characters are used.  They are the
segment terminator, the field separator, the component separator, subcomponent
separator, repetition separator, and escape character.  The segment terminator
is always a carriage return (in ASCII, a hex 0D).  The other delimiters are
defined in the MSH record, with the field delimiter in the 4th character
position, and the other delimiters occurring as in the field called Encoding
Characters, which is the first field after the segment ID.  The delimiter
values used in the MSH segment are the delimiter values used throughout the
entire message.  In the absence of other considerations, HL7 recommends the
suggested values found in  <i>figure 2-1</i>.  <br>
	At any given site, the subset of the possible delimiters may be limited by
negotiations between applications.  This implies that the receiving
applications will use the agreed upon delimiters, as they appear in the Message
Header segment (MSH), to parse the message. <br>
	Figure 2-1  Delimiter Values<br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><br>
Delimiter
</p>
<BR></TD>
<TD colspan=1 align="center"><p><br>
Suggested<br>
Value
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Encoding<br>
Character<br>
Position
</p>
<BR></TD>
<TD colspan=1 align="center"><p><br>
Usage
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Segment<br>
Terminator
</p>
<BR></TD>
<TD colspan=1 align="center"><p>&lt;cr&gt;
<br>
hex 0D
</p>
<BR></TD>
<TD colspan=1 align="center"><p>-</p>
<BR></TD>
<TD colspan=1 align="center"><p>Terminates
a segment record. This value cannot be changed by implementors.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Field<br>
Separator
</p>
<BR></TD>
<TD colspan=1 align="center"><p>|</p>
<BR></TD>
<TD colspan=1 align="center"><p>-</p>
<BR></TD>
<TD colspan=1 align="center"><p>Separates
two adjacent data fields within a segment.  It also separates the segment ID
from the first data field in each segment.  
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Component<br>
Separator
</p>
<BR></TD>
<TD colspan=1 align="center"><p>^</p>
<BR></TD>
<TD colspan=1 align="center"><p>1</p>
<BR></TD>
<TD colspan=1 align="center"><p>Separates
adjacent components of data fields where allowed.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Sub-<br>
Component<br>
Separator
</p>
<BR></TD>
<TD colspan=1 align="center"><p>&amp;</p>
<BR></TD>
<TD colspan=1 align="center"><p>4</p>
<BR></TD>
<TD colspan=1 align="center"><p>Separates
adjacent subcomponents of data fields where allowed.  If there are no
subcomponents, this character may be omitted.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Repetition<br>
Separator
</p>
<BR></TD>
<TD colspan=1 align="center"><p>~</p>
<BR></TD>
<TD colspan=1 align="center"><p>2</p>
<BR></TD>
<TD colspan=1 align="center"><p>Separates
multiple occurrences of a field where allowed.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Escape<br>
Character
</p>
<BR></TD>
<TD colspan=1 align="center"><p>\</p>
<BR></TD>
<TD colspan=1 align="center"><p>3</p>
<BR></TD>
<TD colspan=1 align="center"><p>Escape
character for TX and FT fields.  If no escape characters are used in a message,
this character may be omitted. However, it must be present if subcomponents are
used in the message.
</p>
<BR></TD></TR></TABLE><p></p>
<h3>
</h3>

<h3>
<A NAME="Heading14">2.4.5 Data types</A></h3>

<p></p>

<h4>
<A NAME="Heading15">2.4.5.1 ST  string data</A></h4>

<p><br>
	String data is left justified with trailing blanks optional.  Any displayable
(printable) ACSII characters (hexadecimal values between 20 and 7E, inclusive).
Example:<br>
<tt>|almost any data at all|</tt><br>
	To include any HL7 delimiter character (except the segment terminator) within
a string data field, use the appropriate HL7 escape sequence (see section
2.4.6.1).</p>

<h4>
<A NAME="Heading16">2.4.5.2 TX  text data  </A></h4>

<p><br>
	String data meant for user display (on a terminal or printer).  Such data
would not necessarily be left justified since leading spaces may contribute
greatly to the clarity of the presentation to the user.  Because this type of
data is intended for display, it may contain certain escape character sequences
designed to control the display.  Escape sequence formatting is defined later
in this chapter in Section 2.4.6.  Leading spaces should be included.  Trailing
spaces should be removed.  Example:<br>
<tt>|  leading spaces are allowed.|</tt><br>
	Since TX data is intended for display purposes, the repeat delimiter, when
used with a TX data field, implies a series of repeating lines to be displayed
on a printer or terminal.  Therefore, the repeat delimiters are regarded as
paragraph terminators or hard carriage returns (e.g., they would display as
though a CR/LF were inserted in the text).<br>
	A receiving system would word-wrap the text between repeat delimiters in order
to fit it into an arbitrarily sized display window but start any line beginning
with a repeat delimiter on a new line.</p>

<h4>
<A NAME="Heading17">2.4.5.3 FT  formatted text data  </A></h4>

<p><br>
	This data type is derived from the  string data type by allowing the addition
of  embedded formatting instructions.  These instructions are limited to those
that are intrinsic and independent of the circumstances under which the field
is being used.  The actual instructions and their representation are described
later in this chapter.  The differences from a string data field and an FT
field is of arbitrary length (up to 65k) and may contain formatting commands
enclosed in escape characters.  Example:<br>
<tt>|\.sp\(skip one vertical line)|</tt><br>
	For additional examples of formatting commands see Section 2.4.6-use of escape
sequences in text fields, below.</p>

<h4>
<A NAME="Heading18">2.4.5.4 NM  numeric  </A></h4>

<p><br>
	A number represented as a series of ASCII numeric characters consisting of an
optional leading sign (+ or -), the digits and an optional decimal point.  In
the absence of a sign, the number is assumed to be positive.  If there is no
decimal point the number is assumed to be an integer.  Examples:<br>
<tt>|999|</tt><br>
<tt>|-123.792|</tt><br>
	Leading zeros, or trailing zeros after a decimal point, are not significant.
The two values 01.20 and 1.2 are identical.  Except for the optional leading
sign (+ or -) and the optional decimal point (.), no non-numeric ASCII
characters are allowed.  Thus, the value &lt;12 should be encoded as a string
data type.</p>

<h4>
<A NAME="Heading19">2.4.5.5 DT  date  </A></h4>

<p><br>
	Always in the format YYYYMMDD.  Example:<br>
<tt>|19880704|</tt></p>

<h4>
<A NAME="Heading20">2.4.5.6 TM  time  </A></h4>

<p><br>
	Always in the format HHMM[SS[.SSSS]][+/-ZZZZ] using a 24 hour clock notation.
The seconds designation (SS) is optional.  If not present it will be
interpreted as 00.  The fractional seconds designation is likewise optional.
If not present it will be interpreted as .0000.  The fractional seconds could
be sent by a transmitter who requires greater precision than whole seconds.
Fractional representations of minutes, hours or other higher orders units of
time are not permitted.  The time zone of the sender may be sent optionally as
an offset from the coordinated universal time (previously known as Greenwich
Mean Time.)   Where the time zone is not present in a particular TM field but
is included as part of the date/time field in the MSH segment, the MSH value
will be used as the default time zone.  Otherwise, the time is understood to
refer to the local time of the sender.  Midnight is represented as 0000.
Examples:<br>
<tt>|235959+1130|	1 second before midnight in a time zone eleven and half hours
ahead of Universal Coordinated Time (i.e., east of Greenwich).</tt><br>
<tt>|0800|			Eight AM, local time of the sender.</tt><br>
<tt>|093544.2312|	44.2312 seconds after Nine thirty-five AM, local time of
sender.</tt> </p>

<h4>
<A NAME="Heading21">2.4.5.7 TS  time stamp  </A></h4>

<p><br>
	Contains the exact time of an event, including the date and time.  Time stamp
fields are always in the format:<br>
	YYYYMMDD[HHMM[SS[.SSSS]]][+/-ZZZZ]^&lt;degree of precision&gt;  <br>
	The date portion of a time stamp follows the rules of a date field and the
time portion follows the rules of a time field.  When used as a birthdate, the
HHMM portion is optional.  If not present the HHMM portion will default to
0000, i.e., midnight of the day just beginning.  The specific data
representations used in the HL7 encoding rules are compatible with ISO
8824-1987(E).  An optional second component indicates the degree of precision
of the date (Y = year, L = month, D = day, H = hour, M = minute, S = second).
(Maximum length of field is 26). Examples:<br>
<tt>|17760704010159-0600|	1:01:59 on July 4, 1776 in the Eastern Standard Time
zone.</tt><br>
<tt>|17760704010159-0500|	1:01:59 on July 4, 1776 in the Eastern Daylight
Saving Time zone.</tt><br>
<tt>|198807050000|			Midnight of the night extending from July 4 to July 5,
1988 in the local time zone of the sender. </tt><br>
<tt>|198807050000^D|		Same as prior example, but precision extends only to the
day.  Could be used for a birthdate.</tt><br>
	The HL7 Standard strongly recommends that all systems routinely send the time
zone offset but does not require it.  All HL7 systems are required to accept
the time zone offset, but its  implementation is application specific.  For
many applications the time of interest is the local time of the sender.  For
example, an application in the Eastern Standard Time zone receiving
notification of an admission that takes place at 11:00 PM in San Francisco on
December 11 would prefer to treat the admission as having occurred on December
11 rather than advancing the date to December 12.<br>
	One exception to this rule would be a clinical system that processed patient
data collected in a clinic and a nearby hospital that happens to be in a
different time zone.  Such applications may choose to convert the data to a
common representation.  Similar concerns apply to the transitions to and from
daylight saving time.  HL7 supports such requirements by requiring that the
time zone information be present when the information is sent.  It does not,
however, specify which of the treatments discussed here will be applied by the
receiving system. </p>

<h4>
<A NAME="Heading22">2.4.5.8 PN  person name  </A></h4>

<p><br>
<tt>&lt;family name&gt; ^ &lt;given name&gt; ^ &lt;middle initial or name&gt; ^
&lt;suffix (e.g., JR or III)&gt; ^ &lt;prefix (e.g., DR)&gt; ^ &lt;degree
(e.g., MD)&gt;</tt><br>
	A name includes multiple free text components as listed above.  The maximum
length of a PN field is 48 characters including component separators.  The
sending system may send upper- and lowercase or all uppercase.  The receiving
system may convert to all uppercase if required.  Example:<br>
<tt>|SMITH^JOHN^J^III^DR^PHD|</tt>	</p>

<h4>
<A NAME="Heading23">2.4.5.9 TN  telephone number</A></h4>

<p><br>
	For use in the United States and conforming countries, the telephone number is
always in the form:<br>
<tt>	</tt><br>
<tt>[NN] [(999)]999-9999[X99999][B99999][C any text]</tt><br>
	The optional first two digits are the country code.  The optional <b>X</b>
portion gives an extension.  The optional <b>B</b> portion gives a beeper code.
The optional <b>C</b> portion may be used for comments like, <b>After 6:00</b>.
While no explicit limit is placed on the text field, receiving systems may be
expected to truncate values that are more than 10 characters long.  To
accommodate the variability of institutional phone systems, the length of the
extension and beeper numbers may be extended by local agreement.  Examples: <br>
<tt>|(415)925-0121X305|</tt><br>
<tt>|234-4532CWEEKENDS|</tt></p>

<h4>
<A NAME="Heading24">2.4.5.10 AD  address  </A></h4>

<p><br>
<tt>&lt;street address&gt; ^ &lt; other designation&gt; ^ &lt;city&gt; ^
&lt;state or province&gt; ^ &lt;zip or postal code&gt; ^ &lt;country&gt; ^
&lt;type&gt; ^ &lt;other geographic designation&gt;</tt><br>
	All components are ST data type.  The street or mailing address of a person or
institution.  For use within North America:<br>
		a)  state or province should be represented by the official US Postal service
two-letter codes  			b)  zip takes the form 99999[-9999], Canadian postal code
is 6 alpha-numeric characters<br>
		c)  the country code is assumed to be USA if null<br>
		d)  other geographic designation includes county, bioregion, SMSA, etc.<br>
	Type is optional and defined by <i>table 0190 - address type</i>.<br>
	Example:<br>
<tt>|10 ASH LN^#3^LIMA^OH^48132^""^|</tt><br>
	Table 0190  Address type<br>
</p>
<TABLE BORDER><TR align="left">
<TD colspan=1 align="left"><p><b><u></u></b><u>Value</u></p>
<BR></TD>
<TD colspan=1 align="left"><p><u>Description</u></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>C<br>
P<br>
M<br>
B<br>
O<br>
H
</p>
<BR></TD>
<TD colspan=1 align="center"><p>current
or temporary<br>
permanent<br>
mailing<br>
business<br>
office<br>
home
</p>
<BR></TD></TR></TABLE><p></p>

<h4>
<A NAME="Heading25">2.4.5.11 ID  coded value  </A></h4>

<p><br>
	The value of such a field follows the formatting rules for an ST field except
that it is drawn from a table of legal values.  Examples of ID fields include
religion and sex.  </p>

<h4>
<A NAME="Heading26">2.4.5.12 SI  sequence ID  </A></h4>

<p><br>
	A positive integer in the form of an NM field.  The uses of this field are
defined in the chapters defining the segments and messages in which it appears.</p>

<h4>
<A NAME="Heading27">2.4.5.13 CM  composite  </A></h4>

<p><br>
	A field that is a combination of other meaningful data fields.  Each portion
is called a <b>component</b>.  The specific components of CM fields are defined
within the field descriptions.  Certain other composites have been separately
identified and are described below.  The use of this data type will be slowly
phased out and new unique data types will be created.<br>
	Wherever a component of an HL7 field is itself an HL7 data type which contains
components, its delimiters are demoted by one.  Thus a component designated as
a CE data type should be encoded as &lt;identifier &amp; text &amp; name of
coding system&gt; (see section 2.4.5.17, below).  Note that since HL7
delimiters are not recursive, an HL7 data type containing components cannot be
a sub-component.  When this level of detail is needed, each component of the
HL7 data type can be encoded as a separate subcomponent. For an example of
this, see the encoding of the filler order number in the order sequencing
component of the Timing/Quantity data type, (figure 4-7, section 4.4.10.1,
below).</p>

<h4>
<A NAME="Heading28">2.4.5.14 CK  composite ID with check digit </A></h4>

<p><br>
<tt>&lt;ID number (NM)&gt; ^ &lt;check digit (NM)&gt; ^ &lt;code identifying
the check digit scheme employed (ID)&gt; ^ &lt;assigning facility ID
(ST)&gt;</tt><br>
	This data type is used for certain fields that commonly contain check digits,
e.g., <i>PID-3-Patient ID (Internal ID)</i>.  If a site is not using
check-digits for a particular CK field, the second and third components are not
valued.<br>
	The check digit in this data type is <u>not</u> an add-on produced by the
message processor.  It is the check digit that is part of the identifying
number used in the sending application.  If the sending application does not
include a self-generated check digit in the indentifying number, this component
should be valued null.<br>
	The assigning facility ID is a unique name (up to six characters in length) of
the system that stores the data.  It is an ST data type.  It is equivalent to
the application ID of the placer or filler order number (see Chapter 4).
Assigning facility ID's are unique across a given HL7 implementation.  <br>
	The check digit scheme codes are defined in <i>table 0061 - check digit
scheme</i>.<br>
	Table 0061  Check digit scheme<br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>M10<br>
M11
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Mod
10 algorithm<br>
Mod 11 algorithm
</p>
<BR></TD></TR></TABLE><p><br>
	Example:  <br>
<tt>|128952^6^M11^ADT01|</tt><br>
	The algorithm for calculating a Mod10 check digit is as follows:<br>
	Assume you have an identifier = 12345.  Take the odd digit positions, counting
from the right, i.e.,  531, multiply this number by 2 to get 1062.  Take the
even digit positions, starting from the right (i.e., 42),  prepend these to the
1062 to get 421062.  Add all of these six digits together to get 15.  Subtract
this number from the next highest multiple of 10, i.e., 20 - 15 to get 5.  The
Mod10 check digit is 5.  The Mod10 check digit for 401 is 0; for 9999, it's 4;
for 99999999, it's 7.<br>
	The algorithm for calculating a Mod11 check digit is as follows:<br>
<b>	Terms</b><br>
	d = 	digit of number starting from units digit, followed by 10's position,
followed by 100's position, etc.<br>
	w = 	weight of digit position starting with the units position, followed by
10's position, followed by 100's position etc.  Values for w = 2, 3, 4, 5, 6,
7, 2, 3, 4, 5, 6, 7, etc. (repeats for each group of 6 digits)<br>
	c =	check digit<br>
<b>	Calculation</b><br>
	(Step 1) 	m = 	sum of (d * w) for positions 1, 2, etc. starting with units
digit<br>
		for d = digit value starting with units position to highest order<br>
		for w = weight value from 2 to 7 for every six positions starting with units
digit<br>
	(Step 2)	c1 = m mod 11<br>
	(Step 3)	if c1 = 0 then reset c1 = 1<br>
	(Step 4)	c = (11 - c1) mod 10<br>
	Example: <br>
<tt>if the number is 1234567, then the mod 11 check digit = 6</tt><br>
	The calculations are:<br>
<tt>M  = (7*2)+(6*3)+(5*4)+(4*5)+(3*6)+(2*7)+(1*2)</tt><br>
<tt>   = 14 + 18 + 20 + 20 + 18 + 14 + 2	</tt><br>
<tt>   = 106</tt><br>
<tt>c1 = 106 mod 11</tt><br>
<tt>   = 7</tt><br>
<tt>c  = (11-c1) mod 10</tt><br>
<tt>   =  4 mod 10</tt><br>
<tt>   =  4</tt><br>
	Other variants of these check digit algorithms exist and may be used by local
bilateral site agreement.</p>

<h4>
<A NAME="Heading29">2.4.5.15 CN  composite ID number and name  </A></h4>

<p><br>
<tt>&lt;ID Number&gt; ^ &lt;family name&gt; ^ &lt;given name&gt; ^ &lt;middle
initial or name&gt; ^ &lt;suffix (e.g., JR or III)&gt; ^ &lt;prefix (e.g.,
DR)&gt; ^ &lt;degree (e.g., MD)&gt; ^ &lt;source table&gt;</tt><br>
	All components are ST data type.  A field identifying a person both as a coded
value and with a text name.  The first component is the coded ID according to a
site-specific table.  The second through the seventh  components are the
person's name as a PN field.  The eighth component specifies the source table
used for the first component.  For specific fields, individual sites may elect
to omit the ID or the name.  Example:  <br>
<tt>|12372^RIGGINS^JOHN^""^""^""^MD^ADT1|</tt><br>
<tt>|12372|</tt><br>
<tt>|^RIGGINS^JOHN^""^""^""^MD|</tt></p>

<h4>
<A NAME="Heading30">2.4.5.16 CQ  composite quantity with units </A></h4>

<p><br>
<tt>&lt;quantity&gt; ^ &lt;units&gt;</tt><br>
	The first component is a quantity and the second is the units in which the
quantity is expressed.  Field by field, default units may be defined within the
specifications.  When the observation is measured in the default units, the
units need not be transmitted.  If the measure is recorded in units different
from the default, the measurement units must be transmitted as the second
component.  If the units are ISO+ units, then units should be recorded as
lowercase abbreviations as specified in Chapter 7.  If the units are ANSI or
local, the units and the source table must be recorded as specified in Chapter
7.  But in these cases the component separator should be replaced by the
subcomponent delimiter.  Examples:<br>
<tt>|123.7^kg|		kilograms is an ISO unit</tt><br>
<tt>|150^lb&amp;&amp;ANS+|	weight in pounds is a customary US unit defined
within ANSI+.</tt><br>
	In future versions, CQ fields will be used sparingly because the same data can
usually be sent as two separate fields, one with the value and one with the
units as a CE data type.  </p>

<h4>
<A NAME="Heading31">2.4.5.17 CE  coded element  </A></h4>

<p><br>
	This data type transmits codes and the text associated with the code.  This
type has six components arranged in two groups as follows:<br>
<tt>&lt;identifier&gt; ^ &lt;text&gt; ^ &lt;name of coding system&gt; ^
&lt;alternate identifier&gt; ^ &lt;alternate text&gt; ^ &lt;name of alternate
coding system&gt;</tt><br>
	To allow all six components of a CE data type to be valued, the minimum length
of this data type is 60.<br>
	These are defined as follows:<br>
<b>	1	identifier:</b>  Sequence of characters (the code) that uniquely
identifies the item being referenced by the &lt;text&gt;.  Different coding
schemes will have different elements here.<br>
<b>	2	text:</b>  Name or description of the item in question.  E.g., myocardial
infarction or x-ray impression.  Its data type is string (ST).<br>
<b>	3	name of coding system:</b>  Each coding system will be assigned a unique
identifier.  This component will serve to identify the coding scheme being used
in the identifier component.   The combination of the <b>identifier</b> and
<b>name of coding system</b> components will be a unique code for a data item.
For backward compatibility, if this component is absent, it will be taken to
mean the CPT-4 with ASTM extensions, i.e., AS4.  Other coding systems that
might appear here are ICD-9, ICD-10, SNOMED, etc.  Each system will be given a
unique identifying string.  The current ASTM 1238-88
diagnostic/procedure/observation/drug ID/health outcomes coding systems are
identified in the tables below.  Others may be added as needed.<br>
<b>	4	alternate components:</b>  these three components are defined analogously
to the above for the alternate or local coding system.  If the Alternate Text
component is absent, and the Alternate Identifier is present, the Alternate
Text will be taken to be the same as the Text component.  If the Alternate
Coding System component is absent, it will be taken to mean the locally defined
system. <br>
</p>
<TABLE BORDER><TR align="left">
<TD colspan=1 align="left"><p><b>Note:</b>
	The presence of two sets of equivalent codes in this data type is semantically
different from a repetition of a CE-type field.  With repetition, several
distinct codes (with distinct meanings) may be transmitted.
</p>
<BR></TD></TR></TABLE><p><br>
	Example:<br>
<tt>|54.21^Laparoscopy^I9^42112^^AS4|</tt><br>
	Figures 2-2 and 2-3 list many diagnostic, procedure, observation, drug, and
health outcomes coding systems.  Guidelines for their use are presented in
Section 7.1.<br>
	Figure 2-2  Diagnostic coding schemes<br>
	(from ASTM 1238-94 Table 3)<br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p>Name</p>
<BR></TD>
<TD colspan=1 align="center"><p>Code</p>
<BR></TD>
<TD colspan=1 align="center"><p>Source</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>American
College of Radiology finding codes
</p>
<BR></TD>
<TD colspan=1 align="left"><p>ACR
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Index
for Radiological Diagnosis Revised, 3rd Edition 1986, American College of
Radiology, Reston, VA.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>CEN
ECG diagnostic codes 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>CE
</p>
<BR></TD>
<TD colspan=1 align="left"><p>CEN
PT007. A quite comprehensive set of ECG diagnostic codes (abbreviations) and
descriptions published as a pre-standard by CEN TC251. Available from CEN TC251
secretariat, c/o Georges DeMoor, State University Hospital Gent, De Pintelaan
185-5K3, 9000 Gent, Belgium or Jos Willems, University of Gathuisberg, 49
Herestraat, 3000 Leuven, Belgium. 
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>CLIP</p>
<BR></TD>
<TD colspan=1 align="left"><p>CLP</p>
<BR></TD>
<TD colspan=1 align="left"><p>Simon
Leeming, Beth Israel Hospital, Boston MA.  Codes for radiology reports.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>EUCLIDES
</p>
<BR></TD>
<TD colspan=1 align="left"><p>E
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Available
from Euclides Foundation International nv, Excelsiorlaan 4A, B-1930 Zaventem,
Belgium; Phone: 32 2 720 90 60.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Home
Health Care<br>
ICD9 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>HHC<br>
I9 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Home
Health Care Classification System; Virginia Saba, EdD, RN; Geogetown University
School of Nursing; Washington, DC.<br>
World Health Publications, Albany, NY.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>ICD9-CM
</p>
<BR></TD>
<TD colspan=1 align="left"><p>I9C
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Commission
on Professional and Hospital Activities, 1968 Green Rd., Ann Arbor, MI 48105.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>ICD-10
</p>
<BR></TD>
<TD colspan=1 align="left"><p>I10
</p>
<BR></TD>
<TD colspan=1 align="left"><p>World
Health Publications, Albany, NY.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Local
general code 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>99zzz
or L 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Locally
defined codes for purpose of sender or receiver.  Local codes can be identified
by L (for backward compatibility) or 99zzz (where z is an alphanumeric
character).
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Local
billing code 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>LB
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Local
billing codes/names (with extensions if needed).
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Omaha<br>
NANDA<br>
Read Classification 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>OHA<br>
NDA<br>
RC 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Omaha
Visiting Nurse Association, Omaha, NB.<br>
North American Nursing Diagnosis Association, Philadelphia, PA.<br>
The Read Clinical Classification of Medicine, Park View Surgery, 26 Leicester
Rd., Loughborough LE11 2AG (includes drug procedure and other codes, as well as
diagnostic codes).
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Systemized
Nomenclature of Medicine (SNOMED) 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>SNM</p>
<BR></TD>
<TD colspan=1 align="left"><p>Systemized
Nomenclature of Medicine, 2nd Edition 1984 Vols 1, 2, American College of
Pathology, Skokie, IL.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>SNOMED
International 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>SNM3
</p>
<BR></TD>
<TD colspan=1 align="left"><p>SNOMED
International, 1993 Vols 1-4, American College of Pathology, Skokie, IL.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Unified
Medical Language
</p>
<BR></TD>
<TD colspan=1 align="left"><p>UML</p>
<BR></TD>
<TD colspan=1 align="left"><p>National
Library of Medicine, 8600 Rockville Pike, Bethesda, MD 20894.
</p>
<BR></TD></TR></TABLE><p><br>
	Figure 2-3  Procedure/observation/drug ID/health outcomes coding systems<br>
	(From ASTM 1238-88 Table 5)<br>
</p>
<TABLE BORDER><TR align="center">
<TH colspan=1 align="center"><p>Coding
System
</p>
<BR></TH>
<TH colspan=1 align="center"><p>Code</p>
<BR></TH>
<TH colspan=1 align="center"><p>Source/Description</p>
<BR></TH></TR><TR align="left">
<TD colspan=1 align="left"><p>ASTM
E1238/ E1467 Universal
</p>
<BR></TD>
<TD colspan=1 align="left"><p>AS4
</p>
<BR></TD>
<TD colspan=1 align="left"><p>American
Society for Testing &amp; Materials and CPT4 (see Appendix X1 of Specification
E1238 and Appendix X2 of Specification E1467).
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>CPT-4</p>
<BR></TD>
<TD colspan=1 align="left"><p>C4</p>
<BR></TD>
<TD colspan=1 align="left"><p>American
Medical Association, P.O. Box 10946, Chicago IL  60610.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>CPT-5
 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>C5
</p>
<BR></TD>
<TD colspan=1 align="left"><p>(under
development - same contact as above)
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>EUCLIDES
</p>
<BR></TD>
<TD colspan=1 align="left"><p>E
</p>
<BR></TD>
<TD colspan=1 align="left"><p>AFP
codes.  Available from Euclides Foundation International nv, Excelsiorlaan 4A,
B-1930 Zaventem, Belgium; Phone: 32 2 720 90 60.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>FDA
K10 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>FDK
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Dept.
of Health &amp; Human Services, Food &amp; Drug Administration, Rockville, MD
20857. (device &amp; analyte process codes).
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Health
Outcomes 	 	
</p>
<BR></TD>
<TD colspan=1 align="left"><p>HI</p>
<BR></TD>
<TD colspan=1 align="left"><p>Health
Outcomes Institute codes for outcome variables available (with responses) from
Health Outcomes Institute, 2001 Killebrew Drive, Suite 122, Bloomington, MN
55425; (612) 858 9188.  See examples in Appendix A.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>HIBCC
</p>
<BR></TD>
<TD colspan=1 align="left"><p>HB
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Health
Industry Business Communications Council, 5110 N. 40th St., Ste 120, Phoenix,
AZ 85018.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Home
Health Care<br>
ICCS 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>HHC<br>
ICS 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Home
Health Care Classification System; Virginia Saba, EdD, RN; Geogetown University
School of Nursing; Washington, DC.<br>
Commission on Professional and Hospital Activities, 1968 Green Road, Ann Arbor,
MI 48105.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>ICD-9CM
</p>
<BR></TD>
<TD colspan=1 align="left"><p>I9C
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Commission
on Professional and Hospital Activities, 1968 Green Road, Ann Arbor, MI 48105
(includes all procedures and diagnostic tests).
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>ICHPPC-2</p>
<BR></TD>
<TD colspan=1 align="left"><p>IC2</p>
<BR></TD>
<TD colspan=1 align="left"><p>International
Classification of Health Problems in Primary Care, Classification Committee of
World Organization of National Colleges, Academies and Academic Associations of
General Practitioners (WONCA), 3rd edition.  An adaptation of ICD9 intended for
use in General Medicine, Oxford University Press.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>ISBT
</p>
<BR></TD>
<TD colspan=1 align="left"><p>IBT</p>
<BR></TD>
<TD colspan=1 align="left"><p>International
Society of Blood Transfusion.  Blood Group Terminology 1990.  VOX Sanquines
1990 58(2):152-169. 
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>IUPAC/IFCC
</p>
<BR></TD>
<TD colspan=1 align="left"><p>IUC</p>
<BR></TD>
<TD colspan=1 align="left"><p>Recommendations
of Quantities and Units in Clinical Chemistry DRAFT (to be published in 1992).
Henrik Olesen, M.D., D.M.Sc., Chairperson,  Department of Clinical Chemistry,
KK76.4.2, Rigshospitalet, University Hospital of Copenhagen, DK-2200, Copenhagen.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Japanese
Chemistry 	 	
</p>
<BR></TD>
<TD colspan=1 align="left"><p>JC8</p>
<BR></TD>
<TD colspan=1 align="left"><p>Clinical
examination classification code.  Japan Association of Clinical Pathology.
Version 8, 1990.  A multiaxial code  including a subject code (e.g., Rubella =
5f395, identification code (e.g., virus ab IGG), a specimen code (e.g., serum
=023) and a method code (e.g., ELISA = 022)
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Local
</p>
<BR></TD>
<TD colspan=1 align="left"><p>99zzz
or L 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Locally
defined codes for purpose of sender or receiver.  If multiple local codes
exist, the format should be 99zzz, where z is an alphanumeric character.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Medicare
</p>
<BR></TD>
<TD colspan=1 align="left"><p>MCR
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Medicare
billing codes/names.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Medicaid
</p>
<BR></TD>
<TD colspan=1 align="left"><p>MCD
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Medicaid
billing codes/names.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Nursing
Interventions<br>
Classification<br>
Omaha System<br>
UCDS 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>NIC<br>
OHA<br>
UC 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Iowa
Intervention Project, College of Nursing, University of Iowa, Iowa City,
Iowa.<br>
Omaha Visiting Nurse Association, Omaha, NB.<br>
Uniform Clinical Data Systems. Ms. Michael McMullan, Office of Peer Review
Health Care Finance Administration, The Meadows East Bldg., 6325 Security
Blvd., Baltimore, MD 21207; (301) 966 6851.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Universal
Product Code
</p>
<BR></TD>
<TD colspan=1 align="left"><p>UPC</p>
<BR></TD>
<TD colspan=1 align="left"><p>The
Uniform Code Council.  8163 Old Yankee Road, Suite J, Dayton, OH  45458; (513)
435 3070
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Euclides
Lab method codes 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>E6
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Available
from Euclides Foundation International nv, Excelsiorlaan 4A, B-1930 Zaventem,
Belgium; Phone: 32 2 720 90 60.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Euclides
Lab equipment codes 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>E7
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Available
from Euclides Foundation International nv (see above)
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Euclides
 quantity codes 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>E5
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Available
from Euclides Foundation International nv (see above)
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Drug
codes:
</p>
<BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Chemical
abstract codes 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>CAS
</p>
<BR></TD>
<TD colspan=1 align="left"><p>These
include unique codes for each unique chemical, including all generic drugs.
The codes do not distinguish among different dosing forms.  When multiple
equivalent CAS numbers exist, use the first one listed in USAN. USAN 1990 and
the USP dictionary of drug names, William M. Heller, Ph.D., Executive Editor,
United States Pharmacopeial Convention, Inc., 12601 Twinbrook Parkway,
Rockville, MD 20852.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>National
drug codes 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>NDC
</p>
<BR></TD>
<TD colspan=1 align="left"><p>These
provide unique codes for each distinct drug, dosing form, manufacturer, and
packaging. (Available from the National Drug Code Directory, FDA, Rockville,
MD, and other sources.)
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>WHO
rec# drug codes 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>W1,
W2 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>World
Health organization record number code. A unique sequential number is assigned
to each unique single component drug and to each multi-component drug.  Eight
digits are allotted to each such code, six to identify the active agent, and 2
to identify the salt, of single content drugs.  Six digits are assigned to each
unique combination of drugs in a dispensing unit.  The six digit code is
identified by W1, the 8 digit code by W2.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>WHO
rec# code with ASTM extension 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>W4
</p>
<BR></TD>
<TD colspan=1 align="left"><p>With
ASTM extensions (see appendix X1), the WHO codes can be used to report serum
(and other) levels, patient compliance with drug usage instructions, average
daily doses and more (see Appendix X1). <br>
WHO ATC code WC WHO's ATC codes provide a hierarchial classification of drugs
by therapeutic class.  They are linked to the record number codes listed above.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>WHO
ATC
</p>
<BR></TD>
<TD colspan=1 align="left"><p>WC</p>
<BR></TD>
<TD colspan=1 align="left"><p>WHO's
ATC codes provide a hierarchical classification of drugs by therapeutic class.
They are linked to the record number codes listed above.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><b>Note:</b>
The Read and NLM (National Library of Medicine) codes in Table 3 also include
drugs.  A number of sources of unique drug names exist: British Approved Names
(BAN), French-approved nonproprietary names (DCF), and International
Nonproprietary name (INN).  These sources are now being reviewed.  Those that
also provide unique codes will be added to the registry of coding systems,
using the abbreviations given in parentheses.
</p>
<BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>Device
Code
</p>
<BR></TD>
<TD colspan=1 align="left"><BR></TD>
<TD colspan=1 align="left"><BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p>MDNS
</p>
<BR></TD>
<TD colspan=1 align="left"><p>UMD
</p>
<BR></TD>
<TD colspan=1 align="left"><p>Universal
Medical Device Nomenclature System.  ECRI, 5200 Butler Pike, Plymouth Meeting,
PA  19462 USA.  Phone: 215-825-6000, Fax: 215-834-1275.
</p>
<BR></TD></TR></TABLE><p></p>

<h4>
<A NAME="Heading32">2.4.5.18 CF  coded element with formatted values</A></h4>

<p><br>
	This data type transmits codes and the formatted text associated with the
code.  This data type can be used to transmit for the first time the formatted
text for the <b>canned text</b> portion of a report, for example, a standard
radiologic description for a normal chest x-ray.  The receiving system can
store this information and in subsequent messages only the identifier need be
sent.  Another potential use of this data type is transmitting master file
records that contain formatted text. <br>
	This data type has six components arranged in two groups as follows:<br>
<tt>&lt;identifier&gt; ^ &lt;formatted text&gt; ^ &lt;name of coding
system&gt;^&lt;alternate identifier&gt; ^ &lt;alternate formatted text&gt; ^
&lt;name of alternate coding system&gt;</tt><br>
	The components, primary and alternate are defined exactly as in the CE data
type with the exception of the second and fifth components which are of the
formatted text data type.  Example: <br>
<tt>OBX||CF|71020^CXR^CPMC||79989^</tt><br>
<tt>\H\Description:\N\\.sp\\ti+4\Heart is not enlarged.  There is no evidence
of</tt><br>
<tt>pneumonia, effusion, pneumothorax or any
masses.\.sp+3\\H\Impression:</tt><br>
<tt>\N\\.sp\\.ti+4\Negative chest.^CPMC</tt></p>

<h4>
<A NAME="Heading33">2.4.5.19 RP reference pointer</A></h4>

<p><br>
	This data type transmits information about data stored on another system.  It
contains a reference pointer that uniquely identifies the data on the other
system, the identity of the other system, and the type of data.  This
information is transmitted in three components arranged as follows:<br>
<tt>&lt;pointer&gt; ^ &lt;application ID&gt; ^ &lt;type of data&gt;</tt><br>
<b>.1	pointer:</b>  A unique key assigned by the system that stores the data.
The key, which is an ST data type, is used to identify and access the data.<br>
<b>.2	application ID:</b>  A unique name (up to 6 characters in length) of the
system that stores the data.  It is an ST data type.  It is equivalent to the
application ID of the placer or filler order number (see Chapter 4).
Application ID's must be unique across a given HL7 implementation.<br>
<b>.3	type of data:</b> A code that represents the type of data being stored.
It is an ID data type. <br>
	Table 0191   Type of Data<br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>SI<br>
NS<br>
SD<br>
TX<br>
FT
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Scanned
image<br>
Non-scanned image<br>
Scanned document<br>
Machine readable text document<br>
Formatted text
</p>
<BR></TD></TR></TABLE><p><br>
	Other types may be added as needed.<br>
	Example:<br>
<tt>|1234A321634BC^EFC^SD|</tt></p>

<h4>
<A NAME="Heading34">2.4.5.20 TQ  timing quantity</A></h4>

<p><br>
	Describes when a service should be performed and how frequently.  See Chapter
4 (Section 4.4) for a complete specification.</p>

<h4>
<A NAME="Heading35">2.4.5.21 MO  money  </A></h4>

<p><tt>
</tt><br>
<tt>&lt;quantity&gt; ^ &lt;denomenation&gt;</tt><br>
	The first component is a quantity and the second is the denomination in which
the quantity is expressed.  The values for the denomination component are those
specified in ISO-4217.  If the denomination is not specified, <i>MSH-17-country
code</i> is used to determine the default.<br>
	Example:<br>
<tt>|99.50^USD|</tt><br>
	where USD is the ISO 4217 code for the U.S. American dollar.</p>
<h3>
</h3>

<h3>
<A NAME="Heading36">2.4.6  Use of escape sequences in text fields </A></h3>

<p></p>

<h4>
<A NAME="Heading37">2.4.6.1 Formatting codes</A></h4>

<p><br>
	When a field of type TX, FT, or CF is being encoded, the escape character may
be used to signal certain special characteristics of portions of the text
field.  The escape character is whatever display ASCII character is specified
in the Escape Character component of <i>MSH-2-encoding characters</i>.  For
purposes of this section, the character \ will be used to represent the
character so designated in a message.  An <b>escape sequence</b> consists of
the escape character followed by an escape code ID of one character, 0 or more
data characters, and another occurrence of the escape character.  The following
escape sequences are defined:<br>
		\H\		start highlighting<br>
		\N\		normal text (end highlighting)<br>
		\F\		field separator<br>
		\S\		component separator<br>
		\T\		subcomponent separator<br>
		\R\		repetition separator<br>
		\E\		escape character<br>
		\Xdddd\		hexadecimal data<br>
		\Zdddd\		locally defined escape sequence<br>
	The <b>escape sequences</b> for field separator, component separator,
subcomponent separator, repetition separator, and escape character are also
valid within an ST data field.<br>
	No escape sequence may contain a nested escape sequence. </p>

<h4>
<A NAME="Heading38">2.4.6.2 Highlighting  </A></h4>

<p><br>
	In designating highlighting, the sending application is indicating that the
characters that follow somehow should be made to stand out, but leaving the
method of doing so to the receiving application.  Depending on device
characteristics and application style considerations, the receiving application
may choose reverse video, boldface, underlining, blink, an alternate color or
another means of highlighting the displayed data.  For example the message
fragment:<br>
<tt>DSP|     TOTAL CHOLESTEROL    \H\240*\N\   [90 - 200]</tt><br>
	might cause the following data to appear on a screen or report:<br>
<tt>TOTAL CHOLESTEROL        <b>240*</b>    [90 - 200]</tt><br>
	whereas another system may choose to show the 240* in red.</p>

<h4>
<A NAME="Heading39">2.4.6.3 Special character  </A></h4>

<p><br>
	The special character escape sequences (\F\, \S\, \R\, \T\, and \E\) allow the
corresponding characters to be included in the data in a text field, though the
actual characters are reserved.  For example, the message fragment<br>
<tt>DSP|	TOTAL CHOLESTEROL     180  \F\90 - 200\F\</tt><br>
<tt>DSP|	\S\----------------\S\</tt><br>
	would cause the following information to be displayed, given suitable
assignment of separators:<br>
<tt>TOTAL CHOLESTEROL     180  |90 - 200|</tt><br>
<tt>^----------------^</tt></p>

<h4>
<A NAME="Heading40">2.4.6.4 Hexadecimal  </A></h4>

<p><br>
	When the hexadecimal escape sequence (\Xdddd\) is used the X should be
followed by 1 or more pairs of hexadecimal digits (0, 1,  . . . , 9, A,  . . .
, F).  Consecutive pairs of the hexadecimal digits represent 8-bit binary
values.  The interpretation of the data is entirely left to an agreement
between the sending and receiving applications that is beyond the scope of this
Standard.</p>

<h4>
<A NAME="Heading41">2.4.6.5 Formatted text</A></h4>

<p><br>
	If the field is of the formatted text (FT) data type, formatting commands also
may be surrounded by the escape character.  Each command begins with the .
character.  The following formatting commands are available:<br>
	.sp &lt;number&gt;	End current output line and skip &lt;number&gt; vertical
spaces.  &lt;number&gt; is a positive integer or absent.  If &lt;number&gt; is
absent, skip one space.<br>
	.br		Begin new output line.<br>
	.fi		Begin word wrap or fill mode.  This is the default state.  It can be
changed to a no-wrap mode using the .nf command.<br>
	.nf		Begin no-wrap mode.<br>
	.in &lt;number&gt;	Indent &lt;number&gt; of spaces, where &lt;number&gt; is a
positive or negative integer.<br>
	.ti &lt;number&gt;	Temporarily indent &lt;number&gt; of spaces where number is
a positive or negative integer.<br>
	.ce		End current output line and center the next line.<br>
	The component separator that marks each line defines the extent of the
temporary indent command (.ti), and the beginning of each line in the no-wrap
mode (.nf).  Examples of formatting instructions that are NOT included in this
data type include:  width of display, position on page or screen, and type of
output devices.<br>
	Figure 2-4 is an example of the FT data type from a radiology impression
section of a radiology report:<br>
	Figure 2-4  Formatted text as transmitted<br>
</p>
<TABLE BORDER><TR align="left">
<TD colspan=1 align="left"><p><tt>
|\.in+4\\.ti-4\ 1. The cardio mediastinal silhouette is now within normal
limits.^\.sp\\.ti-4\ 2. Lung fields show minimal ground glass
appearance.^\.sp\\.ti-4\ 3. A loop of colon visible in the left upper quadrant
is distinctly abnormal with the appearance of mucosal effacement suggesting
colitis.\.in-4\|
</tt></p>
<BR></TD></TR></TABLE><p><br>
	Figure 2-5 shows one way of presenting the data in Figure 2-4.  The receiving
system can create many other interpretations by varying the right margin.  <br>
	Figure 2-5  Formatted text in one possible presentation
</p>
<TABLE><TR align="left">
<TD colspan=1 align="left"><p><tt>1.
The cardio mediastinal silhouette is now within normal limits.</tt><br>
<tt>2.	Lung fields show minimal ground glass appearance.</tt><br>
<tt>3.	A loop of colon visible in the left upper quadrant is distinctly
abnormal with the appearance of mucosal effacement suggesting colitis.
</tt></p>
<BR></TD></TR></TABLE><p></p>

<h4>
<A NAME="Heading42">2.4.6.6 Local</A></h4>

<p><br>
	When the local escape sequence (\Zdddd\) is used the Z should be followed by
characters that are valid in a TX field.  The interpretation of the data is
entirely left to an agreement between the sending and receiving applications
that is beyond the scope of this Standard.  </p>
<h3>
</h3>

<h3>
<A NAME="Heading43">2.4.7  Message construction rules </A></h3>

<p><br>
	Step 1	Construct the segments in the order defined for the message.  Each
message is constructed as follows:<br>
		a)	the first three characters are the segment ID code<br>
		b)	each data field in sequence is inserted in the segment in the following
manner:<br>
			1)	a field separator is placed in the segment<br>
			2)	if the value is not present, no further characters are required  <a
name="fnB0" href="#fn0">[1]</a><br>
			3)	if the value is present, but null, the characters "" (two consecutive
double quotation marks) are placed in the field  <sup>1</sup><br>
			4)	otherwise, place the characters of the value in the segment.  As many
characters can be included as the maximum defined for the data field.  It is
not necessary, and is undesirable, to pad fields to fixed lengths.  Padding to
fixed lengths is permitted.<br>
				Encode the individual data fields as shown in the Data Types section
(2.4.5).<br>
			5)	if the field definition calls for a field to be broken into components,
the following rules are used:<br>
				i)	if more than one component is included they are separated by the
component separator<br>
				ii)	components that are present but null are represented by the characters
""<br>
				iii)	components that are not present are treated by including no characters
in the component<br>
				iv)	components that are not present at the end of a field need not be
represented by component separators.  For example, the two data fields are
equivalent:<br>
						|ABC^DEF^^| and |ABC^DEF|.<br>
			6)	if the component definition calls for a component to be broken into
subcomponents, the following rules are used:<br>
	<br>
				i)	if more than one subcomponent is included they are separated by the
subcomponent separator<br>
				ii)	subcomponents that are present but null are represented by the
characters ""<br>
				iii)	subcomponents that are not present are treated by including no
characters in the subcomponent<br>
				iv)	subcomponents that are not present at the end of a component need not
be represented by subcomponent separators.  For example, the two data
components are equivalent:<br>
					^XXX&amp;YYY&amp;&amp;^ and ^XXX&amp;YYY^.<br>
			7)	if the field definition permits repetition of a field, the following
rules are used, the repetition separator is used only if more than one
occurrence is transmitted and is placed between occurrences.  (If three
occurrences are transmitted, two repetition separators are used.)  In the
example below, two occurrences of telephone number are being sent:<br>
<tt>		|234-7120</tt><sup>~</sup><tt>599-1288B1234|</tt><br>
		c)	repeat Step 1b while there are any data elements present to be sent.  If
all the data fields remaining in the segment definition are not present there
is no requirement to include any more delimiters.<br>
		d)	end each segment with an ASCII carriage return character<br>
	Step 2	Repeat Step 1 until all segments have been generated.<br>
	<br>
	The following rules apply to receiving HL7 messages and converting their
contents to data values:<br>
		a)	ignore segments, fields, components, subcomponents, and extra repetitions
of a field that are present but were not expected<br>
		b)	treat segments that were expected but are not present as consisting
entirely of fields that are not present<br>
		c)	treat fields and components that are expected but were not included in a
segment as not present<br>
		d)	in applications that cannot deal with the distinction between data fields
that are not present and those that are null, treat data fields that are not
present as null<br>
		Encoding rules notes:<br>
		If a segment is to be continued across messages, use the extended encoding
rules given below.  These rules are defined in terms of the more general
message continuation protocol (described below in Section 2.9.2-continuation
messages and segments).</p>
<h3>
</h3>

<h3>
<A NAME="Heading44">2.4.8  Chapter formats for defining HL7 messages </A></h3>

<p><br>
	Subsequent chapters of this document describe messages that are exchanged
among applications in functionally specific situations.  Each chapter is
organized as follows:<br>
	a)	purpose.  This is an overview describing the purpose of the chapter,
general information and concepts.<br>
	b)	trigger events and messages.  There is a list of the trigger events.  For
each trigger event the messages that are exchanged when the trigger even occurs
are defined using the <b>HL7 abstract message syntax</b> as follows:<br>
		Each message is defined in special notation that lists the segment IDs in the
order they would appear in the message.  Braces, <b>{ . . . }</b>, indicate one
or more repetitions of the enclosed group of segments.  (Of course, the group
may contain only a single segment.)  Brackets, <b>[  . . . ]</b>, show that the
enclosed group of segments is optional.  If a group of segments is optional and
may repeat it should be enclosed in brackets and braces, <b>{ [ . . . ] }</b>. 
</p>
<TABLE><TR align="left">
<TD colspan=1 align="left"><p><b>Note:</b>
[{...}] and {[...]} are equivalent.
</p>
<BR></TD></TR></TABLE><p><br>
		Whenever braces or brackets enclose more than one segment ID a special
stylistic convention is used to help the reader understand the hierarchy of
repetition.  For example, the first segment ID appears on the same line as the
brace, two columns to the right.  The subsequent segment IDs appear under the
first.  The closing brace appears on a line of its own in the same column as
the opening brace.  This convention is an optional convenience to the user.  If
there is conflict between its use and the braces that appear in a message
schematic, the braces define the actual grouping of segments that is
permitted.<br>
	c)	message segments.  The segments defined in a chapter are then listed in a
functional order designed to maximize conceptual clarity.<br>
	d)	examples.  Complete messages are included.<br>
	e)	implementation considerations.  Special supplementary information is
presented here.  This includes issues that must be addressed in planning an
implementation. <br>
	f)	outstanding issues.  Issues still under consideration or requiring
consideration are listed here.<br>
		Consider the hypothetical triggering event <b>a widget report is
requested</b>.  It might be served by the Widget Request (WRQ) and Widget
Report (WRP) messages.  These would be defined in the Widget chapter (say
Chapter XX).  The Widget Request message might consist of the following
segments: Message Header (MSH), Widget ID (WID).  The Widget Report message
might consist of the following segments: Message Header (MSH),  Message
Acknowledgement (MSA), one or more Widget Description (WDN) Segments each of
which is followed by a single Widget Portion segment (WPN) followed by zero or
more Widget Portion Detail (WPD) segments.  </p>

<h4>
<A NAME="Heading45">2.4.8.1 HL7 abstract message syntax example</A></h4>

<p><br>
	The schematic form for this hypothetical exchange of messages is shown in
Figure 2-6:<br>
	Figure 2-6  Hypothetical schematic message
</p>
<TABLE><TR align="left">
<TD colspan=1 align="left"><p><tt>Trigger
Event: WIDGET REPORT IS REQUESTED</tt><br>
<tt>               <u>WRQ            Widget Request
Chapter</u></tt><br>
<tt>               MSH            Message Header              2</tt><br>
<tt>               WID            Widget ID                   XX</tt><br>
<tt>               <u>WRP            Widget Report
Chapter</u></tt><br>
<tt>               MSH            Message Header              2</tt><br>
<tt>               MSA            Message Acknowledgement     2</tt><br>
<tt>               { WDN          Widget Description          XX</tt><br>
<tt>                 WPN          Widget Portion              XX</tt><br>
<tt>                 { [WPD] }    Widget Portion Detail       XX</tt><br>
<tt>               }
</tt></p>
<BR></TD></TR></TABLE><p><br>
	The WID, WDN, WPN, and WPD segments would be defined by the widget committee
in the widget chapter, as designated by the  arabic numeral XX in the right
column.  The MSH and MSA segments, although included in the widget messages,
are defined in another chapter.  They are incorporated by reference into the
widget chapter by the chapter number XX.<br>
	On the other hand, the widget committee might decide that the WPN and WPD
segments should appear in pairs, but the pairs are optional and can repeat.
Then the schematic for the WRP message would be as shown in Figure 2-7.<br>
	Figure 2-7  WPN and WPD segments in pairs
</p>
<TABLE><TR align="left">
<TD colspan=1 align="left"><p><tt>
              <u>WRP            Widget Report               Chapter</u></tt><br>
<tt>               MSH            Message Header                 2</tt><br>
<tt>               MSA            Message Acknowledgement        XX</tt><br>
<tt>               { WDN          Widget Description             XX</tt><br>
<tt>                 [ { WPN      Widget Portion                 XX</tt><br>
<tt>                     WPD      Widget Portion Detail          XX</tt><br>
<tt>                 } ]</tt><br>
<tt>               }
</tt></p>
<BR></TD></TR></TABLE><p><br>
	If the widget committee determined that at least one pair of WPN and WPD
segments must follow a WDN, then the notation would be as shown in Figure
2-8.<br>
	Figure 2-8  At least one pair of WPN and WPD
</p>
<TABLE><TR align="left">
<TD colspan=1 align="left"><p><tt>
              <u>WRP            Widget Report               Chapter</u></tt><br>
<tt>               MSH            Message Header                 2</tt><br>
<tt>               MSA            Message Acknowledgement        XX</tt><br>
<tt>               { WDN          Widget Description             XX</tt><br>
<tt>                 {  WPN       Widget Portion                 XX</tt><br>
<tt>                    WPD       Widget Portion Detail          XX</tt><br>
<tt>                 }</tt><br>
<tt>               }</tt> 
</p>
<BR></TD></TR></TABLE><p></p>
<h2>
</h2>

<h2>
<A NAME="Heading46">2.5 APPLICATION (LEVEL 7) PROCESSING RULES</A></h2>

<p></p>
<h3>
</h3>

<h3>
<A NAME="Heading47">2.5.1  Original and enhanced processing rules </A></h3>

<p><br>
	The processing rules described here apply to all exchanges of messages,
whether or not the HL7 encoding rules or Lower Layer Protocols are used.  They
represent the primary message processing mode.  Certain variants are documented
elsewhere in the next section.  These include:<br>
	a)	the application processing rules for a special processing mode, deferred
processing.  This mode remains in the specification only for backwards
compatibility.<br>
	b)	an optional sequence number protocol<br>
	c)	an optional protocol for continuing a very long message<br>
	The processing rules have been extended in this version of the standard.  The
extensions provide a greater degree of flexibility in the way that messages can
be acknowledged, as specified by several new fields in the Message Header
segment.  To provide backwards-compatibility with prior versions,  the absence
of these fields implies that the extended processing rules are not used.  In
the remainder of this section the extended mode is called the enhanced
acknowledgement mode; the prior version is called the original acknowledgement
mode. <br>
	Because the protocol describes an exchange of messages, it is described in
terms of two entities, the <b>initiating</b> and <b>responding</b> systems.
Each is both a sender and receiver of messages.  The initiating system sends
first and then receives, while the responding system receives and then
sends.<br>
	In overview this exchange proceeds as follows:<br>
	Step 1	the initiating system constructs an HL7 message from application data
and sends it to the responding system<br>
	Step 2	responder receives message and <br>
		2.1	when the original acknowledgement rules apply:<br>
			a)	validates it syntactically and against the detailed rules described in
Section 2.5.1.1, if it fails, a reject message is constructed by the protocol
software and returned to the initiator<br>
			b)	passes it to the application, which:<br>
				1)	creates a response message, or<br>
				2)	creates an error message, or<br>
				3)	creates a reject message<br>
			c)	sends the response, error, or reject message<br>
			Initiator passes the message to the initiating application.<br>
		2.2	when enhanced acknowledgement rules apply:<br>
			a)	the responding system receives the message and commits it to safe
storage.  This means that the responding system accepts the responsibility for
the message in a manner that releases the sending system from any obligation to
resend the message.  The responding system now checks the message header record
to determine whether or not the initiating system requires an <b>accept
acknowledgement</b> message indicating successful receipt and secure storage of
the message.  If it does, the accept acknowledgement message is constructed and
returned to the initiator.<br>
			b)	at this point, the requirements of the applications involved in the
interface determine whether or not more information needs to be exchanged.
This exchange is referred to as an <b>application acknowledgement</b> and
includes information ranging from simple validation to a complex
application-dependent response.  If the receiving system is expected to return
application-dependent information, it initiates another exchange when this
information is available.  This time, the roles of initiator and responder are
reversed.<br>
	The details follow.</p>

<h4>
<A NAME="Heading48">2.5.1.1 Initiation</A></h4>

<p><br>
	The initiating application creates a message with data values as defined in
the appropriate chapter of this Standard.  <br>
	The data values shown below should be provided in the MSH segment (as defined
under the MSH segment definition of this chapter).  The message is encoded
according to the applicable rules and sent to the lower level protocols, which
will attempt to deliver it to the responding application.<br>
</p>
<TABLE><TR align="center">
<TD colspan=1 align="center"><p><b><u>Field</u></b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b><u>Contents</u></b></p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSH-7-date/time
of message
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>The
date and time the data values are combined into the message.  This field is not
used in the processing logic of the HL7 protocol.  It is optional.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSH-9-message
type
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>A
two-component field.  The first component is a three-letter code identifying
this message (as defined above).  The second component is a three-digit trigger
event code as listed in <i>table 0003 - event type code</i>.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSH-5-receiving
application
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>A
code defined for the communication environment to identify the application to
which the message should be sent.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSH-3-sending
application
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>A
code similar to Receiving Application used to identify the source of the message.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSH-6-receiving
facility
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>A
code defined for the communication environment to identify which instance of
the application should receive the message.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSH-4-sending
facility
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>A
code similar to Receiving  Facility used to identify the source of the message.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSH-10-message
control ID
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>Unique
identifier used to relate the response to the initial message.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSH-11-processing
ID</i> 
</p>
<BR></TD>
<TD colspan=1 align="left"><p>A
code that show whether this transaction is to be used for production, training,
debugging. 
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSH-12-version
ID
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>The
version number of the HL7 spec for which the software was defined.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSH-13-sequence
number
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>Sequence
number: used in implementation of sequence number protocol.  See Section
2.9.1-sequence number protocol.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSH-14-continuation
pointer
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>Used
in implementation of message continuation protocol.  See sections
2.9.2-continuation messages and segments, 2.7.3-continuation of unsolicited
display update message, and 2.8.4-interactive continuation of display messages.  
</p>
<BR></TD></TR></TABLE><p><br>
	Certain other fields in the MSH segment are required for the operation of the
HL7 encoding rules; they will not be relevant if other encoding rules are
employed.<br>
	The event code in the second component of <i>MSH-9-message type</i> is
redundantly shown elsewhere in some messages.  For example, the same
information is in the EVN segment of the ADT message.  This is for
compatibility with prior versions of the HL7 protocol.  Newly defined messages
should only show the event code in <i>MSH-9-message type</i>.</p>

<h4>
<A NAME="Heading49">2.5.1.2 Response</A></h4>

<p><br>
	The protocol software in the responding system does one of the following:</p>

<h5>
<A NAME="Heading50">2.5.1.2.1 When the original acknowledgement rules apply </A></h5>

<p><br>
</p>
<TABLE BORDER><TR align="left">
<TD colspan=1 align="left"><p><b>Note:</b>
Both <i>MSH-15-accept acknowledgement type</i> and <i>MSH-16-application
acknowledgement type</i> are null or not present.
</p>
<BR></TD></TR></TABLE><p><br>
	a)	accepts the message<br>
	b)	validates it against at least the following criteria:<br>
		1)	the value in <i>MSH-9-message type</i> is one that is acceptable to the
receiver<br>
		2)	the value in <i>MSH-12-version ID</i> is acceptable to the receiver<br>
		3)	the value in <i>MSH-11-processing ID</i> is appropriate for the
application process handling the message<br>
		If any of these edits fail, the protocol software rejects the message.  That
is, it creates an ACK message with <b>AR</b> in <i>MSA-1-acknowledgement
code</i>.<br>
	c)	if the message passes the edits, the message is passed to the receiving
application, which performs one of these functions:<br>
		1)	process the message successfully, generating the functional response
message with a value of <b>AA</b> in <i>MSA-1-acknowledgement code</i>. <br>
		- OR -<br>
		2)	send an error response, providing error information in functional segments
to be included in the response message with a value of <b>AE</b> in
<i>MSA-1-acknowledgement code</i>. <br>
		- OR -<br>
		3)	fail to process (reject) the message for reasons unrelated to its content
or format (system down, internal error, etc.).  For most such problems it is
likely that the responding system will be able to accept the same message at a
later time.  The implementors must decide on an application-specific basis
whether the message should be automatically sent again.  The response message
contains a value of <b>AR</b> in <i>MSA-1-acknowledgement code</i>.  <br>
	d)	passes the message to the initiating system<br>
	e)	the protocol software in the initiating system passes the response message
to the initiating application<br>
	In all the responses described above the following values are put in the MSA
segment:<br>
</p>
<TABLE><TR align="center">
<TD colspan=1 align="center"><p><b><u>Field</u></b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b><u>Contents</u></b></p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSA-2-message
control ID
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p><i>MSH-10-message
control ID</i> from MSH segment of incoming message.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSA-1-acknowledgement
code
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>As
described above.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSA-3-text
message
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>Text
description of error.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSA-4-expected
sequence number
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>As
described in Section 2.9.1 - Sequence Number Protocol, (if the sequence number
protocol is being used).
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSA-5-delayed
acknowledgement type
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>For
use only as described in Section 2.5.2-application (level 7) processing rules,
deferred processing two phase reply.
</p>
<BR></TD></TR></TABLE><p><br>
	The MSH segment in the response is constructed anew following the rules used
to create the initial message described above.  In particular,
<i>MSH-7-date/time of message</i> and <i>MSH-10-message control ID</i> refer to
the response message; they are not echoes of the fields in the initial message.
<i>MSH-5-receiving application</i>, <i>MSH-6-receiving facility</i>, and
<i>MSH-11-processing ID</i> contain codes that are copied from <i>MSH-3-sending
application</i>, <i>MSH-4-sending facility</i> and <i>MSH-11-processing ID</i>
in the initiating message.</p>

<h5>
<A NAME="Heading51">2.5.1.2.2 When enhanced acknowledgement rules apply </A></h5>

<p><br>
</p>
<TABLE BORDER><TR align="left">
<TD colspan=1 align="left"><p><b>Note:</b>
At least one of <i>MSH-15-accept acknowledgement type</i> or
<i>MSH-16-application acknowledgement type </i>is not null.
</p>
<BR></TD></TR></TABLE><p><br>
	a)	accepts the message<br>
	b)	makes an initial determination as to whether or not the message can be
accepted, based on factors such as:<br>
		1)	the status of the interface<br>
		2)	the availability of safe storage onto which the message can be saved<br>
		3)	the syntactical correctness of the message, if the design of the receiving
system includes this type of validation at this phase<br>
		4)	the values of <i>MSH-9-message type</i>, <i>MSH-12-version ID</i>, and
<i>MSH-11-processing ID</i>, if the design of the receiving system includes
this type of validation at this phase<br>
	c)	examines the Message Header segment (MSH) to determine whether or not the
initiating system requires an accept acknowledgement.<br>
		If it does, the responding system returns a general acknowledgement message
(ACK) with:<br>
		1)	a commit accept (CA) in <i>MSA-1-acknowledgement code</i> if the message
can be accepted for processing<br>
		2)	a commit reject (CR) in <i>MSA-1-acknowledgement code</i> if the one of
the values of <i>MSH-9-message type</i>, <i>MSH-12-version ID</i> or
<i>MSH-11-processing ID</i> is not acceptable to the receiving application<br>
		3)	a commit error (CE) in <i>MSA-1-acknowledgement code</i> if the message
cannot be accepted for any other reason (e.g., sequence number error)<br>
		For this response, the following values are put in the MSA segment: <br>
</p>
<TABLE><TR align="center">
<TD colspan=1 align="center"><p><b><u>Field</u></b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b><u>Contents</u></b></p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSA-2-message
control ID
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p><i>MSH-10-message
control ID</i> from the incoming message.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSA-1-acknowledgement
code
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>As
described above.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSA-3-text
message
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>Text
description of error.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSA-4-expected
sequence number
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>As
described in Sequence Number Protocol, below, (if the sequence number protocol
is being used).
</p>
<BR></TD></TR></TABLE><p><br>
	The MSH segment in the response is constructed anew following the rules used
to create the initial message described above.  In particular,
<i>MSH-7-date/time of message</i> and <i>MSH-10-message control ID</i> refer to
the response message; they are not echoes of the fields in the initial message.
<i>MSH-5-receiving application</i>, <i>MSH-6-receiving facility</i>, and
<i>MSH-11-processing ID</i> contain codes that are copied from <i>MSH-3-sending
application</i>, <i>MSH-4-sending facility</i> and <i>MSH-11-processing ID</i>
in the initiating message.<br>
</p>
<TABLE BORDER><TR align="left">
<TD colspan=1 align="left"><p><b>Note:</b>
<i>	MSH-15-accept acknowledgement type</i> and <i>MSH-16-application
acknowledgement type</i> are not valued (not present or null).  At this point,
the accept portion of this message exchange is considered complete.
</p>
<BR></TD></TR></TABLE><p><br>
	d)	If the message header segment indicates that the initiating system also
requires an application  acknowledgement, this will be returned as the initial
message of a later exchange. <br>
	For this response, the following values are put in the MSA segment:  <br>
</p>
<TABLE><TR align="center">
<TD colspan=1 align="center"><p><b><u>Field</u></b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b><u>Contents</u></b></p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSA-2-message
control ID
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>Identifies
the initial message from the original initiating system as defined in Section
2.5.1.1-initiation.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSA-1-acknowledgement
code
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>Uses
the application (processing) acknowledgement codes as described in Section
2.5.1.2.1-when the original acknowledgement rules apply.
</p>
<BR></TD></TR><TR align="left">
<TD colspan=1 align="left"><p><i>MSA-3-text
message
</i></p>
<BR></TD>
<TD colspan=1 align="left"><p>Text
description of error.
</p>
<BR></TD></TR></TABLE><p><br>
	For this message, the receiving system acts as the initiator.  Since the
message it sends is application-specific, the layouts of these
application-level response messages are defined in the relevant
application-specific chapter.  If needed, this application acknowledgement
message can itself require (in <i>MSH-15-accept acknowledgement type</i>) an
accept acknowledgement message (MSA).  <i>MSH-16-application acknowledgement
type</i>, however, is always null, since the protocol does not allow the
application acknowledgement message to have an application acknowledgement.<br>
	At this point, the application acknowledgement portion of this message
exchange is considered complete. <br>
	If the processing on the receiving system goes through multiple stages,
chapter-defined messages may be used to relay status or informational changes
to other systems (including the original initiating system).  Such messages are
not part of the acknowledgement scheme for the original message, but are
considered to be independent messages triggered by events on the (original)
responding system. <br>
	<br>
</p>
<TABLE BORDER><TR align="left">
<TD colspan=1 align="left"><p><b>Note:</b>
	The original acknowledgement protocol is equivalent to the enhanced
acknowledgement protocol with <i>MSH-15-accept acknowledgement type</i> = NE
and <i>MSH-16-application acknowledgement type</i> = AL, and with the
application acknowledgement message defined so that it never requires an accept
acknowledgement (<i>MSH-15-accept acknowledgement type</i> = NE).
</p>
<BR></TD></TR></TABLE><p></p>
<h3>
</h3>

<h3>
<A NAME="Heading52">2.5.2 Application (level 7) processing rules, deferred processing two phase reply (original acknowledgement mode only)</A></h3>

<p><br>
	(This section remains in the specification only for reasons of providing
backwards compatibility: it is to be used only with the original
acknowledgement protocol.  For the original acknowledgement protocol, it
creates a generic form of an asynchronous application level acknowledgement,
the MCF message).<br>
	The application processing rules for deferred processing are described here.
In this mode the responding system sends an acknowledgement to the initiating
system that means the message has been placed in some type of secure
environment (e.g., disk storage), and the receiving system commits to
processing it within a reasonable amount of time, if a) the message contains
the necessary information, and b) nothing causes the message's request for
action to be canceled before the responding system processes the request.  
</p>
<TABLE><TR align="left">
<TD colspan=1 align="left"><p><b>Note:</b>
	Neither of these two conditions is completely checked at the time of the first
acknowledgement.  They are both checked at the time of processing.  
</p>
<BR></TD></TR></TABLE><p><br>
	The receipt of the first delayed acknowledgement by the initiating system
means that the responding system has taken responsibility for the subsequent
processing of the message.  This also implies that the initiating system no
longer needs to keep the particular message in its current form to send out
later.  For example, if the sending system were maintaining a queue of outgoing
messages, the particular message could be deleted from the output queue at this
point.<br>
	The receipt of the second delayed acknowledgement message informs the
initiating application of either a) the application's successful processing of
the initial message, or b) an error that prevented its processing.  If the
receiving application needs to return detailed change of status information, an
application-specific message will be used.  An example of the latter is the
General Order message (ORM) described in Chapter 4.<br>
	The general delayed acknowledgement protocol is implemented on a site-specific
and application-specific basis as needed.  At a particular site, for a given
transaction type the choices are:<br>
		a)	do not allow deferred acknowledgements<br>
		b)	all messages will have a deferred acknowledgement<br>
		c)	only exceptional cases (errors) will receive the deferred
acknowledgement<br>
	In overview the processing for options b) and c) proceeds as follows:<br>
	Initiator receives message from sending application and sends it to the
responding system.<br>
	The responding system receives the message from the initiating system and<br>
	a)	partially validates it syntactically and against the detailed rules
described in Section 2.5.1, under original acknowledgement mode.  This
validation need not be complete but should be sufficient to determine the
application that will ultimately respond to the message.  If this validation
fails, a reject message is constructed by the protocol software and returned to
the initiator.<br>
	<br>
	b)	(if the message passes this validation) stores it and constructs a response
message that simply acknowledges receipt.  <i>MSA-5-delayed acknowledgement
type</i> then has a value of <b>D</b>.<br>
	c)	subsequently passes the message to the application, which:<br>
			1)	creates a response message, or<br>
			2)	creates an error message, or<br>
			3)	creates a reject message<br>
	d)	The protocol software sends the response, error, or reject message to the
initiating system as an unsolicited update with no value present in
<i>MSA-5-delayed acknowledgement type</i>.  <br>
		The protocol software of the initiating system responds to the response,
error, or reject message with simple acknowledgement and passes it to the
initiating application.<br>
		The details follow.</p>

<h4>
<A NAME="Heading53">2.5.2.1 Initiation</A></h4>

<p><br>
	The rules for creating the initial message are exactly as defined in Section
2.5.1 for the original acknowledgement rules.</p>

<h4>
<A NAME="Heading54">2.5.2.2 Response</A></h4>

<p><br>
	The processing in the responding system follows this pattern:<br>
	a)	the protocol software accepts the message and validates it against at least
the following criteria:<br>
		1)	the value in <i>MSH-9-message type</i> is one that is acceptable to the
receiver<br>
		2)	the value in <i>MSH-12-version ID</i> is acceptable to the receiver<br>
		3)	the value in <i>MSH-11-processing ID</i> is appropriate for the
application process handling the message<br>
		If any of these edits fail, the protocol software rejects the message.  That
is, it creates an ACK message with <b>AR</b> in <i>MSA-1-acknowledgement
code</i>.<br>
	b)	If the message passes the edits, the protocol software stores it and a
generates a response message of type ACK with a value of <b>AA</b> in
<i>MSA-1-acknowledgement code</i> and <b>D</b> in <i>MSA-5-delayed
acknowledgement type</i>.<br>
	c)	Subsequently the protocol software passes the message to the application,
which performs one of these functions:<br>
		1)	processes the message successfully, generating the functional response
message (message type MCF) with a value of <b>AA</b> in
<i>MSA-1-acknowledgement code</i>.  <br>
		- OR -<br>
		2)	creates an error response, providing error information in functional
segments to be included in the response message, which has a value of <b>AE</b>
in <i>MSA-1-acknowledgement code</i>. <br>
		- OR -<br>
		3)	fails to process (rejects) the message for reasons unrelated to its
content or format (system down, internal error, etc.)  For most such problems
it is likely that the responding system will be able to accept the same message
at a later time.  The implementors must decide on an application-specific basis
whether the message should be automatically sent again.  The MSA segment of the
response message contains a value of <b>AR</b> in <i>MSA-1-acknowledgement
code</i>.  <br>
	d)	the application passes the message to the protocol software, which
constructs a message of type MCF with <b>F</b> in <i>MSA-5-delayed
acknowledgement type</i>.<br>
	e)	the protocol software passes the message to the initiating system as an
unsolicited update<br>
	f)	the protocol software in the initiating system passes the response message
to the initiating application and generates a simple ACK message.  No value is
present in <i>MSA-5-delayed acknowledgement type</i>.<br>
	All other values are put in the MSA segment as described in Section 2.5.1
under the  original processing rules.</p>
<h2>
</h2>

<h2>
<A NAME="Heading55">2.6  ACKNOWLEDGEMENT MESSAGES </A></h2>

<p><br>
Acknowledgement messages may be defined on an application basis.  However the
simple general acknowledgement message (ACK) may be used where the application
does not define a special message (application level acknowledgement) and in
other cases as described in Section 2.5.1 - original and enhanced processing
rules.  The MCF message is included only for backwards compatibility.</p>
<h3>
</h3>

<h3>
<A NAME="Heading56">2.6.1  ACK: general acknowledgement </A></h3>

<p><br>
	The simple general acknowledgement (ACK) can be used where the application
does not define a special application level acknowledgement message or where
there has been an error that precludes application processing.  It is also used
for accept level acknowlegements.  The details are described in Section 2.5.1 -
original and enhanced processing rules.<br>
<tt><u>ACK	General Acknowledgement	Chapter</u></tt><br>
<tt>MSH	Message Header	2</tt><br>
<tt>MSA	Message Acknowledgement	2</tt><br>
<tt>[ ERR ]	Error	2</tt></p>
<h3>
</h3>

<h3>
<A NAME="Heading57">2.6.2  MCF: Delayed acknowledgement </A></h3>

<p><br>
	(This message remains in the specification only for reasons of backwards
compatibility.  It is used as part of the protocol which creates a generic form
of an asynchronous application level acknowledgement, the MCF message.  See
Section 2.5.2)<br>
	The first MCF message, sent after the initial receipt has the following
structure.<br>
<tt><u>MCF	General Acknowledgement	Chapter</u></tt><br>
<tt>MSH	Message Header	2</tt><br>
<tt>MSA	Message Acknowledgement	2</tt><br>
<tt>[ ERR ]	Error	2</tt><br>
	The second MCF message, sent after application processing, has this
structure:<br>
<tt><u>MCF	General Acknowledgement	Chapter</u></tt><br>
<tt>MSH	Message Header	2</tt><br>
<tt>MSA	Message Acknowledgement	2</tt><br>
<tt>[ ERR ]	Error	2</tt></p>
<h2>
</h2>

<h2>
<A NAME="Heading58">2.7  DISPLAY MESSAGES </A></h2>

<p></p>
<h3>
</h3>

<h3>
<A NAME="Heading59">2.7.1  Display vs. record-oriented messages   </A></h3>

<p><br>
	HL7 messages may contain:<br>
	a)	data in a format suitable for display purposes (display-oriented data),
or<br>
	b)	data in a format which explicitly denotes field content (record
oriented)<br>
	A display message can be generated to fit a variety of needs for unsolicited
updates between systems.  These are situations where the update information
does not need to be captured by the receiving system's database, but only
displayed, either on a visual medium (such as a PC, workstation or a CRT) or on
printed medium. <br>
	The Unsolicited Display Message describes the display oriented message.  It is
the unsolicited version of the generalized Response display message (see
section on Queries, below).  It is acknowledged by a general acknowledgement
message (ACK).<br>
	The content and format of record oriented messages require functionally
specific capabilities.  The technical committees responsible for functionally
specific chapters define them within those chapters.</p>
<h3>
</h3>

<h3>
<A NAME="Heading60">2.7.2  Unsolicited display update message (trigger event Q05)  </A></h3>

<p><br>
	There is a simple HL7 message that allows for unsolicited display update
messages to be sent in HL7 format from one system to another.<br>
	Trigger events for the unsolicited update are generally the completion of a
particular action (concerning a given patient).  For example, a lab test might
be completed, generating a STAT unsolicited display message to be sent to the
appropriate location.<br>
<tt><u>UDM	Unsolicited Display Message	Chapter</u></tt><br>
<tt>MSH 	Message Header	2</tt><br>
<tt>URD	Results/update definition	2</tt><br>
<tt>[ URS ]	Results/update selection criteria	2</tt><br>
<tt>         {  DSP  }	Display data	2</tt><br>
<tt>[ DSC ]	Continuation Pointer	2</tt><br>
<tt><u>ACK	General Acknowledgement	Chapter</u></tt><br>
<tt>MSH	Message Header	2</tt><br>
<tt>MSA	Message Acknowledgement	2</tt><br>
<tt>[ ERR ]	Error	2</tt></p>
<h3>
</h3>

<h3>
<A NAME="Heading61">2.7.3  Continuation of unsolicited display update message </A></h3>

<p><br>
	Like other types of HL7 messages, the UDM message can be continued by use of
the DSC segment and <i>MSH-14-continuation pointer</i>.  Thus if a UDM needs to
be continued as three separate UDM messages, the first message would
contain:<br>
<tt>	MSH    		(no continuation pointer)</tt><br>
<tt>	URD </tt><br>
<tt>	[URS] 	</tt><br>
<tt>	{  DSP  }  </tt><br>
<tt>	DSC    		(with continuation pointer)</tt><br>
	The second message would contain:<br>
<tt>	MSH    		(continuation pointer (to first message))</tt><br>
<tt>	{  DSP  }</tt><br>
<tt>	DSC    		(with continuation pointer)</tt><br>
	The last message would then contain:<br>
<tt>	MSH    		(continuation pointer (to second message))</tt><br>
<tt>	{  DSP  }</tt><br>
<tt>					(no DSC, since last)</tt>
</p>
<TABLE><TR align="left">
<TD colspan=1 align="left"><p><b>Note:</b>
	This scheme works equally well with non-display messages, such as the
Unsolicited Update ORU message (see Chapter 7).
</p>
<BR></TD></TR></TABLE><p><br>
	Since these are unsolicited messages, intervening messages (from other
systems) may be sent to the receiving application while the sections of the
particular message are being continued.  <i>MSH-14-continuation pointer</i>
enables the receiving system to keep track of extraneous intervening
messages.</p>
<h2>
</h2>

<h2>
<A NAME="Heading62">2.8  QUERIES </A></h2>

<p></p>
<h3>
</h3>

<h3>
<A NAME="Heading63">2.8.1  Display vs. record-oriented queries </A></h3>

<p><br>
	Responses to queries exist in both display and record-oriented format (see
Section 2.7.1).  This section will discuss only display-oriented responses to
queries.  The content and format of record oriented responses to queries
require functionally specific capabilities.  The technical committees
responsible for functionally specific chapters define them within those
chapters.</p>
<h3>
</h3>

<h3>
<A NAME="Heading64">2.8.2  Message definition </A></h3>

<p><br>
	This section defines two messages.  The first is a generalized Query Message,
intended to support most types of queries between two systems.  The second is a
generalized Response Display Message in which the responding system formats the
data for direct output to a display. <br>
	The following represents typical examples of queries supported by the
Standard:<br>
	a)	for data regarding a single patient, e.g., send all lab results for patient
#123456<br>
	b)	for data regarding multiple patients, e.g., send the list of patients whose
attending physician is Dr. #123<br>
	c)	for data that is not patient related, e.g., send the age specific normal
values for serum protein<br>
	The variety of potential queries is almost unlimited.  There was no attempt
here to define a Standard that would cover every possible query.  Instead, the
Standard embraces the most common queries that are likely to occur in a
hospital.  For each common query there is a corresponding unsolicited update.
(See Section 2.7.2 above).<br>
	In particular, there is no implication that a specific system must support
generalized queries to comply with the Standard.  Rather, these transactions
provide a format, or a set of tools to support queries to the extent desired by
the institution.  The resources available and local policies will influence the
type of queries that are implemented.</p>
<h3>
</h3>

<h3>
<A NAME="Heading65">2.8.3 Immediate vs. deferred response</A></h3>

<p><br>
	Responses to queries can be either immediate or deferred.  The query describes
this as the expected response time.  In the immediate mode, the responding
process gives the response immediately or in a short period during which the
requesting process will wait for the response.</p>
<h3>
</h3>

<h3>
<A NAME="Heading66">2.8.4  Interactive continuation of display messages </A></h3>

<p><br>
	One use of queries is to retrieve data from one application for presentation
to users of another.  This approach might be used for users of a patient care
system retrieving data from lab or other ancillaries.  It also might permit
users of a pharmacy system to retrieve a patient's lab results from the lab
system or non-pharmacy order data from the patient care system.  Almost any
other application system could be the source of data or the system initiating
the query for its users.<br>
	Of particular interest is the case where the enquiring user formulates the
query on-line at the terminal of one system and waits while that system sends
the query to another.  He gets the response and displays it at their terminal.
When the user is formulating such a query she may only have limited
understanding of what data is available for a given patient.  Sometimes the
user's preference would be to make a simple query such as <b>give me recent
data in reverse chronological sequence</b> rather than <b>give me data for
yesterday</b>, since there may be some data available for today, or there may
be data from two days ago that is of interest.  The user will look at the data
returned and simply quit looking at it after he or she has found the part that
is of interest.  (The time frames or the sort sequence may differ, or the user
may wish to impose some selectivity on the response, but the general principle
remains the same.  The user would prefer to make a vague statement of the
interest, have the data presented in order of decreasing likelihood of
interest, and quit when he or she has seen enough.)<br>
	While beneficial to the user, this way of requesting data could be very
burdensome when the resulting query takes place over an inter-application
interface.  If the responding system were to retrieve, format, and send all the
data the user might like to see, the processing load would be extremely high
and the response time unacceptable.<br>
	The continuation query provides a way to permit the users to formulate queries
loosely while limiting the processing burden on the responding system.  The
initial query specifies the general constraints of the query and an amount of
data to be returned.  (For example, the query might be for lab results for
patient #12379 and 44 lines would be requested.)  The responding system
retrieves and formats the specified amount of data and returns it with a
special key field, <i>DSC-1-continuation pointer</i>.  The initiating system
presents the requested data to the user and retains the continuation pointer
field for use if another query is needed.  The internal structure of the value
is not known to the initiating system.  <br>
	If, after viewing the data, the user requests more, the initiating system
sends the query again in a format that is identical with the first, except that
the <i>DSC-1-continuation pointer</i> value is included and the requested
amount of data may be changed.  The responding system uses the continuation
pointer field as a key into its database to continue retrieval and formatting
of the results.  If the user does not request more data, no further messages
are exchanged.</p>
<h3>
</h3>

<h3>
<A NAME="Heading67">2.8.5  Logical display break points </A></h3>

<p><br>
	Often the lines of display text will fall into logical groups that differ from
the physical size of screen or printer page.  For example, a complete battery
or an entire radiology report might be thought of as comprising a logical
group, though they might have as few as six or as many as 120 lines.  Knowledge
of the logical break points in the display data can be useful to the
application system that is displaying or printing data.  For this reason,
<i>DSP-4-logical break point</i> is used.  The sending application (the one
that formats the data) places the logical break points where appropriate.  If
there is a particular ancillary result ID associated with the data delineated
by <i>DSP-4-logical break point</i>, the value of this ID also can be returned
in <i>DSP-5-result ID</i>.  Then if the user selects the area of the display
delineated by <i>DSP-4-logical break point</i>, the displaying system can query
for the associated <i>DSP-5-result ID</i>.</p>
<h3>
</h3>

<h3>
<A NAME="Heading68">2.8.6  Query trigger events and message definitions </A></h3>

<p><br>
	These are the trigger events associated with queries:<br>
	a)	a need occurs for immediate access to data that may be available from
another application, this may be an initial request for data or a
continuation<br>
	b)	a need occurs for deferred access to data that may be available from
another application<br>
	When display data is involved, these trigger events are served by the Query
(QRY) and Display Response (DSR) and General Acknowledgement (ACK) messages.
When the query is for record-oriented data, the QRY message is used, but the
response message is specific to a functional area.  Record-oriented queries are
described in other chapters.  Display-oriented queries are described here.<br>
	Each triggering event is listed below, with the applicable form of the message
exchange.  </p>

<h4>
<A NAME="Heading69">2.8.6.1 A query is made for immediate response (Trigger Event Q01)</A></h4>

<p><br>
<tt><u>QRY	Query Message	Chapter</u></tt><br>
<tt>MSH	Message Header	2</tt><br>
<tt>QRD	Query Definition	2</tt><br>
<tt>[ QRF ]	Query Filter	2</tt><br>
<tt>[ DSC ]	Continuation Pointer	2</tt><br>
<tt><u>DSR	Display Response Message	Chapter</u></tt><br>
<tt>MSH	Message Header	2</tt><br>
<tt>MSA	Message Acknowledgement	2</tt><br>
<tt>[ ERR ]	Error	2</tt><br>
<tt>QRD	Query Definition	2</tt><br>
<tt>[ QRF ]	Query Filter	2</tt><br>
<tt>{ DSP }	Display Data	2</tt><br>
<tt>[ DSC ]	Continuation Pointer	2</tt><br>
	The QRF and QRD segments from the QRY are echoed back in the response.  The
DSC segment contains the continuation pointer, if it is not null
(<i>DSC-1-continuation pointer</i>).</p>

<h5>
<A NAME="Heading70">2.8.6.1.1 Display query variants</A></h5>

<p><br>
	If a display query has more than a single type of response (i.e., a DSR
message with a different meaning, requiring different processing on the
querying system), the second component of the Message Type field of the MSH
segment may be used to indicate the response event type.  For example, an
ancillary name search display query may be defined using the query event code
of DNM.  The display response to such a query may be either a list of name
matches (response event type is DNM) or the ancillary's display results for an
exact match to the name query (response event type is NRS).  See <i>table 0003
- event type code</i> and field notes for <i>MSH-9-message type</i>.<br>
 </p>

<h4>
<A NAME="Heading71">2.8.6.2 Deferred access</A></h4>

<p><br>
	For clarity, A is the system initiating the query and B is the system sending
the responses.  Multiple queries and responses are permitted within single
messages.  The responses to a given query may be broken into several separate
DSR messages.  A single DSR message may contain responses to more than one QRY.</p>

<h5>
<A NAME="Heading72">2.8.6.2.1 A query is sent for deferred response (trigger event Q02)</A></h5>

<p><br>
<tt><u>QRY (A to B)	Query Message	Chapter</u></tt><br>
<tt>MSH	Message Header	2</tt><br>
<tt>QRD	Query Definition	2</tt><br>
<tt>[ QRF ]	Query Filter	2</tt><br>
<tt>[ DSC ]	Continuation Pointer	2</tt><br>
<tt><u>ACK (B to A)	General Acknowledgement	Chapter</u></tt><br>
<tt>MSH	Message Header	2</tt><br>
<tt>MSA	Message Acknowledgement	2</tt><br>
<tt>[ ERR ]	Error	2</tt></p>

<h5>
<A NAME="Heading73">2.8.6.2.2 Deferred response to a query (trigger event Q03)</A></h5>

<p>
Later, perhaps more than once.<br>
<tt><u>DSR (B to A)	Display Response Message	Chapter</u></tt><br>
<tt>MSH	Message Header	2</tt><br>
<tt>[MSA]	Message Acknowledgement	2</tt><br>
<tt>QRD	Query Definition	2</tt><br>
<tt>[ QRF ]	Query Filter	2</tt><br>
<tt>{ DSP }	Display Data	2</tt><br>
<tt>[ DSC ]	Continuation Pointer	2</tt><br>
<tt><u>ACK (A to B)	General Acknowledgement	Chapter</u></tt><br>
<tt>MSH	Message Header	2</tt><br>
<tt>MSA	Message Acknowledgement	2</tt><br>
<tt>[ ERR ]	Error	2</tt></p>
<h3>
</h3>

<h3>
<A NAME="Heading74">2.8.7  Query message implementation considerations </A></h3>

<p><br>
	a)	The particular allowable values for the filters in the QRD and QRF segments
are determined among cooperating applications during implementation.<br>
	b)	The format chosen for the query segments are very general.  This might be
read by prospective implementors to imply that the requirement for using the
Standard is the ability to respond to a wide variety of inquiries.  This is not
the intent.  The format here can be used with specific restrictions in any
interface.</p>
<h2>
</h2>

<h2>
<A NAME="Heading75">2.9 SPECIAL HL7 PROTOCOLS</A></h2>

<p><br>
This section contains several extensions to the basic HL7 message protocol.
These extensions represent implementation choices, and are to be used on a
site-specific and application-specific basis as needed.</p>
<h3>
</h3>

<h3>
<A NAME="Heading76">2.9.1 Sequence number protocol </A></h3>

<p><br>
	For certain types of data transactions between systems the issue of keeping
databases synchronized is critical.  An example is an ancillary system such as
lab, which needs to know the locations of all inpatients to route stat results
correctly.  If the lab receives an ADT transaction out of sequence, the
census/location information may be incorrect.  Although it is true that a
simple one-to-one acknowledgement scheme can prevent out-of-sequence
transactions between any two systems, only the use of sequence numbers can
prevent duplicate transactions.  
</p>
<TABLE><TR align="left">
<TD colspan=1 align="left"><p><b>Note:</b>
	Although this sequence number protocol is limited to the use of sequence
numbers on a single transaction stream between two applications, this
sequencing protocol is sufficiently robust to allow the design of
HL7-compatible store-and-forward applications.
</p>
<BR></TD></TR></TABLE><p><br>
	a)	definitions, initial conditions:<br>
		1)	the system receiving the data stream is expected to store the sequence
number of the most recently accepted transaction in a secure fashion before
acknowledging that transaction. This stored sequence number allows comparison
with the next transaction's sequence number, and the implementation of
fault-tolerant restart capabilities.<br>
		2)	the initiating system keeps a queue of outgoing transactions indexed by
the sequence number.  The length of this queue must be negotiated as part of
the design process for a given link.  The minimum length for this queue is
one.<br>
		3)	the sequence number is a positive (non-zero) integer; and it is
incremented by one (by the initiating system) for each successive transaction.
<br>
	b)	starting the link:<br>
		1)	the value of 0 (zero) for a sequence number is reserved: it is allowed
only when the initiating system (re-)starts the link.<br>
		2)	if the receiving system gets a transaction with a 0 (zero) in the sequence
number field, it should respond with a general acknowledgement message whose
MSA contains a sequence number one greater than the sequence number of the last
transaction it accepted in the Expected Sequence Number field.  If this value
does not exist (as on the first startup of a given link), the MSA should
contain a sequence number of -1, meaning that the receiving system will use the
positive, non-zero sequence number of the first transaction it accepts as its
initial sequence number (see resynching the link, item <b>e</b> below). <br>
		3)	the initiating system then sends the transaction indexed by the expected
sequence number (if that expected transaction is still on its queue).
Otherwise the link is frozen until an operator intervenes.<br>
	c)	normal operation of the link:<br>
		As it accepts each transaction, the receiving system securely stores the
sequence number (which agrees with its expected sequence number), and then
acknowledges the message by echoing the sequence number in <i>MSA-4-expected
sequence number</i>.<br>
	d)	error conditions (from point of view of initiating system).  These are
generated by the receiving system, by its comparison of the sequence number
sent out (with the MSH in <i>MSH-13-sequence number</i>) with the expected
sequence number (<i>MSA-4-expected sequence number</i> received with the
MSA).<br>
		1)<b>	expected sequence number is one greater than current value</b>.  The
previous acknowledgement was lost.  That transaction was sent again.  Correct
by sending next transaction.<br>
		2)<b>	expected sequence number less than current value</b>. Initiating system
can try starting again by issuing a transaction with a sequence number of zero;
or freeze the link for operator intervention.<br>
		3)<b>	other errors</b>: freeze the link for operator intervention<br>
	e)	forcing resynchronization of sequence numbers across the link.  The value
of -1 for a sequence number is reserved: it is allowed only when the initiating
system is resynching the link.  Thus if the receiving system gets a value of -1
in the sequence number field, it should return a general acknowledgement
message with a -1 in the expected sequence number field.  The receiving system
then resets its sequence number, using the non-zero positive sequence number of
the next transaction it accepts.<br>
	f)	notes<br>
		When the initiating system sends a message with a sequence number of <b>0</b>
or <b>-1</b> (see b or e above), the segments beyond the MSH need not be
present in the message, or, if present, all fields can be null.  In terms of
the responding system, for these two cases, only a General Acknowledgement
message is needed.</p>
<h3>
</h3>

<h3>
<A NAME="Heading77">2.9.2  Continuation messages and segments </A></h3>

<p><br>
	See Query Section 2.8.4 for a discussion of the continuation pointer segment
and the continuation pointer field, and their use in the continuation of
responses to queries and in the continuation of unsolicited update messages.<br>
	Besides the need to continue a message, there are occasional implementation
conditions that force the continuation of a segment across messages.  Such
continued segments require the use of the ADD segment as follows:<br>
	a)	the segment being continued (call it <b>ANY</b> for this example) is ended
at an arbitrary character position and terminated with the Standard segment
terminator (carriage return).<br>
	b)	the following segment is the ADD segment.  When it follows a segment being
continued, the ADD segment contains no fields.  Whether the message being
continued is a response to a query, or an unsolicited update, the receiving
system will use the continuation pointer (with the ADD segment) to continue the
message.<br>
	c)	when a response (to a query) is continued, the first segment after the QRD
and QRF (on a continued query) will be the ADD segment.  All the fields after
the ADD segment identifier (fields 1-N) will be the continuation of the ANY
segment.  The receiving system will then use the continuation pointer to join
the two parts of the ANY segment and continue processing the message.<br>
	d)	for the continuation of an unsolicited update message, the ADD segment will
be the first segment after the MSH segment.  The receiving system will use the
continuation pointer field in the MSH segment to identify the message being
continued, and then use the ADD segment as described in c) to join the two
parts of the ANY segment.<br>
	e)	limitations: MSH, MSA, DSC, PID, QRD, QRF, URD and URS segments cannot be
continued. <br>
	f)	although the UU example given below is for a display message, there is
nothing in the protocol to prevent a record-oriented UU from being continued in
this fashion.  In the unsolicited display message, the ADD record on the
continuation comes just after the URD/[URS] pair instead of directly after the
MSH.<br>
	g) 	transaction flow for a continued query-response pair with an ADD
segment:<br>
		1)	first query and response:<br>
<tt>	MSH</tt><br>
<tt>	QRD</tt><br>
<tt>	[QRF]</tt><br>
<tt>	MSH</tt><br>
<tt>	MSA</tt><br>
<tt>	[ ERR ]</tt><br>
<tt>	QRD</tt><br>
<tt>	[QRF]</tt><br>
<tt>	    {  DSP  }	(last DSP segment is incomplete)</tt><br>
<tt>	ADD			(ADD segment contains no fields)</tt><br>
<tt>	DSC</tt><br>
		2)	second query and response:<br>
<tt>	MSH</tt><br>
<tt>	QRD</tt><br>
<tt>	[QRF]</tt><br>
<tt>	DSC</tt><br>
<tt>	MSH</tt><br>
<tt>	MSA</tt><br>
<tt>	[ ERR ]</tt><br>
<tt>	QRD</tt><br>
<tt>	[QRF]</tt><br>
<tt>	ADD			(contains the remainder of the last DSP segment of the previous
response)</tt><br>
<tt>	   {DSP}		(remaining DSP segments are complete)</tt>
</p>
<TABLE><TR align="left">
<TD colspan=1 align="left"><p><b>Note:</b>
	This second response could itself be continued with a second DSC and (if
needed) a second ADD segment prior to it.
</p>
<BR></TD></TR></TABLE><p><br>
	f) 	transaction flow for a continued unsolicited message with a continued
segment.<br>
		1)	first unsolicited message and acknowledgement:<br>
<tt>	MSH</tt><br>
<tt>	URD</tt><br>
<tt>	[ URS ]			</tt><br>
<tt>	   {DSP}		(last DSP is incomplete)</tt><br>
<tt>	ADD			(contains no fields)</tt><br>
<tt>	DSC			(Continuation segment)</tt><br>
<tt>	MSH			(General Acknowledgement)</tt><br>
<tt>	MSA</tt><br>
<tt>	[ ERR ]</tt><br>
			<br>
		2)	second unsolicited message and acknowledgement: <br>
<tt>	MSH		(contains continuation pointer from DSC segment</tt><br>
<tt>				of prior message)</tt><br>
<tt>	ADD		(contains remainder of data from continued DSP</tt><br>
<tt>				segment from prior message)</tt><br>
<tt>	   {DSP}</tt>
</p>
<TABLE><TR align="left">
<TD colspan=1 align="left"><p><b>Note:</b>
	This second message could itself be continued with a second DSC and (if
needed) a second ADD segment prior to it.
</p>
<BR></TD></TR></TABLE><p><br>
<tt>	MSH			(General Acknowledgement)</tt><br>
<tt>	MSA			</tt><br>
<tt>	[ ERR ]	</tt></p>
<h3>
</h3>

<h3>
<A NAME="Heading78">2.9.3  HL7 batch protocol </A></h3>

<p><br>
	There are instances when it is convenient to transfer a batch of HL7 messages.
Common examples would be a batch of financial posting detail transactions
(DFT's) sent from an ancillary to a financial system.  Such a batch could be
sent online using a common file transfer protocol, or offline via tape or
diskette.</p>

<h4>
<A NAME="Heading79">2.9.3.1 HL7 batch file structure </A></h4>

<p><br>
	The structure of an HL7 batch file is given by the following (using the HL7
abstract message syntax defined in Section 2.4.8b):<br>
<tt>[FHS]               (file header segment)</tt><br>
<tt>{ [BHS]             (batch header segment)</tt><br>
<tt> { [MSH             (zero or more HL7 messages)</tt><br>
<tt>	....</tt><br>
<tt>	....</tt><br>
<tt>	....</tt><br>
<tt>] }</tt><br>
<tt>  [BTS]              (batch trailer segment)</tt><br>
<tt>}</tt><br>
<tt>[FTS]                (file trailer segment)</tt><br>
	Notes:<br>
	The sequence numbering protocol has a natural application in batch transfers.
See the discussion of batch acknowledgements that follows.<br>
	Although a batch will usually consist of a single type of message, there is
nothing in the definition that restricts a batch to only one message type.<br>
	The HL7 file and batch header and trailer segments are defined in exactly the
same manner as the HL7 message segments.  Hence the HL7 message construction
rules of Section 2.4.7 can be used to encode and decode HL7 batch files.<br>
	There are only two cases in which an HL7 batch file may contain zero HL7
messages:<br>
		a)	a batch containing zero HL7 messages may be sent to meet a requirement for
periodic submission of batches when there are no messages to send.<br>
		b)	a batch containing zero negative acknowledgement messages may be sent to
indicate that all the HL7 messages contained in the batch being acknowledged
are implicity acknowledged.  See Section 2.9.3.3 c below.</p>

<h4>
<A NAME="Heading80">2.9.3.2 Related segments and data usage</A></h4>

<p><br>
	The following segments defined in Section 2.10 relate to the HL7 Batch
Protocol:<br>
		BHS	Batch Header<br>
		BTS	Batch Trailer<br>
		FHS	File Header<br>
		FTS	File Trailer<br>
	The BTS segment contains a field, <i>BTS-3-batch totals</i>, which may have
one or more totals drawn from fields within the individual messages.  The
method for computing such totals will be determined on a site or application
basis unless explicitly stated in a functional chapter.</p>

<h4>
<A NAME="Heading81">2.9.3.3 Acknowledging batches</A></h4>

<p><br>
	In general, the utility of sending batches of data is that the data is
accepted all-at-once, with errors processed on an exception basis.  However, it
is a permissible application of HL7 to acknowledge all messages.  Several
options for acknowledgement are given and will be chosen on an application
basis.  In these cases, the sequence numbering protocol can be useful to the
applications processing the batch.<br>
	The options are:<br>
	a)	all messages are acknowledged in the response batch.<br>
	b)	the receiving system prints some form of batch control report, which is
then dealt with manually by personnel at the sending system.  No
acknowledgements are performed by the protocol software.<br>
	c)	an automated acknowledgement batch is created containing acknowledgement
messages only for those messages containing errors.  In this mode an empty
acknowledgement batch may be created (i.e., an HL7 batch file without any HL7
acknowledgement messages).  <br>
	In each case where there is a response batch, its format is a batch of
individual messages.  Each individual message is in the format defined for an
on-line response in the chapters.  Consider, for example, a batch that might be
constructed to respond to a batch of Detailed Financial Transactions (Chapter
6).  The messages in the response batch would consist entirely of ACK messages,
since ACK is the response shown in Chapter 6.<br>
	When batches are retransmitted after the correction of errors,
<i>BHS-12-reference batch control ID</i> should contain the batch control ID of
the original batch.</p>

<h4>
<A NAME="Heading82">2.9.3.4 Batch message as a query response</A></h4>

<p><br>
	The HL7 query also can be used to query for a batch in the following
manner:<br>
	a)	use the value BB or BL of <i>QRD-5-deferred response type</i> to specify a
batch response.  The query will be acknowledged with a general acknowledgement
as in the Deferred Access example above (see Section 2.8.6.2).<br>
	b)	in addition, insert into the batch file the QRD and QRF segments as
follows:<br>
<tt>[FHS]                  (file header segment)</tt><br>
<tt> { [BHS]               (batch header segment)</tt><br>
<tt>   [QRD]               (the QRD and QRF define the</tt><br>
<tt>   [QRF]                  query that this batch is a </tt><br>
<tt>                          response to)</tt><br>
<tt>      { MSH            (one or more HL7 messages)</tt><br>
<tt>        ....</tt><br>
<tt>        ....</tt><br>
<tt>        ....</tt><br>
<tt>      }</tt><br>
<tt>   [BTS]              (batch trailer segment)</tt><br>
<tt>}</tt><br>
<tt>[FTS]                 (file trailer segment)</tt><br>
	c)	the acknowledgement of a batch is described in this chapter (see Section
2.9.3.3)</p>
<h2>
</h2>

<h2>
<A NAME="Heading83">2.10 MESSAGE CONTROL SEGMENTS</A></h2>

<p><br>
The following segments are necessary to support the functionality described in
this chapter.</p>
<h3>
</h3>

<h3>
<A NAME="Heading84">2.10.1  MSH - message header segment -</A></h3>

<p>
<br>
	The MSH segment defines the intent, source, destination, and some specifics of
the syntax of a message. <br>
	Figure 2-9  MSH attributes<br>
</p>
<TABLE BORDER><TR align="center">
<TH colspan=1 align="center"><p>SEQ</p>
<BR></TH>
<TH colspan=1 align="center"><p>LEN</p>
<BR></TH>
<TH colspan=1 align="center"><p>DT</p>
<BR></TH>
<TH colspan=1 align="center"><p>R/O</p>
<BR></TH>
<TH colspan=1 align="center"><p>RP/#</p>
<BR></TH>
<TH colspan=1 align="center"><p>TBL#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ITEM#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ELEMENT
NAME
</p>
<BR></TH></TR><TR align="right">
<TD colspan=1 align="right"><p>1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7<br>
8<br>
9<br>
10<br>
11<br>
12<br>
13<br>
14<br>
15<br>
16<br>
17
</p>
<BR></TD>
<TD colspan=1 align="right"><p>1<br>
4<br>
15<br>
20<br>
30<br>
30<br>
26<br>
40<br>
7<br>
20<br>
1<br>
8<br>
15<br>
180<br>
2<br>
2<br>
2
</p>
<BR></TD>
<TD colspan=1 align="right"><p>ST<br>
ST<br>
ST<br>
ST<br>
ST<br>
ST<br>
TS<br>
ST<br>
CM<br>
ST<br>
ID<br>
ID<br>
NM<br>
ST<br>
ID<br>
ID<br>
ID
</p>
<BR></TD>
<TD colspan=1 align="center"><p>R<br>
R<br>
R<br>
R<br>
R<br>
R
</p>
<BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="right"><p><br>
0076<br>
0103<br>
0104<br>
0155<br>
0155
</p>
<BR></TD>
<TD colspan=1 align="right"><p>00001<br>
00002<br>
00003<br>
00004<br>
00005<br>
00006<br>
00007<br>
00008<br>
00009<br>
00010<br>
00011<br>
00012<br>
00013<br>
00014<br>
00015<br>
00016<br>
00017
</p>
<BR></TD>
<TD colspan=1 align="right"><p>Field
separator<br>
Encoding characters<br>
Sending application<br>
Sending facility<br>
Receiving application<br>
Receiving facility<br>
Date/time of message<br>
Security<br>
Message type<br>
Message control ID<br>
Processing ID<br>
Version ID<br>
Sequence number<br>
Continuation pointer<br>
Accept acknowledgement type<br>
Application acknowledgement type<br>
Country code
</p>
<BR></TD></TR></TABLE><p><br>
<b>2.10.1.0	MSH field definitions</b><br>
 </p>

<h4>
<A NAME="Heading85">2.10.1.1 Field separator (ST) 00001 </A></h4>

<p><br>
	Definition:  actually the separator between the segment ID and the first real
field, <i>MSH-2-encoding characters</i>.  As such it serves as the separator
and defines the character to be used as a separator for the rest of the
message.  Recommended value is <b>|</b>. <br>
 </p>

<h4>
<A NAME="Heading86">2.10.1.2 Encoding characters (ST) 00002 </A></h4>

<p><br>
	Definition:  four characters in the following order: the component separator,
repetition separator, escape character, and subcomponent separator.
Recommended values are <b>^~\&amp;</b>.  See Section 2.4.4 - message
delimiters. <br>
 </p>

<h4>
<A NAME="Heading87">2.10.1.3 Sending application (ST) 00003 </A></h4>

<p><br>
	Definition:  available for interface with lower level protocols. <br>
 </p>

<h4>
<A NAME="Heading88">2.10.1.4 Sending facility (ST) 00004 </A></h4>

<p><br>
	Definition:  addresses one of several occurrences of the same application
within the sending system.  Absent other considerations, the Medicare Provider
ID might be used with an appropriate sub-identifier in the second component.
Entirely site-defined. <br>
 </p>

<h4>
<A NAME="Heading89">2.10.1.5 Receiving application (ST) 00005 </A></h4>

<p><br>
	Definition:  available for interface with lower level protocols. <br>
 </p>

<h4>
<A NAME="Heading90">2.10.1.6 Receiving facility (ST) 00006 </A></h4>

<p><br>
	Definition:  identifies the receiving application among multiple identical
instances of the application running on behalf of different organizations.  See
comments: sending facility.<br>
 </p>

<h4>
<A NAME="Heading91">2.10.1.7 Date/time of message (TS) 00007 </A></h4>

<p><br>
	Definition:  date/time that the sending system created the message.  If the
time zone is specified, it will be used throughout the message as the default
time zone.<br>
 </p>

<h4>
<A NAME="Heading92">2.10.1.8 Security (ST) 00008 </A></h4>

<p><br>
	Definition:  in some applications of HL7 this field will be used to implement
security features.  Its use is not yet further specified. <br>
 </p>

<h4>
<A NAME="Heading93">2.10.1.9 Message type (CM) 00009 </A></h4>

<p><br>
	Components:  &lt;message type&gt; ^ &lt;trigger event&gt;<br>
	Definition:  first component is the message type edited by <i>table 0076 -
message type</i>; second is the trigger event code edited by <i>table 0003 -
event type code</i>.  Receiving system uses this field to know the data
segments to recognize, and possibly, the application to which to route this
message.  For certain queries, which may have more than a single response event
type, the second component may, in the response message, vary to indicate the
response event type.  See the discussion of the display query variants in
Section 2.8.6.1.1.  The second component is not required on response or
acknowledgement messages.<br>
	Table 0076   Message type <br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Owner</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Chapter</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>ACK<br>
ADT<br>
ARD<br>
BAR<br>
DFT<br>
DSR<br>
MCF<br>
ORF<br>
ORM<br>
ORR<br>
ORU<br>
OSQ<br>
RAR<br>
RAS<br>
RDE<br>
RDR<br>
RDS<br>
RGV<br>
RGR<br>
RER<br>
ROR<br>
RRA<br>
RRD<br>
RRE<br>
RRG<br>
QRY<br>
UDM
</p>
<BR></TD>
<TD colspan=1 align="center"><p>General
acknowledgement message<br>
ADT message<br>
Ancillary RPT (display)<br>
Add/change billing account<br>
Detail financial transaction<br>
Display response<br>
Delayed acknowledgement<br>
Observ. result/record response<br>
Order message<br>
Order acknowledgement message<br>
Observ result/unsolicited<br>
Order status query<br>
Pharmacy administration information<br>
Pharmacy administration message<br>
Pharmacy encoded order message<br>
Pharmacy dispense information<br>
Pharmacy dispense message<br>
Pharmacy give message<br>
Pharmacy dose information<br>
Pharmacy encoded order information<br>
Pharmacy prescription order response<br>
Pharmacy administration acknowledgement<br>
Pharmacy dispense acknowledgement<br>
Pharmacy encoded order acknowledgement<br>
Pharmacy give acknowledgement<br>
Query<br>
Unsolicited display message
</p>
<BR></TD>
<TD colspan=1 align="center"><p>CNT<br>
ADT<br>
ANR<br>
BLN<br>
BLN<br>
QRY<br>
CNT<br>
ANR<br>
ORD<br>
ORD<br>
ANR<br>
ORD<br>
ORD<br>
ORD<br>
ORD<br>
ORD<br>
ORD<br>
ORD<br>
ORD<br>
ORD<br>
ORD<br>
ORD<br>
ORD<br>
ORD<br>
ORD<br>
QRY<br>
QRY
</p>
<BR></TD>
<TD colspan=1 align="center"><p>2<br>
3<br>
7<br>
6<br>
6<br>
2<br>
2<br>
7<br>
4<br>
4<br>
7<br>
4<br>
4<br>
4<br>
4<br>
4<br>
4<br>
4<br>
4<br>
4<br>
4<br>
4<br>
4<br>
4<br>
4<br>
2<br>
2
</p>
<BR></TD></TR></TABLE><p>
</p>

<h4>
<A NAME="Heading94">2.10.1.10 Message control ID (ST) 00010 </A></h4>

<p><br>
	Definition:  number or other identifier that uniquely identifies the message.
The receiving system echoes this ID back to the sending system in the Message
Acknowledgement segment (MSA). <br>
 </p>

<h4>
<A NAME="Heading95">2.10.1.11 Processing ID (ID) 00011 </A></h4>

<p><br>
	Definition:  used to decide whether to process the message as defined in HL7
Application (level 7) Processing rules, above. <br>
	Table 0103   Processing ID <br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>D<br>
P<br>
T
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Debugging<br>
Production<br>
Training
</p>
<BR></TD></TR></TABLE><p></p>

<h4>
<A NAME="Heading96">2.10.1.12 Version ID (ID) 00012 </A></h4>

<p><br>
	Definition:  matched by the receiving system to its own version to be sure the
message will be interpreted correctly. <br>
	Table 0104   Version ID<br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>2.0<br>
2.0D<br>
2.1<br>
2.2
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Release
2.0   September 1988<br>
Demo 2.0   October 1988<br>
Release 2.1   March 1990<br>
Release 2.2   ? 1994
</p>
<BR></TD></TR></TABLE><p></p>

<h4>
<A NAME="Heading97">2.10.1.13 Sequence number (NM) 00013 </A></h4>

<p><br>
	Definition:  non-null value in this field implies that the sequence number
protocol is in use.  This numeric field incremented by one for each subsequent
value.  <br>
 </p>

<h4>
<A NAME="Heading98">2.10.1.14 Continuation pointer (ST) 00014 </A></h4>

<p><br>
	Definition:  used to define continuations in application-specific ways.  </p>

<h4>
<A NAME="Heading99">2.10.1.15 Accept acknowledgement type (ID) 00015 </A></h4>

<p><br>
	Definition:  defines the conditions under which accept acknowledgements are
required to be returned in response to this message.  Required for enhanced
acknowledgement mode.  Refer to <i>table 0155 - acknowledgement conditions</i>
for valid values.</p>

<h4>
<A NAME="Heading100">2.10.1.16 pplication acknowledgement type (ID) 00016 </A></h4>

<p><br>
	Definition:  defines the conditions under which  application  acknowledgements
are required to be returned in response to this message.  Required for enhanced
acknowledgement mode. <br>
	The following table contains the possible values for <i>MSH-15-accept
acknowledgement type</i> and <i>MSH-16-application acknowledgement type</i>:<br>
	Table 0155   Accept/application acknowledgement conditions<br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>AL<br>
NE<br>
ER<br>
SU
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Always<br>
Never<br>
Error/reject conditions only<br>
Successful completion only
</p>
<BR></TD></TR></TABLE><p><br>
</p>
<TABLE BORDER><TR align="left">
<TD colspan=1 align="left"><p><b>Note:</b>
	If MSH-15 and MSH-16 are omitted (or are both null), the original
Acknowledgement Mode rules are used.
</p>
<BR></TD></TR></TABLE><p></p>

<h4>
<A NAME="Heading101">2.10.1.17 Country code (ID) 00017</A></h4>

<p><br>
	Definition:  defines the country of origin for the message.  It will be used
primarily to specify default elements, such as currency denominations.   ISO
3166 provides a list of country codes that may be used<a name="fnB1"
href="#fn1">[2]</a>. </p>
<h3>
</h3>

<h3>
<A NAME="Heading102">2.10.2  MSA - message acknowledgement segment -</A></h3>

<p>
<br>
	The MSA segment contains information sent while acknowledging another message.
<br>
	Figure 2-10  MSA attributes<br>
</p>
<TABLE BORDER><TR align="center">
<TH colspan=1 align="center"><p>SEQ</p>
<BR></TH>
<TH colspan=1 align="center"><p>LEN</p>
<BR></TH>
<TH colspan=1 align="center"><p>DT</p>
<BR></TH>
<TH colspan=1 align="center"><p>R/O</p>
<BR></TH>
<TH colspan=1 align="center"><p>RP/#</p>
<BR></TH>
<TH colspan=1 align="center"><p>TBL#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ITEM#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ELEMENT
NAME
</p>
<BR></TH></TR><TR align="right">
<TD colspan=1 align="right"><p>1<br>
2<br>
3<br>
4<br>
5<br>
6
</p>
<BR></TD>
<TD colspan=1 align="right"><p>2<br>
20<br>
80<br>
15<br>
1<br>
100
</p>
<BR></TD>
<TD colspan=1 align="right"><p>ID<br>
ST<br>
ST<br>
NM<br>
ID<br>
CE
</p>
<BR></TD>
<TD colspan=1 align="center"><p>R<br>
R
</p>
<BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="right"><p>0008<br>
0102
</p>
<BR></TD>
<TD colspan=1 align="right"><p>00018<br>
00010<br>
00020<br>
00021<br>
00022<br>
00023
</p>
<BR></TD>
<TD colspan=1 align="right"><p>Acknowledgement
Code<br>
Message Control ID<br>
Text Message<br>
Expected Sequence Number<br>
Delayed Acknowledgement Type<br>
Error Condition
</p>
<BR></TD></TR></TABLE><p><br>
<b>2.10.2.0	MSA field definitions</b></p>

<h4>
<A NAME="Heading103">2.10.2.1 Acknowledgement code (ID) 00018 </A></h4>

<p><br>
	Definition:  see message processing rules. <br>
	Table 0008     Acknowledgement code <br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>AA<br>
AE<br>
AR<br>
CA<br>
CE<br>
CR
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Original
mode: Application Accept<br>
Enhanced mode: Application Acknowledgement: Accept<br>
Original mode: Application Error<br>
Enhanced mode: Application Acknowledgement: Error<br>
Original mode: Application Reject<br>
Enhanced mode: Application Acknowledgement: Reject<br>
Enhanced mode: Accept Acknowledgement: Commit Accept<br>
Enhanced mode: Accept Acknowledgement: Commit Error<br>
Enhanced mode: Accept Acknowledgement: Commit Reject
</p>
<BR></TD></TR></TABLE><p>
</p>

<h4>
<A NAME="Heading104">2.10.2.2 Message control ID (ST) 00010 </A></h4>

<p><br>
	Definition:  message control ID of the message sent by the sending system.  It
allows the sending system to associate this response with the message for which
it is intended. <br>
 </p>

<h4>
<A NAME="Heading105">2.10.2.3 Text message (ST) 00020 </A></h4>

<p><br>
	Definition:  optional text field that further describes an error condition.
This text may be printed in error logs or presented to an end user. <br>
 </p>

<h4>
<A NAME="Heading106">2.10.2.4 Expected sequence number (NM) 00021 </A></h4>

<p><br>
	Definition:  optional numeric field used in the sequence number protocol. <br>
 </p>

<h4>
<A NAME="Heading107">2.10.2.5 Delayed acknowledgement type (ID) 00022 </A></h4>

<p><br>
	Definition:  used only as described above, in Section 2.5.2.  Otherwise this
field is not used.   <br>
	Table 0102   Delayed acknowledgement type <br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>D<br>
F
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Message
received, stored for later processing<br>
Acknowledgement after processing
</p>
<BR></TD></TR></TABLE><p></p>

<h4>
<A NAME="Heading108">2.10.2.6 Error condition (CE) 00023</A></h4>

<p><br>
	Components:  &lt;identifier&gt;^&lt;text&gt;^&lt;name of coding
system&gt;^&lt;alternate identifier&gt;^&lt;alternate text&gt;^&lt;name of
alternate coding system&gt;<br>
	Definition:  CE field allowing the acknowledging system to use a user-defined
error code to further specify AR or AE type acknowledgements.  This field is a
generalized replacement for <i>MSA-3-text message</i>.</p>
<h3>
</h3>

<h3>
<A NAME="Heading109">2.10.3  ERR - error segment  -</A></h3>

<p><br>
	The ERR segment is used to add error comments to acknowledgement messages. <br>
	Figure 2-11  ERR attributes<br>
</p>
<TABLE BORDER><TR align="center">
<TH colspan=1 align="center"><p>SEQ</p>
<BR></TH>
<TH colspan=1 align="center"><p>LEN</p>
<BR></TH>
<TH colspan=1 align="center"><p>DT</p>
<BR></TH>
<TH colspan=1 align="center"><p>R/O</p>
<BR></TH>
<TH colspan=1 align="center"><p>RP/#</p>
<BR></TH>
<TH colspan=1 align="center"><p>TBL#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ITEM#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ELEMENT
NAME
</p>
<BR></TH></TR><TR align="right">
<TD colspan=1 align="right"><p>1</p>
<BR></TD>
<TD colspan=1 align="right"><p>80</p>
<BR></TD>
<TD colspan=1 align="right"><p>CM</p>
<BR></TD>
<TD colspan=1 align="center"><p>R</p>
<BR></TD>
<TD colspan=1 align="center"><p>Y</p>
<BR></TD>
<TD colspan=1 align="right"><p>0060</p>
<BR></TD>
<TD colspan=1 align="right"><p>00024</p>
<BR></TD>
<TD colspan=1 align="right"><p>Error
Code and Location
</p>
<BR></TD></TR></TABLE><p><br>
<b>2.10.3.0	ERR field definition</b></p>

<h4>
<A NAME="Heading110">2.10.3.1 Error code and location (CM) 00024</A></h4>

<p><br>
	Components:  &lt;segment ID (ST)&gt; ^ &lt;sequence (NM)&gt; ^ &lt;field
position (NM)&gt; ^ &lt;code identifying error (CE)&gt;<br>
	Definition:  identifies an erroneous segment in another message.  The second
component is an index if there are more than one segment of type &lt;segment
ID&gt;.  For systems that do not use the HL7 Encoding Rules, the data item
number may be used for the third component.  The fourth component references a
user-defined error table and is restricted from having any subcomponents as the
subcomponent separator is now the CE's component separator.</p>
<h3>
</h3>

<h3>
<A NAME="Heading111">2.10.4  QRD - query definition segment </A></h3>

<p><br>
	The QRD segment is used to define a query. <br>
	Figure 2-12  QRD attributes<br>
</p>
<TABLE BORDER><TR align="center">
<TH colspan=1 align="center"><p>SEQ</p>
<BR></TH>
<TH colspan=1 align="center"><p>LEN</p>
<BR></TH>
<TH colspan=1 align="center"><p>DT</p>
<BR></TH>
<TH colspan=1 align="center"><p>R/O</p>
<BR></TH>
<TH colspan=1 align="center"><p>RP/#</p>
<BR></TH>
<TH colspan=1 align="center"><p>TBL#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ITEM#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ELEMENT
NAME
</p>
<BR></TH></TR><TR align="right">
<TD colspan=1 align="right"><p>1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7<br>
8<br>
9<br>
10<br>
11<br>
12
</p>
<BR></TD>
<TD colspan=1 align="right"><p>26<br>
1<br>
1<br>
10<br>
1<br>
26<br>
10<br>
20<br>
3<br>
20<br>
20<br>
1
</p>
<BR></TD>
<TD colspan=1 align="right"><p>TS<br>
ID<br>
ID<br>
ST<br>
ID<br>
TS<br>
CQ<br>
ST<br>
ID<br>
ST<br>
ST<br>
ID
</p>
<BR></TD>
<TD colspan=1 align="center"><p>R<br>
R<br>
R<br>
R<br>
R<br>
R<br>
R<br>
R
</p>
<BR></TD>
<TD colspan=1 align="center"><p><br>
Y<br>
Y<br>
Y<br>
Y
</p>
<BR></TD>
<TD colspan=1 align="right"><p><br>
0106<br>
0091<br>
0107<br>
0126<br>
0048<br>
0108
</p>
<BR></TD>
<TD colspan=1 align="right"><p>00025<br>
00026<br>
00027<br>
00028<br>
00029<br>
00030<br>
00031<br>
00032<br>
00033<br>
00034<br>
00035<br>
00036
</p>
<BR></TD>
<TD colspan=1 align="right"><p>Query
Date/Time<br>
Query Format Code<br>
Query Priority<br>
Query ID<br>
Deferred Response Type<br>
Deferred Response Date/Time<br>
Quantity Limited Request<br>
Who Subject Filter<br>
What Subject Filter<br>
What Department Data Code<br>
What Data Code Value Qual.<br>
Query Results Level
</p>
<BR></TD></TR></TABLE><p><br>
<b>2.10.4.0	QRD field definitions</b></p>

<h4>
<A NAME="Heading112">2.10.4.1 Query date/time (TS) 00025 </A></h4>

<p><br>
	Definition:  date the query was generated by the application program. <br>
 </p>

<h4>
<A NAME="Heading113">2.10.4.2 Query format code (ID) 00026 </A></h4>

<p><br>
	Definition:  refer to <i>table 0106 - query format code</i> for valid codes.
<br>
	Table 0106   Query format code <br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>D<br>
R
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Response
is in display format<br>
Response is in record-oriented format
</p>
<BR></TD></TR></TABLE><p>
</p>

<h4>
<A NAME="Heading114">2.10.4.3 Query priority (ID) 00027 </A></h4>

<p><br>
	Definition:  time frame in which the response is expected.  Refer to <i>table
0091 - query priority</i> for valid codes.  Table values and subsequent fields
specify time frames for response. <br>
	Table 0091   Query priority <br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>D<br>
I
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Deferred<br>
Immediate
</p>
<BR></TD></TR></TABLE><p>
</p>

<h4>
<A NAME="Heading115">2.10.4.4 Query ID (ST) 00028 </A></h4>

<p><br>
	Definition:  unique identifier for the query.  Assigned by the querying
application.  Returned intact by the responding application.</p>

<h4>
<A NAME="Heading116">2.10.4.5 Deferred response type (ID) 00029 </A></h4>

<p><br>
	Definition:  refer to <i>table 0107 - deferred response type</i> for valid
entries. <br>
	Table 0107   Deferred response type <br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>B<br>
L
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Before
the Date/Time specified<br>
Later than the Date/Time specified
</p>
<BR></TD></TR></TABLE><p>
</p>

<h4>
<A NAME="Heading117">2.10.4.6 Deferred response date/time (TS) 00030 </A></h4>

<p><br>
	Definition:  date/time before or after which to send a deferred response.  If
not present, the response can be sent when its available.  (See
<i>QRD-5-deferred response type</i> above). <br>
 </p>

<h4>
<A NAME="Heading118">2.10.4.7 Quantity limited request (CQ) 00031 </A></h4>

<p><br>
	Definition:  maximum length of the response that can be accepted by the
requesting system.  Valid responses are numerical values given in the units
specified in the second component.  Refer to <i>table 0126 - quantity limited
request</i> for valid entries.  Default is LI lines. <br>
	Table 0126   Quantity limited request <br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>CH<br>
LI<br>
PG<br>
RD<br>
ZO
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Characters<br>
Lines <br>
Pages<br>
Records<br>
Locally defined
</p>
<BR></TD></TR></TABLE><p>
</p>

<h4>
<A NAME="Heading119">2.10.4.8 Who subject filter (ST) 00032 </A></h4>

<p><br>
	Definition:  identifies the subject, or who the inquiry is about. <br>
 </p>

<h4>
<A NAME="Heading120">2.10.4.9 What subject filter (ID) 00033 </A></h4>

<p><br>
	Definition:  describes the kind of information that is required to satisfy the
request.  Valid codes define the type of transaction inquiry and may be
extended locally during implementation.<br>
	Table 0048   What subject filter<br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>ADV<br>
ANU<br>
APN<br>
APP<br>
ARN<br>
APM<br>
APA<br>
CAN<br>
DEM<br>
FIN<br>
MRI<br>
MRO<br>
NCK<br>
NSC<br>
NST<br>
ORD<br>
OTH<br>
PRO<br>
RES<br>
RAR<br>
RER<br>
RDR<br>
RGR<br>
ROR<br>
STA
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Advice/diagnosis<br>
Nursing unit lookup (returns patients in beds, excluding empty beds)<br>
Patient name lookup<br>
Physician lookup<br>
Nursing unit lookup (returns patients in beds, including empty beds)<br>
Medical record number query, returns visits for a medical record number<br>
Account number query, return matching visit<br>
Cancel.  Used to cancel a query<br>
Demographics<br>
Financial<br>
Most recent inpatient<br>
Most recent outpatient<br>
Network clock<br>
Network status change<br>
Network statistic<br>
Order<br>
Other<br>
Procedure<br>
Result<br>
Pharmacy administration information<br>
Pharmacy encoded order information<br>
Pharmacy dispense information<br>
Pharmacy give information<br>
Pharmacy prescription information<br>
Status
</p>
<BR></TD></TR></TABLE><p>
<br>
	See HL7 Implementation Guide for detailed examples of use of various query
filter fields.<br>
 </p>

<h4>
<A NAME="Heading121">2.10.4.10 What department data code (ST) 00034 </A></h4>

<p><br>
	Definition:  possible contents include test number, procedure number, drug
code, item number, order number, etc.  The contents of this field are
determined by the contents of the previous field. This field could contain
multiple occurrences separated by repetition delimiters. <br>
 </p>

<h4>
<A NAME="Heading122">2.10.4.11 What data code value qual (CM) 00035 </A></h4>

<p><br>
	Components:  &lt;first data code value (ST)&gt; ^ &lt;last data code value
(ST)&gt;<br>
	Definition:  what data code value qualifier.  A window or range to further
refine the inquiry.  This field would contain start/stop separated by component
separators. <br>
 </p>

<h4>
<A NAME="Heading123">2.10.4.12 Query results level (ID) 00036 </A></h4>

<p><br>
	Definition:  used to control level of detail in results.  Refer to <i>table
0108 - query results level</i> for valid codes.  See chapters 4 and 7.<br>
 <br>
 	Table 0108   Query results level<br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>O<br>
R<br>
S<br>
T
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Order
plus order status<br>
Results without bulk text<br>
Status only<br>
Full results
</p>
<BR></TD></TR></TABLE><p>
</p>
<h3>
</h3>

<h3>
<A NAME="Heading124">2.10.5  QRF - query filter segment </A></h3>

<p><br>
	The QRF segment is used with the QRD segment to refine the content of a query
further. <br>
	Figure 2-13  QRF attributes<br>
</p>
<TABLE BORDER><TR align="center">
<TH colspan=1 align="center"><p>SEQ</p>
<BR></TH>
<TH colspan=1 align="center"><p>LEN</p>
<BR></TH>
<TH colspan=1 align="center"><p>DT</p>
<BR></TH>
<TH colspan=1 align="center"><p>R/O</p>
<BR></TH>
<TH colspan=1 align="center"><p>RP/#</p>
<BR></TH>
<TH colspan=1 align="center"><p>TBL#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ITEM#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ELEMENT
NAME
</p>
<BR></TH></TR><TR align="right">
<TD colspan=1 align="right"><p>1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7<br>
8
</p>
<BR></TD>
<TD colspan=1 align="right"><p>20<br>
26<br>
26<br>
20<br>
20<br>
12<br>
12<br>
12
</p>
<BR></TD>
<TD colspan=1 align="right"><p>ST<br>
TS<br>
TS<br>
ST<br>
ST<br>
ID<br>
ID<br>
ID
</p>
<BR></TD>
<TD colspan=1 align="center"><p>R</p>
<BR></TD>
<TD colspan=1 align="center"><p>Y<br>
Y<br>
Y<br>
Y<br>
Y<br>
Y
</p>
<BR></TD>
<TD colspan=1 align="right"><p><br>
0156<br>
0157<br>
0158
</p>
<BR></TD>
<TD colspan=1 align="right"><p>00037<br>
00038<br>
00039<br>
00040<br>
00041<br>
00042<br>
00043<br>
00044
</p>
<BR></TD>
<TD colspan=1 align="right"><p>Where
Subject Filter<br>
When Data Start Date/Time<br>
When Data End Date/Time<br>
What User Qualifier<br>
Other QRY Subject Filter<br>
Which Date/Time Qualifier<br>
Which Date/Time Status Qualifier<br>
Date/Time Selection Qualifier
</p>
<BR></TD></TR></TABLE><p><br>
<b>2.10.5.0	QRF field definitions</b></p>

<h4>
<A NAME="Heading125">2.10.5.1 Where subject filter (ST) 00037 </A></h4>

<p><br>
	Definition:  identifies the department, system, or subsystem to which the
query pertains.  This field may repeat as in LAB~HEMO, etc.<br>
 </p>

<h4>
<A NAME="Heading126">2.10.5.2 When data start date/time (TS) 00038 </A></h4>

<p><br>
	Definition:  data representing dates and times equal or after this value
should be included. <br>
 </p>

<h4>
<A NAME="Heading127">2.10.5.3 When data end date/time (TS) 00039 </A></h4>

<p><br>
	Definition:  data representing dates and times the same as or before this date
should be included. <br>
 </p>

<h4>
<A NAME="Heading128">2.10.5.4 What user qualifier (ST) 00040 </A></h4>

<p><br>
	Definition:  an identifier to further define characteristics of the data of
interest. <br>
 </p>

<h4>
<A NAME="Heading129">2.10.5.5 Other QRY subject filter (ST) 00041 </A></h4>

<p><br>
	Definition:  a filter defined locally for use between two systems.  This
filter uses codes and field definitions which have specific meaning only to the
applications and/or site involved.</p>

<h4>
<A NAME="Heading130">2.10.5.6 Which date/time qualifier (ID) 00042 </A></h4>

<p><br>
	Definition:  specifies type of date referred to in <i>QRF-2-when data start
date/time</i> and <i>QRF-3-when data end date/time</i>.<br>
	Table 0156   Which date/time qualifier<br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>ORD<br>
CAN<br>
SCHED<br>
COL<br>
RCT<br>
REP<br>
ANY
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Order
date/time<br>
Cancellation date/time<br>
Schedule date/time<br>
Collection date/time, equivalent to film or sample collection date/time<br>
Specimen receipt date/time, receipt of specimen in filling ancillary (Lab)<br>
Report date/time, report date/time at filiing ancillary (i.e., Lab)<br>
Any date/time within a range
</p>
<BR></TD></TR></TABLE><p></p>

<h4>
<A NAME="Heading131">2.10.5.7 Which date/time status qualifier (ID) 00043 </A></h4>

<p><br>
	Definition:  specifies status type of objects selected in date range defined
by <i>QRF-2-when data start date/time</i> and <i>QRF-3-when data end
date/time</i>).<br>
	Table 0157   Which date/time status qualifier<br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>PRE<br>
REP<br>
CFN<br>
FIN<br>
COR<br>
ANY
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Preliminary<br>
Report completion date/time<br>
Current final value, whether final or corrected<br>
Final only (no corrections)<br>
Corrected only (no final with corrections)<br>
Any status
</p>
<BR></TD></TR></TABLE><p></p>

<h4>
<A NAME="Heading132">2.10.5.8 Date/time selection qualifier (ID) 00044 </A></h4>

<p><br>
	Definition:  allows specification of certain types of values within the
date/time range.<br>
	Table 0158   Date/time selection qualifier<br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>1ST<br>
ALL<br>
LST<br>
REV
</p>
<BR></TD>
<TD colspan=1 align="center"><p>First
value within range<br>
All values within the range<br>
Last value within the range<br>
All values within the range returned in reverse chronological order (This is
the default if not otherwise specified.)
</p>
<BR></TD></TR></TABLE><p></p>
<h3>
</h3>

<h3>
<A NAME="Heading133">2.10.6  URD - results/update definition segment </A></h3>

<p><br>
	The URD segment is used in sending unsolicited updates about orders and
results.  It's purpose is similar to that of the QRD segment, but from the
results/unsolicited update point of view. Some of the fields have parallels in
the QRD segment.<br>
	Figure 2-14  URD attributes<br>
</p>
<TABLE BORDER><TR align="center">
<TH colspan=1 align="center"><p>SEQ</p>
<BR></TH>
<TH colspan=1 align="center"><p>LEN</p>
<BR></TH>
<TH colspan=1 align="center"><p>DT</p>
<BR></TH>
<TH colspan=1 align="center"><p>R/O</p>
<BR></TH>
<TH colspan=1 align="center"><p>RP/#</p>
<BR></TH>
<TH colspan=1 align="center"><p>TBL#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ITEM#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ELEMENT
NAME
</p>
<BR></TH></TR><TR align="right">
<TD colspan=1 align="right"><p>1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7
</p>
<BR></TD>
<TD colspan=1 align="right"><p>26<br>
1<br>
20<br>
3<br>
20<br>
20<br>
1
</p>
<BR></TD>
<TD colspan=1 align="right"><p>TS<br>
ID<br>
ST<br>
ID<br>
ST<br>
ST<br>
ID
</p>
<BR></TD>
<TD colspan=1 align="center"><p><br>
R
</p>
<BR></TD>
<TD colspan=1 align="center"><p><br>
Y<br>
Y<br>
Y<br>
Y
</p>
<BR></TD>
<TD colspan=1 align="right"><p><br>
0109<br>
0048<br>
0108
</p>
<BR></TD>
<TD colspan=1 align="right"><p>00045<br>
00046<br>
00047<br>
00048<br>
00049<br>
00050<br>
00051
</p>
<BR></TD>
<TD colspan=1 align="right"><p>R/U
Date/Time<br>
Report Priority<br>
R/U Who Subject Definition<br>
R/U What Subject Definition<br>
R/U What Department Code<br>
R/U Display/Print Locations<br>
R/U Results Level
</p>
<BR></TD></TR></TABLE><p><br>
<b>2.10.6.0	URD field definitions</b><br>
 </p>

<h4>
<A NAME="Heading134">2.10.6.1 R/U date/time (TS) 00045 </A></h4>

<p><br>
	Definition:  date and time the update was generated by the application
program. <br>
 </p>

<h4>
<A NAME="Heading135">2.10.6.2 Report priority (ID) 00046 </A></h4>

<p><br>
	Definition:  priority associated with this report or update.  Refer to
<i>table 0109 - report priority</i> for valid codes. <br>
 <br>
	Table 0109   Report priority<br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>R<br>
S
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Routine<br>
Stat
</p>
<BR></TD></TR></TABLE><p>
</p>

<h4>
<A NAME="Heading136">2.10.6.3 R/U who subject definition (ST) 00047 </A></h4>

<p><br>
	Definition:  definition of the subject, or who the report is about. <br>
 </p>

<h4>
<A NAME="Heading137">2.10.6.4 R/U what subject definition (ID) 00048 </A></h4>

<p><br>
	Definition:  describes the kind of information that is provided in the report.
Valid codes are the type of transaction inquiry.  Refer to <i>table 0048 - what
subject filter</i> for valid codes. <br>
	This table may be extended by local agreement during implementation.  See HL7
Implementation Guide for detailed examples of use of various query filter
fields. <br>
 </p>

<h4>
<A NAME="Heading138">2.10.6.5 R/U what department code (ST) 00049 </A></h4>

<p><br>
	Definition:  possible contents include test number, procedure number, drug
code, item number, order number, etc.  The contents of this field are
determined by the contents of the previous field. This field could contain
multiple occurrences separated by repetition delimiters. <br>
 </p>

<h4>
<A NAME="Heading139">2.10.6.6 R/U display/print locations (ST) 00050 </A></h4>

<p><br>
	Definition:  a list of the locations to which the report should be
distributed. <br>
 </p>

<h4>
<A NAME="Heading140">2.10.6.7 R/U results level (ID) 00051 </A></h4>

<p><br>
	Definition:  used to control level of detail in results.  Refer to <i>table
0108 - query results level</i> for valid codes.  Default level is T for full
results.  See chapters 4 and 7. </p>
<h3>
</h3>

<h3>
<A NAME="Heading141">2.10.7  URS - unsolicited selection segment </A></h3>

<p><br>
	The URS segment is identical with the QRF segment, except that, if the name of
any field contains <b>Query</b> (of QRY), this word has been changed to
<b>Results</b> (See <i>URS-5-R/U other results subject definition</i>). <br>
	Figure 2-15  URS attributes<br>
</p>
<TABLE BORDER><TR align="center">
<TH colspan=1 align="center"><p>SEQ</p>
<BR></TH>
<TH colspan=1 align="center"><p>LEN</p>
<BR></TH>
<TH colspan=1 align="center"><p>DT</p>
<BR></TH>
<TH colspan=1 align="center"><p>R/O</p>
<BR></TH>
<TH colspan=1 align="center"><p>RP/#</p>
<BR></TH>
<TH colspan=1 align="center"><p>TBL#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ITEM#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ELEMENT
NAME
</p>
<BR></TH></TR><TR align="right">
<TD colspan=1 align="right"><p>1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7<br>
8
</p>
<BR></TD>
<TD colspan=1 align="right"><p>20<br>
26<br>
26<br>
20<br>
20<br>
12<br>
12<br>
12
</p>
<BR></TD>
<TD colspan=1 align="right"><p>ST<br>
TS<br>
TS<br>
ST<br>
ST<br>
ID<br>
ID<br>
ID
</p>
<BR></TD>
<TD colspan=1 align="center"><p>R</p>
<BR></TD>
<TD colspan=1 align="center"><p>Y<br>
Y<br>
Y<br>
Y<br>
Y<br>
Y
</p>
<BR></TD>
<TD colspan=1 align="right"><p><br>
0156<br>
0157<br>
0158
</p>
<BR></TD>
<TD colspan=1 align="right"><p>00052<br>
00053<br>
00054<br>
00055<br>
00056<br>
00057<br>
00058<br>
00059
</p>
<BR></TD>
<TD colspan=1 align="right"><p>R/U
Where Subject Definition<br>
R/U When Data Start Date/Time<br>
R/U When Data End Date/Time<br>
R/U What User Qualifier<br>
R/U Other Results Subject Definition<br>
R/U Which Date/Time Qualifier<br>
R/U Which Date/Time Status Qualifier<br>
R/U Date/Time Selection Qualifier
</p>
<BR></TD></TR></TABLE><p><br>
<b>2.10.7.0	URS field definitions</b></p>

<h4>
<A NAME="Heading142">2.10.7.1 R/U where subject definition (ST) 00052 </A></h4>

<p><br>
	Definition:  identifies the department, system, or subsystem to which the
result pertains.  This field may repeat as in <b>LAB~HEMO</b>, etc. <br>
 </p>

<h4>
<A NAME="Heading143">2.10.7.2 R/U when data start date/time (TS) 00053 </A></h4>

<p><br>
	Definition:  date/time the result starts.  (if applicable). <br>
 </p>

<h4>
<A NAME="Heading144">2.10.7.3 R/U when data end date/time (TS) 00054 </A></h4>

<p><br>
	Definition:  date/time the result ends. (if applicable). <br>
 </p>

<h4>
<A NAME="Heading145">2.10.7.4 R/U what user qualifier (ST) 00055 </A></h4>

<p><br>
	Definition:  an identifier to define further the characteristics of the data
that are of interest. <br>
 </p>

<h4>
<A NAME="Heading146">2.10.7.5 R/U other results subject definition (ST) 00056 </A></h4>

<p><br>
	Definition:  further qualifier defined locally for use between two systems.
This filter uses codes and field definitions that have specific meaning only to
the application and/or site involved.</p>

<h4>
<A NAME="Heading147">2.10.7.6 R/U Which date/time qualifier (ID) 00057 </A></h4>

<p><br>
	Definition:  specifies type of date referred to in <i>URS-2-when data start
date/time</i> and <i>URS-3-when data end date/time</i>.  Refer to <i>table 0156
- which date/time qualifier</i>.</p>

<h4>
<A NAME="Heading148">2.10.7.7 R/U Which date/time status qualifier (ID) 00058 </A></h4>

<p><br>
	Definition:  specifies status type of objects selected in date range defined
by <i>URS-2-when data start date/time</i> and <i>URS-3-when data end
date/time</i>.  Refer to <i>table 0157 - date/time status qualifier</i>.</p>

<h4>
<A NAME="Heading149">2.10.7.8 R/U Date/time selection qualifier (ID) 00059 </A></h4>

<p><br>
	Definition:  allows specification of certain types of values within the
date/time range.  Refer to <i>table 0158 - date/time selection
qualifier</i>.</p>
<h3>
</h3>

<h3>
<A NAME="Heading150">2.10.8  DSC - Continuation pointer segment </A></h3>

<p>
<br>
	The DSC segment is used in the continuation protocol. <br>
	Figure 2-16  DSC attributes<br>
</p>
<TABLE BORDER><TR align="center">
<TH colspan=1 align="center"><p>SEQ</p>
<BR></TH>
<TH colspan=1 align="center"><p>LEN</p>
<BR></TH>
<TH colspan=1 align="center"><p>DT</p>
<BR></TH>
<TH colspan=1 align="center"><p>R/O</p>
<BR></TH>
<TH colspan=1 align="center"><p>RP/#</p>
<BR></TH>
<TH colspan=1 align="center"><p>TBL#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ITEM#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ELEMENT
NAME
</p>
<BR></TH></TR><TR align="right">
<TD colspan=1 align="right"><p>1</p>
<BR></TD>
<TD colspan=1 align="right"><p>180</p>
<BR></TD>
<TD colspan=1 align="right"><p>ST</p>
<BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="right"><BR></TD>
<TD colspan=1 align="right"><p>00060</p>
<BR></TD>
<TD colspan=1 align="right"><p>Continuation
Pointer
</p>
<BR></TD></TR></TABLE><p><br>
<b>2.10.8.0	DSC field definition</b></p>

<h4>
<A NAME="Heading151">2.10.8.1 Continuation pointer (ST) 00060</A></h4>

<p><br>
	Definition:  see description of Continuation Fields in Section 2.8.4.  In an
initial query, this field is null.  If the responder returns a value of null or
not present, then there is no more data to fulfill any future continuation
requests.  For use with continuations of unsolicited messages, see sections
2.7.2 and 2.9.2.  Note that continuation protocols work with both display and
record-oriented messages.</p>
<h3>
</h3>

<h3>
<A NAME="Heading152">2.10.9  DSP - display data segment </A></h3>

<p>
<br>
	The DSP segment is used to contain data that has been preformatted by the
sender for display.  The semantic content of the data is lost; the data is
simply treated as lines of text. <br>
	Figure 2-17  DSP attributes<br>
</p>
<TABLE BORDER><TR align="center">
<TH colspan=1 align="center"><p>SEQ</p>
<BR></TH>
<TH colspan=1 align="center"><p>LEN</p>
<BR></TH>
<TH colspan=1 align="center"><p>DT</p>
<BR></TH>
<TH colspan=1 align="center"><p>R/O</p>
<BR></TH>
<TH colspan=1 align="center"><p>RP/#</p>
<BR></TH>
<TH colspan=1 align="center"><p>TBL#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ITEM#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ELEMENT
NAME
</p>
<BR></TH></TR><TR align="right">
<TD colspan=1 align="right"><p>1<br>
2<br>
3<br>
4<br>
5
</p>
<BR></TD>
<TD colspan=1 align="right"><p>4<br>
4<br>
300<br>
2<br>
20
</p>
<BR></TD>
<TD colspan=1 align="right"><p>SI<br>
SI<br>
TX<br>
ST<br>
TX
</p>
<BR></TD>
<TD colspan=1 align="center"><p><br>
R
</p>
<BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="right"><BR></TD>
<TD colspan=1 align="right"><p>00061<br>
00062<br>
00063<br>
00064<br>
00065
</p>
<BR></TD>
<TD colspan=1 align="right"><p>Set
ID - Display Data<br>
Display Level<br>
Data Line<br>
Logical Break Point<br>
Result ID
</p>
<BR></TD></TR></TABLE><p><br>
<b>2.10.9.0	DSP field definitions</b></p>

<h4>
<A NAME="Heading153">2.10.9.1 Set ID - display data (SI) 00061</A></h4>

<p><br>
	Definition:  used optionally to number multiple display segments.   <br>
 </p>

<h4>
<A NAME="Heading154">2.10.9.2 Display level (SI) 00062</A></h4>

<p><br>
	Definition:  individual sites or applications may assign numbering to define
groups of data elements. <br>
 </p>

<h4>
<A NAME="Heading155">2.10.9.3 Data line (TX) 00063</A></h4>

<p><br>
	Definition:  contains an actual line as it should be displayed.  As described
for the TX data type, highlighting and other special display characteristics
may be included. <br>
 </p>

<h4>
<A NAME="Heading156">2.10.9.4 Logical break point (ST) 00064</A></h4>

<p><br>
	Definition:  non-null if this line is the last line of a logical break point
in the response as defined by the responding system.  See Section 2.8.5 for the
discussion of Logical display break points.<br>
 </p>

<h4>
<A NAME="Heading157">2.10.9.5 Result ID (TX) 00065</A></h4>

<p><br>
	Definition:  if the user selects a result ID (defined by <i>DSP-5-logical
break point</i>) from the screen display corresponding to a record in which
<i>DSP-5-result ID</i> is non-null, the application can initiate a second query
(a separate session) to the ancillary with the <i>QRD-10-what department data
code</i> filled in with this non-null value (e.g., the ancillary accession
number or its equivalent).  The ancillary response will contain the report
referenced by this result ID (e.g., accession number).  The ancillary should
correlate the result ID with <i>DSP-4-logical break point</i> as follows: If
more than one line of text is sent per result, <i>DSP-5-result ID</i> should be
only non-null for a DSP segment that contains a non-null <i>DSP-4-logical break
point</i>.  This field may be broken into components by local agreement.  A
common example might be to include placer order number, filler order number,
and universal service identifier.  Whenever such fields are used as components
of the result ID, their components will be sent as subcomponents.</p>
<h3>
</h3>

<h3>
<A NAME="Heading158">2.10.10  ADD - addendum segment  -</A></h3>

<p>
<br>
	The ADD segment is used to define the continuation of the prior segment in a
continuation message.  See Section 2.9.2 for details. <br>
	Figure 2-18  ADD attributes<br>
</p>
<TABLE BORDER><TR align="center">
<TH colspan=1 align="center"><p>SEQ</p>
<BR></TH>
<TH colspan=1 align="center"><p>LEN</p>
<BR></TH>
<TH colspan=1 align="center"><p>DT</p>
<BR></TH>
<TH colspan=1 align="center"><p>R/O</p>
<BR></TH>
<TH colspan=1 align="center"><p>RP/#</p>
<BR></TH>
<TH colspan=1 align="center"><p>TBL#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ITEM#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ELEMENT
NAME
</p>
<BR></TH></TR><TR align="right">
<TD colspan=1 align="right"><p>1</p>
<BR></TD>
<TD colspan=1 align="right"><p>64k</p>
<BR></TD>
<TD colspan=1 align="right"><p>ST</p>
<BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="right"><BR></TD>
<TD colspan=1 align="right"><p>00066</p>
<BR></TD>
<TD colspan=1 align="right"><p>Addendum
Continuation Pointer
</p>
<BR></TD></TR></TABLE><p><br>
<b>2.10.10.0	ADD field definition</b></p>

<h4>
<A NAME="Heading159">2.10.10.1 Addendum continuation pointer (ST) 00066  </A></h4>

<p><br>
	Definition:  used to define the continuation of the prior segment in a
continuation message.  See text for details When the ADD is sent after the
segment being continued, it contains no fields.  It is only a marker that the
previous segment is being continued in a subsequent message.  Thus fields 1-N
are not present.  The sequence designation, 1-N, means the remainder of the
fields in the segment being continued.  These
remainder-of-the-segment-being-continued fields are present only when the ADD
is sent with a continuation message. <br>
 </p>
<h3>
</h3>

<h3>
<A NAME="Heading160">2.10.11  FHS - file header segment -</A></h3>

<p>
<br>
	The FHS segment is used to head a file (group of batches) as defined in
Section 2.9.3.<br>
	Figure 2-19  FHS attributes<br>
</p>
<TABLE BORDER><TR align="center">
<TH colspan=1 align="center"><p>SEQ</p>
<BR></TH>
<TH colspan=1 align="center"><p>LEN</p>
<BR></TH>
<TH colspan=1 align="center"><p>DT</p>
<BR></TH>
<TH colspan=1 align="center"><p>R/O</p>
<BR></TH>
<TH colspan=1 align="center"><p>RP/#</p>
<BR></TH>
<TH colspan=1 align="center"><p>TBL#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ITEM#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ELEMENT
NAME
</p>
<BR></TH></TR><TR align="right">
<TD colspan=1 align="right"><p>1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7<br>
8<br>
9<br>
10<br>
11<br>
12
</p>
<BR></TD>
<TD colspan=1 align="right"><p>1<br>
4<br>
15<br>
20<br>
15<br>
20<br>
26<br>
40<br>
20<br>
80<br>
20<br>
20
</p>
<BR></TD>
<TD colspan=1 align="right"><p>ST<br>
ST<br>
ST<br>
ST<br>
ST<br>
ST<br>
TS<br>
ST<br>
ST<br>
ST<br>
ST<br>
ST
</p>
<BR></TD>
<TD colspan=1 align="center"><p>R<br>
R
</p>
<BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="right"><BR></TD>
<TD colspan=1 align="right"><p>00067<br>
00068<br>
00069<br>
00070<br>
00071<br>
00072<br>
00073<br>
00074<br>
00075<br>
00076<br>
00077<br>
00078
</p>
<BR></TD>
<TD colspan=1 align="right"><p>File
Field Separator<br>
File Encoding Characters<br>
File Sending Application<br>
File Sending Facility<br>
File Receiving Application<br>
File Receiving Facility<br>
File Creation Date/Time<br>
File Security<br>
File Name/ID<br>
File Header Comment<br>
File Control ID<br>
Reference File Control ID
</p>
<BR></TD></TR></TABLE><p><br>
<b>2.10.11.0	FHS field definitions</b><br>
 </p>

<h4>
<A NAME="Heading161">2.10.11.1 File field separator (ST) 00067</A></h4>

<p><br>
	Definition:  has the same definition as the corresponding field in the MSH
segment. <br>
 </p>

<h4>
<A NAME="Heading162">2.10.11.2 File encoding characters (ST) 00068 </A></h4>

<p><br>
	Definition:  has the same definition as the corresponding field in the MSH
segment. <br>
 </p>

<h4>
<A NAME="Heading163">2.10.11.3 File sending application (ST) 00069 </A></h4>

<p><br>
	Definition:  has the same definition as the corresponding field in the MSH
segment. <br>
 </p>

<h4>
<A NAME="Heading164">2.10.11.4 File sending facility (ST) 00070 </A></h4>

<p><br>
	Definition:  has the same definition as the corresponding field in the MSH
segment. <br>
 </p>

<h4>
<A NAME="Heading165">2.10.11.5 File receiving application (ST) 00071 </A></h4>

<p><br>
	Definition:  has the same definition as the corresponding field in the MSH
segment. <br>
 </p>

<h4>
<A NAME="Heading166">2.10.11.6 File receiving facility (ST) 00072 </A></h4>

<p><br>
	Definition:  has the same definition as the corresponding field in the MSH
segment. <br>
 </p>

<h4>
<A NAME="Heading167">2.10.11.7 File creation date/time (TS) 00073 </A></h4>

<p><br>
	Definition:  field has the same definition as the corresponding field in the
MSH segment. <br>
 </p>

<h4>
<A NAME="Heading168">2.10.11.8 File security (ST) 00074 </A></h4>

<p><br>
	Definition:  has the same definition as the corresponding field in the MSH
segment. <br>
 </p>

<h4>
<A NAME="Heading169">2.10.11.9 File name/ID  (ST) 00075 </A></h4>

<p><br>
	Definition:  can be used by the application processing file.  Its use is not
further specified. <br>
 </p>

<h4>
<A NAME="Heading170">2.10.11.10 File header comment (ST) 00076 </A></h4>

<p><br>
	Definition:  free text field, the use of which is not further specified. <br>
 </p>

<h4>
<A NAME="Heading171">2.10.11.11  File control ID (ST) 00077 </A></h4>

<p><br>
	Definition:  used to identify a particular file uniquely.  It can be echoed
back in <i>FHS-12-reference file control ID</i>. <br>
 </p>

<h4>
<A NAME="Heading172">2.10.11.12  Reference file control ID (ST) 00078 </A></h4>

<p><br>
	Definition:  value of <i>FHS-11-file control ID</i> when this file was
originally transmitted.  Not present if this file is being transmitted for the
first time. <br>
 </p>
<h3>
</h3>

<h3>
<A NAME="Heading173">2.10.12 FTS - file trailer segment-</A></h3>

<p>
<br>
	The FTS segment defines the end of a file. <br>
	Figure 2-20  FTS attributes<br>
</p>
<TABLE BORDER><TR align="center">
<TH colspan=1 align="center"><p>SEQ</p>
<BR></TH>
<TH colspan=1 align="center"><p>LEN</p>
<BR></TH>
<TH colspan=1 align="center"><p>DT</p>
<BR></TH>
<TH colspan=1 align="center"><p>R/O</p>
<BR></TH>
<TH colspan=1 align="center"><p>RP/#</p>
<BR></TH>
<TH colspan=1 align="center"><p>TBL#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ITEM#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ELEMENT
NAME
</p>
<BR></TH></TR><TR align="right">
<TD colspan=1 align="right"><p>1<br>
2
</p>
<BR></TD>
<TD colspan=1 align="right"><p>10<br>
80
</p>
<BR></TD>
<TD colspan=1 align="right"><p>NM<br>
ST
</p>
<BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="right"><BR></TD>
<TD colspan=1 align="right"><p>00079<br>
00080
</p>
<BR></TD>
<TD colspan=1 align="right"><p>File
Batch Count<br>
File Trailer Comment
</p>
<BR></TD></TR></TABLE><p><br>
<b>2.10.12.0	FTS field definitions</b><br>
  </p>

<h4>
<A NAME="Heading174">2.10.12.1 File batch count (NM) 00079 </A></h4>

<p><br>
	Definition:  contains the number of batches contained in this file. <br>
 </p>

<h4>
<A NAME="Heading175">2.10.12.2 File trailer comment (ST) 00080 </A></h4>

<p><br>
	Definition:  free text field, the use of which is not further specified.</p>
<h3>
</h3>

<h3>
<A NAME="Heading176">2.10.13  BHS - batch header  -</A></h3>

<p>
<br>
	The BHS segment defines the start of a batch. <br>
	Figure 2-21  BHS attributes<br>
</p>
<TABLE BORDER><TR align="center">
<TH colspan=1 align="center"><p>SEQ</p>
<BR></TH>
<TH colspan=1 align="center"><p>LEN</p>
<BR></TH>
<TH colspan=1 align="center"><p>DT</p>
<BR></TH>
<TH colspan=1 align="center"><p>R/O</p>
<BR></TH>
<TH colspan=1 align="center"><p>RP/#</p>
<BR></TH>
<TH colspan=1 align="center"><p>TBL#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ITEM#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ELEMENT
NAME
</p>
<BR></TH></TR><TR align="right">
<TD colspan=1 align="right"><p>1<br>
2<br>
3<br>
4<br>
5<br>
6<br>
7<br>
8<br>
9<br>
10<br>
11<br>
12
</p>
<BR></TD>
<TD colspan=1 align="right"><p>1<br>
3<br>
15<br>
20<br>
15<br>
20<br>
26<br>
40<br>
20<br>
80<br>
20<br>
20
</p>
<BR></TD>
<TD colspan=1 align="right"><p>ST<br>
ST<br>
ST<br>
ST<br>
ST<br>
ST<br>
TS<br>
ST<br>
ST<br>
ST<br>
ST<br>
ST
</p>
<BR></TD>
<TD colspan=1 align="center"><p>R<br>
R
</p>
<BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="right"><BR></TD>
<TD colspan=1 align="right"><p>00081<br>
00082<br>
00083<br>
00084<br>
00085<br>
00086<br>
00087<br>
00088<br>
00089<br>
00090<br>
00091<br>
00092
</p>
<BR></TD>
<TD colspan=1 align="right"><p>Batch
Field Separator<br>
Batch Encoding Characters<br>
Batch Sending Application<br>
Batch Sending Facility<br>
Batch Receiving Application<br>
Batch Receiving Facility<br>
Batch Creation Date/Time<br>
Batch Security<br>
Batch Name/ID/Type<br>
Batch Comment<br>
Batch Control ID<br>
Reference Batch Control ID
</p>
<BR></TD></TR></TABLE><p><br>
<b>2.10.13.0	BHS field definition</b></p>

<h4>
<A NAME="Heading177">2.10.13.1 Batch field separator (ST) 00081</A></h4>

<p><br>
	Definition:  has the same definition as the corresponding field in the MSH
segment. <br>
 </p>

<h4>
<A NAME="Heading178">2.10.13.2 Batch encoding characters (ST) 00082</A></h4>

<p><br>
	Definition:  has the same definition as the corresponding field in the MSH
segment. <br>
 </p>

<h4>
<A NAME="Heading179">2.10.13.3 Batch sending application (ST) 00083</A></h4>

<p><br>
	Definition:  has the same definition as the corresponding field in the MSH
segment. <br>
 </p>

<h4>
<A NAME="Heading180">2.10.13.4 Batch sending facility (ST) 00084</A></h4>

<p><br>
	Definition:  has the same definition as the corresponding field in the MSH
segment. <br>
 </p>

<h4>
<A NAME="Heading181">2.10.13.5 Batch receiving application (ST) 00085</A></h4>

<p><br>
	Definition:  has the same definition as the corresponding field in the MSH
segment. <br>
 </p>

<h4>
<A NAME="Heading182">2.10.13.6 Batch receiving facility (ST) 00086</A></h4>

<p><br>
	Definition:  has the same definition as the corresponding field in the MSH
segment. <br>
 </p>

<h4>
<A NAME="Heading183">2.10.13.7 Batch creation date/time (TS) 00087</A></h4>

<p><br>
	Definition:  has the same definition as the corresponding field in the MSH
segment.</p>

<h4>
<A NAME="Heading184">2.10.13.8 Batch security (ST) 00088</A></h4>

<p><br>
	Definition:  has the same definition as the corresponding field in the MSH
segment. <br>
 </p>

<h4>
<A NAME="Heading185">2.10.13.9 Batch name/ID/type (ST) 00089</A></h4>

<p><br>
	Definition:  can be used by the application processing the batch.  It can have
extra components if needed. <br>
 </p>

<h4>
<A NAME="Heading186">2.10.13.10 Batch comment (ST) 00090</A></h4>

<p><br>
	Definition:  comment field that is not further defined in the HL7 protocol.
<br>
 </p>

<h4>
<A NAME="Heading187">2.10.13.11 Batch control ID (ST) 00091</A></h4>

<p><br>
	Definition:  used to uniquely identify a particular batch.  It can be echoed
back in <i>BHS-12-reference batch control ID</i> if an answering batch is
needed. <br>
 </p>

<h4>
<A NAME="Heading188">2.10.13.12 Reference batch control ID (ST) 00092</A></h4>

<p><br>
	Definition:  value of <i>BHS-11-batch control ID</i> when this batch was
originally transmitted.  Not present if this batch is being sent for the first
time.  See definition for <i>BHS-11-batch control ID</i>.</p>
<h3>
</h3>

<h3>
<A NAME="Heading189">2.10.14  BTS - batch trailer segment -</A></h3>

<p>
<br>
	The BTS segment defines the end of a batch. <br>
	Figure 2-22  BTS attributes<br>
</p>
<TABLE BORDER><TR align="center">
<TH colspan=1 align="center"><p>SEQ</p>
<BR></TH>
<TH colspan=1 align="center"><p>LEN</p>
<BR></TH>
<TH colspan=1 align="center"><p>DT</p>
<BR></TH>
<TH colspan=1 align="center"><p>R/O</p>
<BR></TH>
<TH colspan=1 align="center"><p>RP/#</p>
<BR></TH>
<TH colspan=1 align="center"><p>TBL#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ITEM#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ELEMENT
NAME
</p>
<BR></TH></TR><TR align="right">
<TD colspan=1 align="right"><p>1<br>
2<br>
3
</p>
<BR></TD>
<TD colspan=1 align="right"><p>10<br>
80<br>
100
</p>
<BR></TD>
<TD colspan=1 align="right"><p>ST<br>
ST<br>
CM
</p>
<BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p><br>
Y
</p>
<BR></TD>
<TD colspan=1 align="right"><BR></TD>
<TD colspan=1 align="right"><p>00093<br>
00094<br>
00095
</p>
<BR></TD>
<TD colspan=1 align="right"><p>Batch
Message Count<br>
Batch Comment<br>
Batch Totals
</p>
<BR></TD></TR></TABLE><p><br>
<b>2.10.14.0	BTS field definitions</b></p>

<h4>
<A NAME="Heading190">2.10.14.1 Batch message count (ST) 00093</A></h4>

<p><br>
	Definition:  count of the individual messages contained within the batch. <br>
 </p>

<h4>
<A NAME="Heading191">2.10.14.2 Batch comment (ST) 00094</A></h4>

<p><br>
	Definition:  comment field that is not further defined in the HL7 protocol.
<br>
 </p>

<h4>
<A NAME="Heading192">2.10.14.3 Batch totals (CM) 00095</A></h4>

<p><br>
	Components: &lt;total 1 (NM)&gt; ^ &lt;total 2 (NM)&gt; ^ ...<br>
	Definition:  as many types of totals as needed for the batch may be carried by
this field as separate  components.  Each component is an NM data type.</p>
<h3>
</h3>

<h3>
<A NAME="Heading193">2.10.15  NTE - notes and comments segment -</A></h3>

<p>
<br>
	The NTE segment is defined here for inclusion in messages defined in other
chapters.  It is a common format for sending notes and comments. <br>
	Figure 2-23  NTE attributes<br>
</p>
<TABLE BORDER><TR align="center">
<TH colspan=1 align="center"><p>SEQ</p>
<BR></TH>
<TH colspan=1 align="center"><p>LEN</p>
<BR></TH>
<TH colspan=1 align="center"><p>DT</p>
<BR></TH>
<TH colspan=1 align="center"><p>R/O</p>
<BR></TH>
<TH colspan=1 align="center"><p>RP/#</p>
<BR></TH>
<TH colspan=1 align="center"><p>TBL#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ITEM#</p>
<BR></TH>
<TH colspan=1 align="center"><p>ELEMENT
NAME
</p>
<BR></TH></TR><TR align="right">
<TD colspan=1 align="right"><p>1<br>
2<br>
3
</p>
<BR></TD>
<TD colspan=1 align="right"><p>4<br>
8<br>
64k
</p>
<BR></TD>
<TD colspan=1 align="right"><p>SI<br>
ID<br>
FT
</p>
<BR></TD>
<TD colspan=1 align="center"><BR></TD>
<TD colspan=1 align="center"><p><br>
Y
</p>
<BR></TD>
<TD colspan=1 align="right"><p><br>
0105
</p>
<BR></TD>
<TD colspan=1 align="right"><p>00096<br>
00097<br>
00098
</p>
<BR></TD>
<TD colspan=1 align="right"><p>Set
ID - Notes and Comments<br>
Source of Comment<br>
Comment
</p>
<BR></TD></TR></TABLE><p><br>
<b>2.10.15.0	NTE field definitions</b><br>
  </p>

<h4>
<A NAME="Heading194">2.10.15.1 Set ID - notes and comments (SI) 00096 </A></h4>

<p><br>
	Definition:  may be used where multiple NTE segments are included in a
message.  Their numbering must be described in the application message
definition. <br>
 </p>

<h4>
<A NAME="Heading195">2.10.15.2 Source of comment (ID) 00097 </A></h4>

<p><br>
	Definition:  used when source of comment must be identified.  This table may
be extended locally during implementation.<br>
	Table 0105   Source of comment <br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>L<br>
P<br>
O
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Ancillary
(filler) department is source of comment<br>
Orderer (placer) is source of comment<br>
Other system is source of comment
</p>
<BR></TD></TR></TABLE><p>
</p>

<h4>
<A NAME="Heading196">2.10.15.3 Comment (FT) 00098</A></h4>

<p><br>
	Definition:  comment contained in the segment.  <br>
</p>
<TABLE BORDER><TR align="left">
<TD colspan=1 align="left"><p><b>Note:</b>
	In the current HL7 version,  this is an FT rather than a TX data type.  Since
there is no difference between an FT data type without any embedded formatting
commands, and a TX data type, this change is compatible with the previous
version.
</p>
<BR></TD></TR></TABLE><p></p>
<h3>
</h3>

<h3>
<A NAME="Heading197">2.10.16  Miscellaneous HL7 tables used across all chapters.</A></h3>

<p></p>

<h4>
<A NAME="Heading198">2.10.16.1 Yes/No indicator table</A></h4>

<p><br>
	Table 0136  Y/N indicator<br>
</p>
<TABLE BORDER><TR align="center">
<TD colspan=1 align="center"><p><b>Value</b></p>
<BR></TD>
<TD colspan=1 align="center"><p><b>Description</b></p>
<BR></TD></TR><TR align="center">
<TD colspan=1 align="center"><p>Y<br>
N
</p>
<BR></TD>
<TD colspan=1 align="center"><p>Yes<br>
No
</p>
<BR></TD></TR></TABLE><p></p>
<h2>
</h2>

<h2>
<A NAME="Heading199">2.11  SAMPLE CONTROL AND QUERY MESSAGES </A></h2>

<p></p>
<h3>
</h3>

<h3>
<A NAME="Heading200">2.11.1   General Acknowledgement </A></h3>

<p><br>
	LAB acknowledges the message that ADT sent identified as ZZ9380.  (LAB and
ADT, the sending and receiving system IDs, are site-defined.)  Both systems are
associated with the same FACILITY, 767543.  There is no trigger event for an
acknowledgement, so the second component of the MESSAGE TYPE field is not
present.  The component separator may be present there, but need not be.  The
AA code in the MSA segment indicates that the message was accepted by the
application.<br>
<tt>
MSH|^~\&amp;|LAB|767543|ADT|767543|19900314130405||ACK^|XX3657|P|2.1&lt;CR&gt;</tt><br>
<tt>	MSA|AA|ZZ9380&lt;CR&gt;</tt></p>
<h3>
</h3>

<h3>
<A NAME="Heading201">2.11.2  Error return </A></h3>

<p><br>
	The AR code in MSA indicates that the application rejected the message for
functional reasons.  The optional ERR segment includes here that the 16th field
of the PID segment with the SET ID value of 1 had an error which was defined by
the locally-established code X3L.  The optional text message UNKNOWN COUNTY
CODE in the link is designed to help programmers and support personnel while
reviewing message logs.<br>
<tt>
MSH|^~\&amp;|LAB|767543|ADT|767543|199003141304-0500||ACK^|XX3657|P|2.1&lt;CR&gt;</tt><br>
<tt>	MSA|AR|ZZ9380|UNKNOWN COUNTY CODE&lt;CR&gt;</tt><br>
<tt>	ERR|PID^1^16^X3L&lt;CR&gt;</tt></p>
<h3>
</h3>

<h3>
<A NAME="Heading202">2.11.3  Sequence number:  initial message </A></h3>

<p><br>
	The sender initiates the link with a message that has no functional content.
The sequence number is 0.  The message type and event code are not used.<br>
<tt>
MSH|^~\&amp;|ADT|767543|LAB|767543|199003141304-0500||^|XX3657|P|2.1|0&lt;CR&gt;</tt><br>
	The responder uses a general acknowledgement.  The expected sequence number is
1.<br>
<tt>
MSH|^~\&amp;|LAB|767543|ADT|767543|199003141304-0500||ACK^|ZZ9380|P|2.1&lt;CR&gt;</tt><br>
<tt>	MSA|AA|XX3657||1&lt;CR&gt;</tt></p>
<h3>
</h3>

<h3>
<A NAME="Heading203">2.11.4  Query with display-oriented response </A></h3>

<p><br>
	Query for all lab results on patient #12233.  The query is made at 11:00 a.m.,
9/11/87.  The Query anticipates an immediate display-oriented response.<br>
<tt>	MSH|^~\&amp;|ICU||LAB01|||QRY^Q01|MSG00001|P|2.1&lt;CR&gt;</tt><br>
<tt>	QRD|198709111012|D|I|4387|||20^LI|12233|RES|ALL&lt;CR&gt;</tt><br>
	The response to the above query might look like the following:<br>
<tt>	MSH|^~\&amp;|LAB01||ICU|||DSR|ZXT23461|P|2.1&lt;CR&gt;</tt><br>
<tt>	MSA|AA|MSG00001P&lt;CR&gt;</tt><br>
<tt>	QRD|198709111012|D|I|4387|||20^LI|12233|RES|ALL&lt;CR&gt;</tt><br>
<tt>	DSP|||RESULTS FOR PATIENT#12233   SMITH, JOHN H.
09/11/87&lt;CR&gt;</tt><br>
<tt>	DSP|||SPECIMEN#H85 COLLECTED 09/11/87 /07/0/0&lt;CR&gt;</tt><br>
<tt>	DSP&lt;CR&gt;</tt><br>
<tt>	DSP|||ELECTROLYTES&lt;CR&gt;</tt><br>
<tt>	DSP|||	SODIUM			140	[135-148]	MEQ/L	STAT&lt;CR&gt;</tt><br>
<tt>	DSP|||	POTASSIUM		4.0	[3.5-5.0]	MEQ/L	STAT&lt;CR&gt;</tt><br>
<tt>	DSP|||	CHLORIDE		89	[95-111]	MEQ/L	STAT&lt;CR&gt;</tt><br>
<tt>	DSP|||	CO2				20	[20-30]		MEQ/L	STAT&lt;CR&gt;</tt><br>
<tt>	DSP||||LB&lt;CR&gt;</tt><br>
<tt>	DSP|||CBC&lt;CR&gt;</tt><br>
<tt>	DSP|||	HEMOGLOBIN			[13.5-18.0]&lt;CR&gt;</tt><br>
<tt>	DSP|||	HEMATOCRIT		45	[40-54]		%&lt;CR&gt;	</tt><br>
<tt>	DSP|||	RED CELL COUNT	5.0	[4.6-6.2] 	M/MM3&lt;CR&gt;</tt><br>
<tt>	DSP|||	MCHC			32	[32-36]		G/DL&lt;CR&gt;</tt><br>
<tt>	DSP|||	MCH				28	[26-32]		PG&lt;CR&gt;</tt><br>
<tt>	DSP|||	MCV				85	[81-101]	FL&lt;CR&gt;</tt><br>
<tt>	DSP|||	WHITE CELL CNT	7.5	[5.0-10.0]	K/MM3&lt;CR&gt;</tt><br>
<tt>	DSP||||LB&lt;CR&gt;	</tt><br>
<tt>	DSP|||SPECIMEN#B24   COLLECTED 9/10/87&lt;CR&gt;</tt><br>
<tt>	DSC|12333H85;12&lt;CR&gt;</tt><br>
	A continuation query would echo back the contents of the Continuation Pointer
in the DSC segment:<br>
<tt>	MSH|^~\&amp;|ICU||LAB01|||QRY^Q01|MSG00003|P|2.1&lt;CR&gt;</tt><br>
<tt>	QRD|198709111012|D|I|4387|||20^LI|12233|RES|ALL&lt;CR&gt;</tt><br>
<tt>	DSC|12333H85;12&lt;CR&gt;</tt><br>
	This response shows that there is no further data by leaving the Continuation
Pointer not present.  This could be done by sending the DSC segment ID with no
data, but the example does the same thing by totally omitting the DSC
segment.<br>
<tt>	MSH|^~\&amp;|LAB01||ICU|||DSR|ZXT23469|P|2.1&lt;CR&gt;</tt><br>
<tt>	MSA|AA|MSG00003|&lt;CR&gt;</tt><br>
<tt>	QRD|198709111012|D|I|4387|||20^LI|12233|RES|ALL&lt;CR&gt;</tt><br>
<tt>	DSP|||RESULTS FOR PATIENT#12233   SMITH, JOHN H.
09/11/87&lt;CR&gt;</tt><br>
<tt>	DSP|||SPECIMEN#H85 COLLECTED 09/10/87 /07/0/0&lt;CR&gt;</tt><br>
<tt>	DSP&lt;CR&gt;</tt><br>
<tt>	DSP|||ELECTROLYTES&lt;CR&gt;</tt><br>
<tt>	DSP|||	SODIUM		136	[135-148]	MEQ/L	STAT&lt;CR&gt;</tt><br>
<tt>	DSP|||	POTASSIUM	4.2	[3.5-5.0]	MEQ/L	STAT&lt;CR&gt;</tt><br>
<tt>	DSP|||	CHLORIDE	91	[95-111]	MEQ/L	STAT&lt;CR&gt;</tt><br>
<tt>	DSP|||	CO2			25	[20-30]		MEQ/L	STAT&lt;CR&gt;</tt><br>
<tt>	DSP||||LB&lt;CR&gt;</tt></p>
<h3>
</h3>

<h3>
<A NAME="Heading204">2.11.5 Master file update examples: with original and enhanced acknowledgement protocol</A></h3>

<p><br>
	This example shows the lab system using the Master Files specification to send
two update test dictionary entries to an ICU system.  The ODC (observation
dictionary) segment, currently under development by HL7 and ASTM, carries the
dictionary information.  Several varieties of acknowledgement are shown.  The
choice of acknowledgement mode is site-specific.  </p>

<h4>
<A NAME="Heading205">2.11.5.1 Original mode example:</A></h4>

<p><br>
<tt>
MSH|^~\&amp;|LABxxx|ClinLAB|ICU||19910918060544||MFN^M03|MSGID002|P|2.2</tt><br>
<tt>	MFI|LABxxx^Lab Test Dictionary^L|UPD|||AL</tt><br>
<tt>	MFE|MUP|199109051000|199110010000|12345^WBC^L</tt><br>
<tt>	OM1|...</tt><br>
<tt>	MFE|MUP|199109051015|199110010000|6789^RBC^L</tt><br>
<tt>	OM1|...</tt><br>
	Original mode acknowledgement of the HL7 message according to MFI Response
Level Code of AL.<br>
<tt>
MSH|^~\&amp;|ICU||LABxxx|ClinLAB|19910918060545||MFK|MSGID99002|P|2.2</tt><br>
<tt>	MSA|AA|MSGID002</tt><br>
<tt>	MFI|LABxxx^Lab Test Dictionary^L|UPD|||MFAA</tt><br>
<tt>	MFA|MUP|199110010000|199110010040|S|12345^WBC^L</tt><br>
<tt>	MFA|MUP|199110010000|199110010041|S|6789^RBC^L</tt></p>

<h4>
<A NAME="Heading206">2.11.5.2 Enhanced mode example</A></h4>

<p></p>

<h5>
<A NAME="Heading207">2.11.5.2.1 Initial Message with accept acknowledgement</A></h5>

<p><br>
<tt>
MSH|^~\&amp;|LABxxx|ClinLAB|ICU||19910918060544||MFN^M03|MSGID002|P|2.2|||AL|AL</tt><br>
<tt>	MFI|LABxxx^Lab Test Dictionary^L|UPD|||AL</tt><br>
<tt>	MFE|MUP|199109051000|199110010000|12345^WBC^L</tt><br>
<tt>	OM1|...</tt><br>
<tt>	MFE|MUP|199109051015|199110010000|6789^RBC^L</tt><br>
<tt>	OM1|...</tt><br>
<tt>
MSH|^~\&amp;|ICU||LABxxx|ClinLAB|19910918060545||MSA|MSGID99002|P|2.2</tt><br>
<tt>	MSA|CA|MSGID002</tt></p>

<h5>
<A NAME="Heading208">2.11.5.2.2 Application acknowledgement message</A></h5>

<p><br>
<tt>
MSH|^~\&amp;|ICU||LABxxx|ClinLAB|19911001080504||MFK|MSGID5002|P|2.2|||AL|</tt><br>
<tt>	MSA|AA|MSGID002</tt><br>
<tt>	MFI|LABxxx^Lab Test Dictionary^L|UPD|||MFAA</tt><br>
<tt>	MFA|MUP|199109051000|199110010040|S|12345^WBC^L</tt><br>
<tt>	MFA|MUP|199109051015|199110010041|S|6789^RBC^L</tt><br>
<tt>
MSH|^~\&amp;|LABxxx|ClinLAB|ICU||19911001080507||ACK|MSGID444|P|2.2</tt><br>
<tt>	MSA|CA|MSGID5002</tt></p>

<h4>
<A NAME="Heading209">2.11.5.3 Delayed application acknowledgement</A></h4>

<p><br>
</p>
<TABLE BORDER><TR align="left">
<TD colspan=1 align="left"><p><b>Note:</b>
	If the MFN message of 2.11.5.1 had not required an application acknowledgement
at the message level (i.e., the application acknowledgement code of the MSH
segment = NE), the (Master Files Chapter defined) MFD message could be used to
provide a delayed application level acknowledgement not tied to the original
MFN message.  
</p>
<BR></TD></TR></TABLE><p><br>
	The following example includes an acknowledgement for an MFE segment not in
the original message.  This additional MFE was sent via another MFN message.</p>

<h5>
<A NAME="Heading210">2.11.5.3.1 Initial message with accept acknowledgement</A></h5>

<p><br>
<tt>
MSH|^~\&amp;|LABxxx|ClinLAB|ICU||19910918060544||MFN^M03|MSGID002|P|2.2|||AL|NE</tt><br>
<tt>	MFI|LABxxx^Lab Test Dictionary^L|UPD|||AL</tt><br>
<tt>	MFE|MUP|199109051000|199110010000|12345^WBC^L</tt><br>
<tt>	OM1|...</tt><br>
<tt>	MFE|MUP|199109051015|199110010000|6789^RBC^L</tt><br>
<tt>	OM1|...</tt><br>
<tt>
MSH|^~\&amp;|ICU||LABxxx|ClinLAB|19910918060545||MSA|MSGID99002|P|2.2</tt><br>
<tt>	MSA|CA|MSGID002</tt></p>

<h5>
<A NAME="Heading211">2.11.5.3.2 Delayed application acknowledgement</A></h5>

<p><br>
<tt>
MSH|^~\&amp;|ICU||LABxxx|ClinLAB|19911001080504||MFD|MSGID65002|P|2.2|||AL|</tt><br>
<tt>	MFI|LABxxx^Lab Test Dictionary^L|UPD|||MFAA</tt><br>
<tt>	MFA|MUP|199109051000|199110010040|S|12345^WBC^L</tt><br>
<tt>	MFA|MUP|199109051015|199110010041|S|6789^RBC^L</tt><br>
<tt>	MFA|MUP|199109051025|199110010041|S|4339^HGB^L</tt><br>
<tt>
MSH|^~\&amp;|LABxxx|ClinLAB|ICU||19911001080507||ACK|MSGID444|P|2.2</tt><br>
<tt>	MSA|CA|MSGID65002</tt></p>
<h2>
</h2>

<h2>
<A NAME="Heading212">2.12 OUTSTANDING ISSUES</A></h2>

<p><br>
The following items are being discussed in the Control/Query technical
committee for addition to future versions of HL7.<br>
1. 	Inclusion of alternate character sets within HL7 messages.  HL7 intends to
allow the use of alternate character sets in a manner that is consistent with
other US standards groups (such as ASTM E1238-94) and with various
international standards groups (such as CEN/TC-251).<br>
2. 	Investigate extending the HL7 query paradigm to include a subset of SQL
defined on an implicit table structure consistent with a subset of current HL7
segment definitions.<br>
3. 	Rationalization and clarification of event structures.<br>
4. 	Creation of a network server for HL7 tables so that updates to them can be
made public immediately, rather than waiting until the publication of the next
version of the standard.<br>
5. 	Extensions to the encoding rules for Version 3.
</p>
<HR><a name="fn0" href="#fnB0">[&#160;]</a><p>&#160;&#160;&#160;<sup>1</sup>	The
receiving system, if storing the field in its database, distinguishes these two
conditions as follows:  <br>
		field value not present - do not change value of field in database<br>
		field value present but null - change database value of field to null<br>
<a name="fn1" href="#fnB1">[&#160;&#160;&#160;&#160;]</a><sup>2</sup>	Available
from ISO 1 Rue de Varembe, Case Postale 56, CH 1211, Geneve, Switzerland
</p>

</body></html>
